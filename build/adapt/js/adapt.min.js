define('core/js/wait',[],function() {

   var Wait = Backbone.Controller.extend({

      initialize: function() {
        _.bindAll(this, 'begin', 'end');
      },

      _waitCount: 0,
      _callbackHandle: null,
      _timeoutHandlerId: null,
      _timeoutInSeconds: 7,

      /**
       * Returns true if there are items in the waiting count.
       *
       * @return {Boolean}
       */
      isWaiting: function() {
        return (this._waitCount !== 0);
      },

      /**
       * Starts or re-starts a timer to ensure that pending calls to end()
       * are actually executed after a timeout period.
       */
      startTimer: function() {
        this.stopTimer();

        this._timeoutHandlerId = setInterval(function() {
          // Flush Adapt.wait due to timeout
          while (this._waitCount > 0) {
            // Trigger an end() for anything waiting.
            this.end();
          }

          if (this._waitCount === 0) {
            this.stopTimer();
          }
        }.bind(this), this._timeoutInSeconds * 1000)
      },

      /**
       * Clears the timer.
       */
      stopTimer: function() {
        if (this._timeoutHandlerId) {
          clearInterval(this._timeoutHandlerId);
        }
      },

      /**
       * Add one item to the waiting count.
       *
       * @return {Object}
       */
      begin: function() {

        if (!this.isWaiting()) {
          this.trigger('wait');
        }

        this._waitCount++;

        if (this._callbackHandle) {
          clearTimeout(this._callbackHandle);
          this._callbackHandle = null;
        }

        this.startTimer();

        return this;

      },

      /**
       * Remove an item from the waiting count and trigger ready asynchronously if no more items are waiting.
       *
       * @return {Object}
       */
      end: function() {

        if (!this.isWaiting()) {
          return this;
        }

        this._waitCount--;

        if (this._waitCount === 0) {
          this.stopTimer();
        }

        if (this.isWaiting()) {
          return this;
        }

        if (this._callbackHandle) {
          return this;
        }

        this._callbackHandle = setTimeout(function() {

          this._callbackHandle = null;
          this.trigger('ready');

        }.bind(this), 0);

        return this;

      },

      /**
       * Queue this function until all open waits have been ended.
       *
       * @param  {Function} callback
       * @return {Object}
       */
      queue: function(callback) {

        this.begin();
        this.once('ready', callback);
        this.end();

        return this;

      },

      /**
       * Wait for this asynchronous function to execute before triggering ready event.
       *
       * @param  {Function} callback   [ Function to execute whilst holding queued callback. Once complete run first argument, done(). ]
       * @return {Object}
       */
      for: function(callback) {

        this.begin();
        _.defer(function() {
          callback(_.once(this.end));
        }.bind(this));

        return this;

      }

  });

  return Wait;

});
define('core/js/models/lockingModel',[],function() {

  var set = Backbone.Model.prototype.set;

  _.extend(Backbone.Model.prototype, {

    set: function(attrName, attrVal, options) {
      var stopProcessing = !this.lockedAttributes || typeof attrName === "object" || typeof attrVal !== "boolean" || !this.isLocking(attrName);
      if (stopProcessing) return set.apply(this, arguments);

      options = options || {};

      var isSettingValueForSpecificPlugin = options && options.pluginName;
      if (!isSettingValueForSpecificPlugin) {
        console.error("Must supply a pluginName to change a locked attribute");
        options.pluginName = "compatibility";
      }

      var pluginName  = options.pluginName;
      if (this.defaults[attrName] !== undefined) {
        this.lockedAttributes[attrName] = !this.defaults[attrName];
      }
      var lockingValue = this.lockedAttributes[attrName];
      var isAttemptingToLock = (lockingValue === attrVal);

      if (isAttemptingToLock) {

        this.setLockState(attrName, true, {pluginName:pluginName, skipcheck: true});

        //console.log(options.pluginName, "locking", attrName, "on", this.get("_id"));
        return set.call(this, attrName, lockingValue);

      }

      this.setLockState(attrName, false, {pluginName:pluginName, skipcheck: true});

      var totalLockValue = this.getLockCount(attrName, {skipcheck: true});
      //console.log(options.pluginName, "attempting to unlock", attrName, "on", this.get("_id"), "lockValue", totalLockValue, this._lockedAttributesValues[attrName]);
      if (totalLockValue === 0) {
        //console.log(options.pluginName, "unlocking", attrName, "on", this.get("_id"));
        return set.call(this, attrName, !lockingValue);
      }

      return this;

    },

    setLocking: function(attrName, defaultLockValue) {
      if (this.isLocking(attrName)) return;
      if (!this.lockedAttributes) this.lockedAttributes = {};
      this.lockedAttributes[attrName] = defaultLockValue;
    },

    unsetLocking: function(attrName) {
      if (!this.isLocking(attrName)) return;
      if (!this.lockedAttributes) return;
      delete this.lockedAttributes[attrName];
      delete this._lockedAttributesValues[attrName];
      if (_.keys(this.lockedAttributes).length === 0) {
        delete this.lockedAttributes;
        delete this._lockedAttributesValues;
      }
    },

    isLocking: function(attrName) {
      var isCheckingGeneralLockingState = (attrName === undefined);
      var isUsingLockedAttributes = (this.lockedAttributes !== undefined);

      if (isCheckingGeneralLockingState) {
        return isUsingLockedAttributes;
      }

      if (!isUsingLockedAttributes) return false;

      var isAttributeALockingAttribute = this.lockedAttributes[attrName] !== undefined;
      if (!isAttributeALockingAttribute) return false;

      if (this._lockedAttributesValues === undefined) {
        this._lockedAttributesValues = {};
      }

      if (this._lockedAttributesValues[attrName] === undefined) {
        this._lockedAttributesValues[attrName] = {};
      }

      return true;
    },

    isLocked: function(attrName, options) {
      var shouldSkipCheck = (options && options.skipcheck);
      if (!shouldSkipCheck) {
        var stopProcessing =  !this.isLocking(attrName);
        if (stopProcessing) return;
      }

      return this.getLockCount(attrName) > 0;
    },

    getLockCount: function(attrName, options) {
      var shouldSkipCheck = (options && options.skipcheck);
      if (!shouldSkipCheck) {
        var stopProcessing =  !this.isLocking(attrName);
        if (stopProcessing) return;
      }

      var isGettingValueForSpecificPlugin = options && options.pluginName;
      if (isGettingValueForSpecificPlugin) {

        return this._lockedAttributesValues[attrName][options.pluginName] ? 1 : 0;
      }

      var lockingAttributeValues = _.values(this._lockedAttributesValues[attrName]);
      var lockingAttributeValuesSum = _.reduce(lockingAttributeValues, function(sum, value){ return sum + (value ? 1 : 0); }, 0);

      return lockingAttributeValuesSum;
    },

    setLockState: function(attrName, value, options) {
      var shouldSkipCheck = (options && options.skipcheck);
      if (!shouldSkipCheck) {
        var stopProcessing =  !this.isLocking(attrName);
        if (stopProcessing) return this;
      }

      var isSettingValueForSpecificPlugin = options && options.pluginName;
      if (!isSettingValueForSpecificPlugin) {
        console.error("Must supply a pluginName to set a locked attribute lock value");
        options.pluginName = "compatibility";
      }

      if (value) {
        this._lockedAttributesValues[attrName][options.pluginName] = value;
      } else {
        delete this._lockedAttributesValues[attrName][options.pluginName];
      }

      return this;

    }

  });

});

define('core/js/adapt',["core/js/wait", "core/js/models/lockingModel"], function (Wait) {
  var Adapt = Backbone.Model.extend({
    loadScript: window.__loadScript,
    location: {},
    componentStore: {},

    defaults: {
      _canScroll: true, //to stop scrollTo behaviour,
      _outstandingCompletionChecks: 0,
      _pluginWaitCount: 0,
      _isStarted: false,
    },

    lockedAttributes: {
      _canScroll: false,
    },

    init: function () {
      this.addDirection();
      this.disableAnimation();
      this.trigger("adapt:preInitialize");

      //wait until no more completion checking
      this.deferUntilCompletionChecked(
        function () {
          //start adapt in a full restored state
          this.trigger("adapt:start");

          if (!Backbone.History.started) {
            Backbone.history.start();
          }

          this.set("_isStarted", true);

          this.trigger("adapt:initialize");
        }.bind(this)
      );
    },

    initialize: function () {
      this.setupWait();
    },

    /**
     * call when entering an asynchronous completion check
     */
    checkingCompletion: function () {
      var outstandingChecks = this.get("_outstandingCompletionChecks");
      this.set("_outstandingCompletionChecks", ++outstandingChecks);
    },

    /**
     * call when exiting an asynchronous completion check
     */
    checkedCompletion: function () {
      var outstandingChecks = this.get("_outstandingCompletionChecks");
      this.set("_outstandingCompletionChecks", --outstandingChecks);
    },

    /**
     * wait until there are no outstanding completion checks
     * @param {Function} callback Function to be called after all completion checks have been completed
     */
    deferUntilCompletionChecked: function (callback) {
      if (this.get("_outstandingCompletionChecks") === 0) return callback();

      var checkIfAnyChecksOutstanding = function (model, outstandingChecks) {
        if (outstandingChecks !== 0) return;

        this.off(
          "change:_outstandingCompletionChecks",
          checkIfAnyChecksOutstanding
        );

        callback();
      };

      this.on(
        "change:_outstandingCompletionChecks",
        checkIfAnyChecksOutstanding
      );
    },

    setupWait: function () {
      this.wait = new Wait();

      // Setup legacy events and handlers
      var beginWait = function () {
        this.log.warn(
          "DEPRECATED - Use Adapt.wait.begin() as Adapt.trigger('plugin:beginWait') may be removed in the future"
        );
        this.wait.begin();
      }.bind(this);

      var endWait = function () {
        this.log.warn(
          "DEPRECATED - Use Adapt.wait.end() as Adapt.trigger('plugin:endWait') may be removed in the future"
        );
        this.wait.end();
      }.bind(this);

      var ready = function () {
        if (this.wait.isWaiting()) {
          return;
        }

        var isEventListening = this._events["plugins:ready"];
        if (!isEventListening) {
          return;
        }

        this.log.warn(
          "DEPRECATED - Use Adapt.wait.queue(callback) as Adapt.on('plugins:ready', callback) may be removed in the future"
        );
        this.trigger("plugins:ready");
      }.bind(this);

      this.listenTo(this.wait, "ready", ready);
      this.listenTo(this, {
        "plugin:beginWait": beginWait,
        "plugin:endWait": endWait,
      });
      // custom event listeners
      this.listenTo(this, "Audio:playAsset", this.playAudioAsset);
      this.listenTo(this, "Audio:stopPlaying", this.stopPlaying);
      this.listenTo(this, "Audio:resumePlaying", this.resumePlaying);
    },

    isWaitingForPlugins: function () {
      this.log.warn(
        "DEPRECATED - Use Adapt.wait.isWaiting() as Adapt.isWaitingForPlugins() may be removed in the future"
      );
      return this.wait.isWaiting();
    },

    checkPluginsReady: function () {
      this.log.warn(
        "DEPRECATED - Use Adapt.wait.isWaiting() as Adapt.checkPluginsReady() may be removed in the future"
      );
      if (this.isWaitingForPlugins()) {
        return;
      }
      this.trigger("plugins:ready");
    },

    /**
     * Allows a selector to be passed in and Adapt will navigate to this element
     * @param {string} selector CSS selector of the Adapt element you want to navigate to e.g. `".co-05"`
     * @param {object} [settings] The settings for the `$.scrollTo` function (See https://github.com/flesler/jquery.scrollTo#settings).
     * You may also include a `replace` property that you can set to `true` if you want to update the URL without creating an entry in the browser's history.
     */
    navigateToElement: function (selector, settings) {
      settings = settings || {};

      // Removes . symbol from the selector to find the model
      var currentModelId = selector.replace(/\./g, "");
      var currentModel = this.data.findById(currentModelId);
      // Get current page to check whether this is the current page
      var currentPage =
        currentModel._siblings === "contentObjects"
          ? currentModel
          : currentModel.findAncestor("contentObjects");

      // If current page - scrollTo element
      if (currentPage.get("_id") === this.location._currentId) {
        return this.scrollTo(selector, settings);
      }

      // If the element is on another page navigate and wait until pageView:ready is fired
      // Then scrollTo element
      this.once(
        "pageView:ready",
        _.debounce(
          function () {
            this.router.set("_shouldNavigateFocus", true);
            this.scrollTo(selector, settings);
          }.bind(this),
          1
        )
      );

      var shouldReplaceRoute = settings.replace || false;

      this.router.set("_shouldNavigateFocus", false);
      Backbone.history.navigate("#/id/" + currentPage.get("_id"), {
        trigger: true,
        replace: shouldReplaceRoute,
      });
    },

    /**
     * Used to register components with the Adapt 'component store'
     * @param {string} name The name of the component to be registered
     * @param {object} object Object containing properties `model` and `view` or (legacy) an object representing the view
     */
    register: function (name, object) {
      if (this.componentStore[name]) {
        throw Error(
          'The component "' + name + '" already exists in your project'
        );
      }

      if (object.view) {
        // use view+model object
        if (!object.view.template) object.view.template = name;
      } else {
        // use view object
        if (!object.template) object.template = name;
      }

      this.componentStore[name] = object;

      return object;
    },

    /**
     * Fetches a component view class from the componentStore. For a usage example, see either HotGraphic or Narrative
     * @param {string} name The name of the componentView you want to fetch e.g. `"hotgraphic"`
     * @returns {ComponentView} Reference to the view class
     */
    getViewClass: function (name) {
      var object = this.componentStore[name];
      if (!object) {
        throw Error(
          'The component "' + name + "\" doesn't exist in your project"
        );
      }
      return object.view || object;
    },

    /**
     * Looks up which collection a model belongs to
     * @param {string} id The id of the item you want to look up e.g. `"co-05"`
     * @return {string} One of the following (or `undefined` if not found):
     * - "course"
     * - "contentObjects"
     * - "blocks"
     * - "articles"
     * - "components"
     */
    mapById: function (id) {
      return this.data.mapById(id);
    },

    /**
     * Looks up a model by its `_id` property
     * @param {string} id The id of the item e.g. "co-05"
     * @return {Backbone.Model}
     */
    findById: function (id) {
      return this.data.findById(id);
    },

    findViewByModelId: function (id) {
      var model = this.data.findById(id);
      if (!model) return;

      if (model === this.parentView.model) return this.parentView;

      var idPathToView = [id];
      var currentLocationId = this.location._currentId;
      var currentLocationModel = _.find(
        model.getAncestorModels(),
        function (model) {
          var modelId = model.get("_id");
          if (modelId === currentLocationId) return true;
          idPathToView.unshift(modelId);
        }
      );

      if (!currentLocationModel) {
        return console.warn(
          "Adapt.findViewByModelId() unable to find view for model id: " + id
        );
      }

      var foundView = _.reduce(
        idPathToView,
        function (view, currentId) {
          return view && view.childViews && view.childViews[currentId];
        },
        this.parentView
      );

      return foundView;
    },

    /**
     * Relative strings describe the number and type of hops in the model hierarchy
     * @param {string} relativeString "@component +1" means to move one component forward from the current model
     * This function would return the following:
     * {
     *     type: "component",
     *     offset: 1
     * }
     * Trickle uses this function to determine where it should scrollTo after it unlocks
     */
    parseRelativeString: function (relativeString) {
      if (relativeString[0] === "@") {
        relativeString = relativeString.substr(1);
      }

      var type = relativeString.match(/(component|block|article|page|menu)/);
      if (!type) {
        this.log.error(
          "Adapt.parseRelativeString() could not match relative type",
          relativeString
        );
        return;
      }
      type = type[0];

      var offset = parseInt(relativeString.substr(type.length).trim() || 0);
      if (isNaN(offset)) {
        this.log.error(
          "Adapt.parseRelativeString() could not parse relative offset",
          relativeString
        );
        return;
      }

      return {
        type: type,
        offset: offset,
      };
    },

    addDirection: function () {
      var defaultDirection = this.config.get("_defaultDirection");

      $("html")
        .addClass("dir-" + defaultDirection)
        .attr("dir", defaultDirection);
    },

    disableAnimation: function () {
      var disableAnimationArray = this.config.get("_disableAnimationFor");
      var disableAnimation = this.config.get("_disableAnimation");

      // Check if animations should be disabled
      if (disableAnimationArray && disableAnimationArray.length > 0) {
        for (var i = 0; i < disableAnimationArray.length; i++) {
          if ($("html").is(disableAnimationArray[i])) {
            this.config.set("_disableAnimation", true);
            $("html").addClass("disable-animation");
            console.log("Animation disabled.");
          }
        }
      } else if (disableAnimation === true) {
        $("html").addClass("disable-animation");
      } else {
        $("html").removeClass("disable-animation");
      }
    },

    remove: function () {
      this.trigger("preRemove");
      this.trigger("remove");
      _.defer(this.trigger.bind(this), "postRemove");
    },

    /// Custom Global Listeners
    /**
     * Plays new audio asset
     * @param {*} src source of the audio
     */
    playAudioAsset: function (src) {
      var audio = $("#app__global-audio")[0];
      try {
        audio.pause();
      } catch (err) {}
      audio.src = src;
      audio.play();
    },
    stopPlaying: function () {
      var audio = $("#app__global-audio")[0];
      if (!audio.paused) {
        try {
          audio.pause();
        } catch (err) {}
      }
    },
    resumePlaying: function () {
      var audio = $("#app__global-audio")[0];
      if (audio.paused) {
        try {
          audio.play();
        } catch (err) {}
      }
    },
  });

  return new Adapt();
});

define('core/js/a11y/browserFocus',[
  'core/js/adapt'
], function(Adapt) {

  /**
   * Browser modifications to focus handling.
   * @class
   */
  var BrowserFocus = Backbone.Controller.extend({

    initialize: function() {
      _.bindAll(this, '_onBlur', '_onClick');
      this.$body = $('body');
      this.listenTo(Adapt, {
        'accessibility:ready': this._attachEventListeners
      });
    },

    _attachEventListeners: function() {
      this.$body
        .on('blur', '*', this._onBlur)
        .on('blur', this._onBlur);
      // 'Capture' event attachment for click
      this.$body[0].addEventListener('click', this._onClick, true);
    },

    /**
     * When any element in the document receives a blur event,
     * check to see if it needs the `data-a11y-force-focus` attribute removing
     * and check to see if it was blurred because a disabled attribute was added.
     * If a disabled attribute was added, the focus will be moved forward.
     *
     * @param {JQuery.Event} event
     */
    _onBlur: function(event) {
      var config = Adapt.a11y.config;
      if (!config._isEnabled || !config._options._isFocusNextOnDisabled) {
          return
      }
      var $element = $(event.target);
      if ($element.is('[data-a11y-force-focus]')) {
        _.defer(function() {
          $element.removeAttr('tabindex data-a11y-force-focus');
        });
      }
      // From here, only check source elements
      if (event.target !== event.currentTarget) {
        return;
      }
      // Check if element losing focus is losing focus
      // due to the addition of a disabled class
      if (!$element.is('[disabled]')) {
        return;
      }
      // Move focus to next readable element
      Adapt.a11y.focusNext($element);
    },

    /**
     * Force focus when clicked on a tabbable element,
     * making sure `document.activeElement` is updated.
     *
     * @param {JQuery.Event} event
     */
    _onClick: function(event) {
      var config = Adapt.a11y.config;
      if (!config._isEnabled || !config._options._isFocusOnClickEnabled) {
        return;
      }
      var $element = $(event.target);
      var $stack = $().add($element).add($element.parents());
      var $focusable = $stack.filter(config._options._tabbableElements);
      if (!$focusable.length) {
        return;
      }
      // Force focus for screen reader enter / space press
      $focusable[0].focus();
    }

  });

  return BrowserFocus;

});

define('core/js/a11y/focusOptions',[],function() {

  /**
   * Options parser for focus functions.
   * @class
   */
  var FocusOptions = function(options) {
    _.defaults(this, options, {

      /**
       * Stops the browser from scrolling to the focused point.
       * https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus
       *
       * @type {boolean}
       */
      preventScroll: true,

      /**
       * Add a defer to the focus call, allowing for user interface settling.
       *
       * @type {boolean}
       */
      defer: false

    });
  };

  return FocusOptions;

});

define('core/js/a11y/keyboardFocusOutline',[
  'core/js/adapt'
], function(Adapt) {

  /**
   * Manages whether or not the focus outline should be entirely removed
   * or removed until a key is pressed on a tabbable element.
   * @class
   */
  var KeyboardFocusOutline = Backbone.Controller.extend({

    initialize: function() {
      _.bindAll(this, '_onKeyDown');
      this.$html = $('html');
      this.showOnKeys = {
        9: true, // tab
        13: true, // enter
        32: true, // space
        37: true, // arrow left
        38: true, // arrow up
        39: true, // arrow right
        40: true // arrow down
      };
      this.listenTo(Adapt, {
        'accessibility:ready': this._attachEventListeners
      });
    },

    _attachEventListeners: function() {
      document.addEventListener('keydown', this._onKeyDown);
      this._start();
    },

    /**
     * Add styling classes if required.
     */
    _start: function() {
      var config = Adapt.a11y.config;
      if (config._options._isFocusOutlineDisabled) {
        this.$html.addClass('a11y-disable-focusoutline');
        return;
      }
      if (!config._isEnabled || !config._options._isFocusOutlineKeyboardOnlyEnabled) {
        return;
      }
      this.$html.addClass('a11y-disable-focusoutline');
    },

    /**
     * Handle key down events for on a tabbable element.
     *
     * @param {JQuery.Event} event
     */
    _onKeyDown: function(event) {
      var config = Adapt.a11y.config;
      if (config._options._isFocusOutlineDisabled) {
        this.$html.addClass('a11y-disable-focusoutline');
        return;
      }
      if (!config._isEnabled || !config._options._isFocusOutlineKeyboardOnlyEnabled || !this.showOnKeys[event.keyCode]) {
        return;
      }
      var $element = $(event.target);
      if (!$element.is(config._options._tabbableElements) || $element.is(config._options._focusOutlineKeyboardOnlyIgnore)) {
        return;
      }
      this.$html.removeClass('a11y-disable-focusoutline');
    }

  });

  return KeyboardFocusOutline;

});

define('core/js/a11y/log',[
  'core/js/adapt'
], function(Adapt) {

  /**
   * Controller for managing accessibilty logging, specifically used for
   * controlling the display of removed or deprecated API warnings.
   */
  var Log = Backbone.Controller.extend({

    _warned: {},

    _hasWarned: function(args) {
      var config = Adapt.a11y.config;
      if (!config._options._warnFirstOnly) {
        return false;
      }
      var hash = _.map(args, String).join(':');
      if (this._warned[hash]) {
        return true;
      }
      this._warned[hash] = true;
      return false;
    },

    _canWarn: function() {
      var config = Adapt.a11y.config;
      return Boolean(config._options._warn);
    },

    removed: function() {
      if (!this._canWarn) {
        return;
      }
      var args = Array.prototype.slice.call(arguments);
      if (this._hasWarned(args)) {
        return;
      }
      Adapt.log.warn.apply(Adapt.log, ['A11Y REMOVED:'].concat(args));
      return this;
    },

    deprecated: function() {
      if (!this._canWarn) {
        return;
      }
      var args = Array.prototype.slice.call(arguments);
      if (this._hasWarned(args)) {
        return;
      }
      Adapt.log.warn.apply(Adapt.log, ['A11Y DEPRECATED:'].concat(args));
      return this;
    }

  });

  return Log;

});

define('core/js/a11y/scroll',[],function() {

  /**
   * Controller for blocking scroll events on specified elements.
   * @class
   */
  var Scroll = Backbone.Controller.extend({

    initialize: function() {
      _.bindAll(this, '_onTouchStart', '_onTouchEnd', '_onScrollEvent', '_onKeyDown');
      this._scrollDisabledElements = $([]);
      this.$window = $(window);
      this.$body = $('body');
      this._preventScrollOnKeys = {
        37: true, // left
        38: true, // up
        39: true, // right
        40: true // down
      };
      this._ignoreKeysOnElementsMatching = 'textarea, input, select';
      this._isRunning = false;
      this._touchStartEventObject = null;
    },

    /**
     * Block scrolling on the given elements.
     *
     * @param {Object|string|Array} $elements
     */
    disable: function($elements) {
      $elements = $($elements);
      this._scrollDisabledElements = this._scrollDisabledElements.add($elements);
      this._checkRunning();
      return this;
    },

    /**
     * Stop blocking scrolling on the given elements.
     *
     * @param {Object|string|Array} $items
     */
    enable: function($elements) {
      $elements = $($elements);
      if (!$elements || !$elements.length) {
        this.clear();
        return this;
      }
      this._scrollDisabledElements = this._scrollDisabledElements.not($elements);
      this._checkRunning();
      return this;
    },

    /**
     * Stop blocking all scrolling.
     */
    clear: function() {
      this._scrollDisabledElements = $([]);
      this._checkRunning();
      return this;
    },

    /**
     * Start or stop listening for events to block if and when needed.
     */
    _checkRunning: function() {
      if (!this._scrollDisabledElements.length) {
        this._stop();
        return;
      }
      this._start();
    },

    /**
     * Start listening for events to block.
     */
    _start: function() {
      if (this._isRunning) {
        return;
      }
      this._isRunning = true;
      window.addEventListener('touchstart', this._onTouchStart); // mobile
      window.addEventListener('touchend', this._onTouchEnd); // mobile
      window.addEventListener('touchmove', this._onScrollEvent, { passive: false }); // mobile
      window.addEventListener('wheel', this._onScrollEvent, { passive: false });
      document.addEventListener('wheel', this._onScrollEvent, { passive: false });
      document.addEventListener('keydown', this._onKeyDown);
    },

    /**
     * Capture the touchstart event object for deltaY calculations.
     *
     * @param {JQuery.Event} event
     */
    _onTouchStart: function(event) {
      event = $.event.fix(event);
      this._touchStartEventObject = event;
      return true;
    },

    /**
     * Clear touchstart event object.
     */
    _onTouchEnd: function() {
      this._touchStartEventObject = null;
      return true;
    },

    /**
     * Process a native scroll event.
     *
     * @param {JQuery.Event} event
     */
    _onScrollEvent: function(event) {
      event = $.event.fix(event);
      return this._preventScroll(event);
    },

    /**
     * Process a native keydown event.
     *
     * @param {JQuery.Event} event
     */
    _onKeyDown: function(event) {
      event = $.event.fix(event);
      if (!this._preventScrollOnKeys[event.keyCode]) {
        return;
      }
      var $target = $(event.target);
      if ($target.is(this._ignoreKeysOnElementsMatching)) {
        return;
      }
      return this._preventScroll(event);
    },

    /**
     * Process jquery event object.
     *
     * @param {JQuery.Event} event
     */
    _preventScroll: function(event) {
      var $target = $(event.target);
      if (this._scrollDisabledElements.length) {
        var scrollingParent = this._getScrollingParent(event, $target);
        if (scrollingParent.filter(this._scrollDisabledElements).length === 0) {
          this.$window.scroll();
          return;
        }
      }
      event.preventDefault();
      return false;
    },

    /**
     * Return the parent which will be scrolling from the current scroll event.
     *
     * @param {JQuery.Event} event
     * @param {Object} $target jQuery element object.
     */
    _getScrollingParent: function(event, $target) {
      var isTouchEvent = event.type == 'touchmove';
      var hasTouchStartEvent = (this._touchStartEventObject && this._touchStartEventObject.originalEvent);
      if (isTouchEvent && !hasTouchStartEvent) {
        return $target;
      }
      var directionY = this._getScrollDirection(event);
      if (directionY === 'none') {
        return this.$body;
      }
      var parents = $target.parents();
      for (var i = 0, l = parents.length; i < l; i++) {
        var $parent = $(parents[i]);
        if ($parent.is('body')) {
          return this.$body;
        }
        if (!this._isScrollable($parent)) {
          continue;
        }
        if (!this._isScrolling($parent, directionY)) {
          continue;
        }
        return $parent;
      }
      return this.$body;
    },

    /**
     * Returns true if the specified target is scrollable.
     *
     * @param {Object} $target jQuery element object.
     * @returns {boolean}
     */
    _isScrollable: function($target) {
      var scrollType = $target.css('overflow-y');
      if (scrollType !== 'auto' && scrollType !== 'scroll') {
        return false;
      }
      var pointerEvents = $target.css('pointer-events');
      if (pointerEvents === 'none') {
        return false;
      }
      return true;
    },

    /**
     * Returns true if the specified target is the scrolling target.
     *
     * @param {Object} $target jQuery element object.
     * @param {string} directionY 'none' | 'up' | 'down'
     *
     * @returns {boolean}
     */
    _isScrolling: function($target, directionY) {
      var scrollTop = Math.ceil($target.scrollTop());
      var innerHeight = $target.outerHeight();
      var scrollHeight = $target[0].scrollHeight;
      var hasScrollingSpace = false;
      switch (directionY) {
        case 'down':
          hasScrollingSpace = scrollTop + innerHeight < scrollHeight;
          if (hasScrollingSpace) {
            return true;
          }
          break;
        case 'up':
          hasScrollingSpace = scrollTop > 0;
          if (hasScrollingSpace) {
            return true;
          }
          break;
      }
      return false;
    },

    /**
     * Returns the vertical direction of scroll.
     *
     * @param {JQuery.Event} event
     * @returns {string} 'none' | 'up' | 'down'
     */
    _getScrollDirection: function(event) {
      var deltaY = this._getScrollDelta(event);
      if (deltaY === 0) {
        return 'none';
      }
      return deltaY > 0 ? 'up' : 'down';
    },

    /**
     * Returns the number of pixels which is intended to be scrolled.
     *
     * @param {JQuery.Event} event
     * @returns {number}
     */
    _getScrollDelta: function(event) {
      var deltaY = 0;
      var isTouchEvent = event.type == 'touchmove';
      var originalEvent = event.originalEvent;
      if (isTouchEvent) {
        // Touch events
        // iOS previous + current scroll pos
        var startOriginalEvent = this._touchStartEventObject.originalEvent;
        var currentY = originalEvent.pageY;
        var previousY = startOriginalEvent.pageY;
        if (currentY === 0 || currentY == previousY) {
          // Android chrome current scroll pos
          currentY = originalEvent.touches[0].pageY;
          previousY = startOriginalEvent.touches[0].pageY;
        }
        // Touch: delta calculated from touchstart pos vs touchmove pos
        deltaY = currentY - previousY;
      } else {
        // Mouse events
        var hasDeltaY = (originalEvent.wheelDeltaY || originalEvent.deltaY !== undefined);
        if (hasDeltaY) {
          // Desktop: Firefox & IE delta inverted
          deltaY = -originalEvent.deltaY;
        } else {
          // Desktop: Chrome & Safari wheel delta
          deltaY = (originalEvent.wheelDelta || 0);
        }
      }
      return deltaY;
    },

    /**
     * Stop listening for events to block.
     */
    _stop: function() {
      if (!this._isRunning) {
        return;
      }
      this._isRunning = false;
      window.removeEventListener('touchstart', this._onTouchStart); // mobile
      window.removeEventListener('touchend', this._onTouchEnd); // mobile
      // shouldn't need to supply 3rd arg when removing, but IE11 won't remove the event listener if you don't - see https://github.com/adaptlearning/adapt_framework/issues/2466
      window.removeEventListener('touchmove', this._onScrollEvent, { passive: false }); // mobile
      window.removeEventListener('wheel', this._onScrollEvent, { passive: false });
      document.removeEventListener('wheel', this._onScrollEvent, { passive: false });
      document.removeEventListener('keydown', this._onKeyDown);
    }

  });

  return Scroll;

});

define('core/js/a11y/wrapFocus',[
  'core/js/adapt'
], function(Adapt) {

  /**
   * Controller for managing tab wrapping for popups.
   * @class
   */
  var WrapFocus = Backbone.Controller.extend({

    initialize: function() {
      _.bindAll(this, '_onWrapAround');
      this.listenTo(Adapt, {
        'accessibility:ready': this._attachEventListeners
      });
    },

    _attachEventListeners: function() {
      var config = Adapt.a11y.config;
      $('body').on('click focus', config._options._focusguard, this._onWrapAround);
    },

    /**
     * If click or focus is received on any element with the focusguard class,
     * loop focus around to the top of the document.
     *
     * @param {JQuery.Event} event
     */
    _onWrapAround: function(event) {
      var config = Adapt.a11y.config;
      if (!config._isEnabled || !config._options._isPopupWrapFocusEnabled) {
        return;
      }
      event.preventDefault();
      event.stopPropagation();
      Adapt.a11y.focusFirst('body', { defer: false });
    }

  });

  return WrapFocus;

});

define('core/js/a11y/popup',[
  'core/js/adapt'
], function(Adapt) {

  /**
   * Tabindex and aria-hidden manager for popups.
   * @class
   */
  var Popup = Backbone.Controller.extend({

    /**
     * List of elements which form the base at which elements are generally tabbale
     * and aria-hidden='false'.
     *
     * @type {Array<Object>}
     */
    _floorStack: [$('body')],
    /**
     * List of elements to return the focus to once leaving each stack.
     *
     * @type {Array<Object>}
     */
    _focusStack: [],
    /**
     * Hash of tabindex states for each tabbable element in the popup stack.
     *
     * @type {Object}
     */
    _tabIndexes: {},
    /**
     * Hash of aria-hidden states for each tabbable element in the popup stack.
     *
     * @type {Object}
     */
    _ariaHiddens: {},
    /**
     * Incremented unique ids for elements belonging to a popup stack with saved
     * states,
     */
    _elementUIDIndex: 0,

    initialize: function() {
      this.listenTo(Adapt, {
        'popup:opened': function($element, ignoreInternalTrigger) {
          if (ignoreInternalTrigger) {
            return;
          }
          Adapt.a11y.log.deprecated('Adapt.trigger("popup:opened", $element) is replaced with Adapt.a11y.popupOpened($element);');
          this.opened($element, true);
        },
        'popup:closed': function($target, ignoreInternalTrigger) {
          if (ignoreInternalTrigger) {
            return;
          }
          Adapt.a11y.log.deprecated('Adapt.trigger("popup:closed", $target) is replaced with Adapt.a11y.popupClosed($target);');
          this.closed($target, true);
        }
      });
    },

    /**
     * Reorganise the tabindex and aria-hidden attributes in the document to
     * restrict user interaction to the element specified.
     *
     * @param {Object} [$popupElement] Element encapulating the popup.
     * @returns {Object} Returns `Adapt.a11y._popup`.
     */
    opened: function($popupElement, silent) {
      // Capture currently active element or element specified
      $popupElement = $popupElement || $(document.activeElement);
      this._addPopupLayer($popupElement);
      if (!silent) {
        Adapt.trigger('popup:opened', $popupElement, true);
      }
      return this;
    },

    /**
     * Restrict tabbing and screen reader access to selected element only.
     *
     * @param {Object} $popupElement Element encapulating the popup.
     */
    _addPopupLayer: function($popupElement) {
      $popupElement = $($popupElement);
      var config = Adapt.a11y.config;
      if (!config._isEnabled || !config._options._isPopupManagementEnabled || $popupElement.length === 0) {
        return $popupElement;
      }
      this._floorStack.push($popupElement);
      this._focusStack.push($(document.activeElement));
      var $elements = $(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes);
      var $branch = $popupElement.add($popupElement.parents());
      var $siblings = $branch.siblings().filter(config._options._tabbableElementsExcludes);
      $elements = $elements.add($siblings);
      $elements.each(function(index, item) {
        var $item = $(item);
        var elementUID;
        if (item.a11y_uid == undefined) {
          item.a11y_uid = 'UID' + ++this._elementUIDIndex;
        }
        elementUID = item.a11y_uid;
        if (this._tabIndexes[elementUID] === undefined) {
          this._tabIndexes[elementUID] = [];
        }
        if (this._ariaHiddens[elementUID] === undefined) {
          this._ariaHiddens[elementUID] = [];
        }
        var tabindex = $item.attr('tabindex');
        var ariaHidden = $item.attr('aria-hidden');
        this._tabIndexes[elementUID].push( tabindex === undefined ? '' : tabindex );
        this._ariaHiddens[elementUID].push( ariaHidden === undefined ? '' : ariaHidden);
        if (config._options._isPopupTabIndexManagementEnabled) {
          $item.attr('tabindex', -1);
        }
        if (config._options._isPopupAriaHiddenManagementEnabled) {
          $item.attr('aria-hidden', true);
        }
      }.bind(this));
      var $items = $popupElement.find(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes);
      if (config._options._isPopupTabIndexManagementEnabled) {
        $items.attr('tabindex', 0);
      }
      if (config._options._isPopupAriaHiddenManagementEnabled) {
        $items
          .removeAttr('aria-hidden')
          .removeClass('aria-hidden')
          .parents(config._options._ariaHiddenExcludes)
          .removeAttr('aria-hidden')
          .removeClass('aria-hidden');
      }
    },

    /**
     * Close the last popup on the stack, restoring tabindex and aria-hidden
     * attributes.
     *
     * @param {Object} [$focusElement] Element at which to move focus.
     * @returns {Object} Returns `Adapt.a11y._popup`.
     */
    closed: function($focusElement, silent) {
      var $previousFocusElement = this._removeLastPopupLayer();
      $focusElement = $focusElement || $previousFocusElement || $('body');
      if (!silent) {
        Adapt.trigger('popup:closed', $focusElement, true);
      }
      Adapt.a11y.focusFirst($($focusElement));
      return this;
    },

    /**
     * Restores tabbing and screen reader access to the state before the last
     * `_addPopupLayer` call.
     *
     * @returns {Object} Returns previously active element.
     */
    _removeLastPopupLayer: function() {
      var config = Adapt.a11y.config;
      if (!config._isEnabled || !config._options._isPopupManagementEnabled) {
        return $(document.activeElement);
      }
      // the body layer is the first element and must always exist
      if (this._floorStack.length <= 1) {
        return;
      }
      this._floorStack.pop();
      $(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes).each(function(index, item) {
        var $item = $(item);
        var previousTabIndex = '';
        var previousAriaHidden = '';
        var elementUID;
        if (item.a11y_uid == undefined) {
          //assign element a unique id
          item.a11y_uid = 'UID' + ++this._elementUIDIndex;
        }
        elementUID = item.a11y_uid;
        if (this._tabIndexes[elementUID] !== undefined && this._tabIndexes[elementUID].length !== 0) {
          //get previous tabindex if saved
          previousTabIndex = this._tabIndexes[elementUID].pop();
          previousAriaHidden = this._ariaHiddens[elementUID].pop();
        }
        if (this._tabIndexes[elementUID] !== undefined && this._tabIndexes[elementUID].length === 0) {
          //delete element tabindex store if empty
          delete this._tabIndexes[elementUID];
          delete this._ariaHiddens[elementUID];
        }
        if (config._options._isPopupTabIndexManagementEnabled) {
          if (previousTabIndex === '') {
            $item.removeAttr('tabindex');
          } else {
            $item.attr({
              'tabindex': previousTabIndex
            });
          }
        }
        if (config._options._isPopupAriaHiddenManagementEnabled) {
          if (previousAriaHidden === '') {
            $item.removeAttr('aria-hidden');
          } else {
            $item.attr({
              'aria-hidden': previousAriaHidden
            });
          }
        }
      }.bind(this));
      return (document.activeElement = this._focusStack.pop());
    },

    /**
     * When a popup is open, this function makes it possible to swap the element
     * that should receive focus on popup close.
     *
     * @param {Object} $focusElement Set a new element to focus on.
     * @returns {Object} Returns previously set focus element.
     */
    setCloseTo: function($focusElement) {
      var $original = this._focusStack.pop();
      this._focusStack.push($focusElement);
      return $original;
    }

  });

  return Popup;

});

define('core/js/a11y/deprecated',[
  'core/js/adapt'
], function(Adapt) {

  /**
   * The old API is rerouted to the new API with warnings.
   */

  _.extend($.fn, {

    isFixedPostion: function() {
      Adapt.a11y.log.removed('$("..").isFixedPostion was unneeded and has been removed, let us know if you need it back.');
      return false;
    },

    a11y_aria_label: function() {
      Adapt.a11y.log.removed('$("..").a11y_aria_label was incorrect behaviour.');
      return this;
    },

    limitedScrollTo: function() {
      Adapt.a11y.log.removed('$.limitedScrollTo had no impact on the screen reader cursor.');
      return this;
    },

    a11y_text: function() {
      Adapt.a11y.log.removed('a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/');
      return this;
    },

    a11y_selected: function() {
      Adapt.a11y.log.removed('$("..").a11y_selected is removed. Please use aria-live instead.');
      return this;
    },

    a11y_on: function(isOn) {
      Adapt.a11y.log.deprecated('$("..").a11y_on, use Adapt.a11y.findTabbable($element); and Adapt.a11y.toggleAccessible($elements, isAccessible); instead.');
      var $tabbable = Adapt.a11y.findTabbable(this);
      Adapt.a11y.toggleAccessible($tabbable, isOn);
      return this;
    },

    a11y_only: function() {
      Adapt.a11y.log.removed('$("..").a11y_only, use Adapt.a11y.popupOpened($popupElement); instead.');
      return this;
    },

    scrollDisable: function() {
      if (Adapt.a11y.config._options._isScrollDisableEnabled === false) {
        return this;
      }
      Adapt.a11y.log.deprecated('$("..").scrollDisable, use Adapt.a11y.scrollDisable($elements); instead.');
      Adapt.a11y.scrollDisable(this);
      return this;
    },

    scrollEnable: function() {
      if (Adapt.a11y.config._options._isScrollDisableEnabled === false) {
        return this;
      }
      Adapt.a11y.log.deprecated('$("..").scrollEnable, use Adapt.a11y.scrollEnable($elements); instead.');
      Adapt.a11y.scrollEnable(this);
      return this;
    },

    a11y_popup: function() {
      Adapt.a11y.log.deprecated('$("..").a11y_popup, use Adapt.a11y.popupOpened($popupElement); instead.');
      return Adapt.a11y.popupOpened(this);
    },

    a11y_cntrl: function(isOn, withDisabled) {
      Adapt.a11y.log.deprecated('$("..").a11y_cntrl, use Adapt.a11y.toggleAccessible($elements, isAccessible); and if needed Adapt.a11y.toggleEnabled($elements, isEnabled); instead.');
      Adapt.a11y.toggleAccessible(this, isOn);
      if (withDisabled) Adapt.a11y.toggleEnabled(this, isOn);
      return this;
    },

    a11y_cntrl_enabled: function(isOn) {
      Adapt.a11y.log.deprecated('$("..").a11y_cntrl_enabled, use Adapt.a11y.toggleAccessibleEnabled($elements, isAccessibleEnabled); instead.');
      Adapt.a11y.toggleAccessibleEnabled(this, isOn);
      return this;
    },

    isReadable: function() {
      Adapt.a11y.log.deprecated('$("..").isReadable, use Adapt.a11y.isReadable($element); instead.');
      return Adapt.a11y.isReadable(this);
    },

    findForward: function(selector) {
      Adapt.a11y.log.removed('$("..").findForward has been removed as the use cases are very small, let us know if you need it back.');
      return Adapt.a11y._findFirstForward(this, selector);
    },

    findWalk: function(selector) {
      Adapt.a11y.log.removed('$("..").findWalk has been removed as the use cases are very small, let us know if you need it back.');
      return Adapt.a11y._findFindForwardDescendant(this, selector);
    },

    focusNoScroll: function() {
      Adapt.a11y.log.deprecated('$("..").focusNoScroll, use Adapt.a11y.focus($element); instead.');
      return Adapt.a11y.focus(this);
    },

    focusNext: function(returnOnly) {
      Adapt.a11y.log.deprecated('$("..").focusNext, use Adapt.a11y.focusNext($element); or if needed Adapt.a11y.findFirstReadable($element); instead.');
      if (returnOnly) {
        return Adapt.a11y.findFirstReadable(this);
      }
      return Adapt.a11y.focusNext(this);
    },

    focusOrNext: function(returnOnly) {
      Adapt.a11y.log.deprecated('$("..").focusOrNext, use Adapt.a11y.focusFirst($element); or if needed Adapt.a11y.findFirstReadable($element); or Adapt.a11y.isReadable($element); instead.');
      if (returnOnly) {
        if (Adapt.a11y.isReadable(this)) return this;
        return Adapt.a11y.findFirstReadable(this);
      }
      return Adapt.a11y.focusFirst(this);
    },

    a11y_focus: function(dontDefer) {
      Adapt.a11y.log.deprecated('$("..").a11y_focus, use Adapt.a11y.focusFirst($element, { defer: true }); instead.');
      Adapt.a11y.focusFirst(this, { defer: !dontDefer });
      return this;
    }

  });

  _.extend($, {

    a11y_alert: function() {
      Adapt.a11y.log.removed('$.a11y_alert is removed. Please use aria-live instead.');
      return this;
    },

    a11y_update: function() {
      Adapt.a11y.log.removed('a11y_update is no longer required.');
      return this;
    },

    a11y_text: function (text) {
      Adapt.a11y.log.removed('a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/');
      return text;
    },

    a11y_on: function(isOn, selector) {
      Adapt.a11y.log.deprecated('$("..").a11y_on, use Adapt.a11y.toggleHidden($elements, isHidden); instead.');
      return Adapt.a11y.toggleHidden(selector, !isOn);
    },

    a11y_popdown: function($focusTarget) {
      Adapt.a11y.log.removed('$.a11y_popdown, use Adapt.a11y.popupClosed($focusTarget); instead.');
      return Adapt.a11y.popupClosed($focusTarget);
    },

    a11y_focus: function(dontDefer) {
      Adapt.a11y.log.deprecated('$.a11y_focus, use Adapt.a11y.focusFirst("body", { defer: true }); instead.');
      Adapt.a11y.focusFirst('body', { defer: !dontDefer });
      return this;
    },

    a11y_normalize: function(html) {
      Adapt.a11y.log.deprecated('$.a11y_normalize, use Adapt.a11y.normalize("html"); instead.');
      return Adapt.a11y.normalize(html);
    },

    a11y_remove_breaks: function(html) {
      Adapt.a11y.log.deprecated('$.a11y_remove_breaks, use Adapt.a11y.removeBreaks("html"); instead.');
      return Adapt.a11y.removeBreaks(html);
    }

  });

});

define('core/js/a11y',[
  'core/js/adapt',
  './a11y/browserFocus',
  './a11y/focusOptions',
  './a11y/keyboardFocusOutline',
  './a11y/log',
  './a11y/scroll',
  './a11y/wrapFocus',
  './a11y/popup',
  './a11y/deprecated'
], function(Adapt, BrowserFocus, FocusOptions, KeyboardFocusOutline, Log, Scroll, WrapFocus, Popup) {

  var A11y = Backbone.Controller.extend({

    $html: $('html'),
    _htmlCharRegex: /&.*;/g,

    config: null,
    defaults: {

      _isFocusOutlineKeyboardOnlyEnabled: true,
      /**
       * `_isFocusOutlineDisabled` ignores `_isEnabled` and can be used when all other
       * accessibility features have been disabled.
       */
      _isFocusOutlineDisabled: false,
      _isFocusAssignmentEnabled: true,
      _isFocusOnClickEnabled: true,
      _isFocusNextOnDisabled: true,
      _isScrollDisableEnabled: true,
      _isAriaHiddenManagementEnabled: true,
      _isPopupManagementEnabled: true,
      _isPopupWrapFocusEnabled: true,
      _isPopupAriaHiddenManagementEnabled: true,
      _isPopupTabIndexManagementEnabled: true,
      /**
       * Do not change aria-hidden on these elements.
       */
      _ariaHiddenExcludes: ':not(#wrapper):not(body)',
      _tabbableElements: 'a,button,input,select,textarea,[tabindex]:not([data-a11y-force-focus])',
      _focusOutlineKeyboardOnlyIgnore: 'input,textarea',
      /**
       * Designate these elements as not tabbable.
       */
      _tabbableElementsExcludes: ':not(.a11y-ignore):not([data-a11y-force-focus])',
      _focusableElements: 'a,button,input,select,textarea,[tabindex],label',
      _readableElements: '[role=heading],[aria-label],[aria-labelledby],[alt]',
      /**
       * Selector for elements which cause tab wrapping.
       */
      _focusguard: '.a11y-focusguard',
      /**
       * Specifies all stylistic elements.
       */
      _wrapStyleElements: 'b,i,abbr,strong,em,small,sub,sup,ins,del,mark,zw,nb',

      /**
       * Logging settings
       */
      _warnFirstOnly: true,
      _warn: true

    },

    _browserFocus: new BrowserFocus(),
    _keyboardFocusOutline: new KeyboardFocusOutline(),
    _wrapFocus: new WrapFocus(),
    _popup: new Popup(),
    _scroll: new Scroll(),

    log: new Log(),

    initialize: function() {
      this._removeLegacyElements();
      this.listenToOnce(Adapt, {
        'app:dataLoaded': this._onDataLoaded,
        'navigationView:postRender': this._removeLegacyElements
      }, this);
      Adapt.on('device:changed', this._setupNoSelect);
      this.listenTo(Adapt, {
        'router:location': this._onNavigationStart,
        'pageView:ready menuView:ready router:plugin': this._onNavigationEnd
      });
    },

    _onDataLoaded: function() {
      this.config = Adapt.config.get('_accessibility');
      this.config._isActive = false;
      this.config._options = _.defaults(this.config._options || {}, this.defaults);
      Adapt.offlineStorage.set('a11y', false);
      this.$html.toggleClass('has-accessibility', this.isEnabled());
      this._setupNoSelect();
      this._addFocuserDiv();
      if (this._isReady) {
        return;
      }
      this._isReady = true;
      Adapt.trigger('accessibility:ready');
    },

    _setupNoSelect: function() {
      if (!this.config || !this.config._disableTextSelectOnClasses) {
        return;
      }
      var classes = this.config._disableTextSelectOnClasses.split(' ');
      var isMatch = false;
      for (var i = 0, item; item = classes[i++];) {
        if (this.$html.is(item)) {
          isMatch = true;
          break;
        }
      }
      this.$html.toggleClass('u-no-select', isMatch);
    },

    _addFocuserDiv: function() {
      if ($('#a11y-focuser').length) {
        return;
      }
      $('body').append($('<div id="a11y-focuser" class="a11y-ignore" tabindex="-1" role="presentation">&nbsp;</div>'));
    },

    _removeLegacyElements: function() {
      var $legacyElements = $('body').children('#accessibility-toggle, #accessibility-instructions');
      var $navigationElements = $('.nav').find('#accessibility-toggle, #accessibility-instructions');
      if (!$legacyElements.length && !$navigationElements.length) {
        return;
      }
      Adapt.log.warn('REMOVED: #accessibility-toggle and #accessibility-instructions have been removed. Please remove them from all of your .html files.');
      $legacyElements.remove();
      $navigationElements.remove();
    },

    _onNavigationStart: function() {
      if (!this.isEnabled()) {
        return;
      }
      // Stop document reading
      _.defer(function() {
        Adapt.a11y.toggleHidden('.page, .menu', true);
      });
    },

    _onNavigationEnd: function(view) {
      // Prevent sub-menu items provoking behaviour
      if ((view && view.model && view.model.get('_id') !== Adapt.location._currentId) || !this.isEnabled())  {
        return;
      }
      // Allow document to be read
      Adapt.a11y.toggleHidden('.page, .menu', false);
    },

    isActive: function() {
      this.log.removed('Accessibility is now always active when enabled. Please unify your user experiences.');
      return false;
    },

    isEnabled: function() {
      return this.config && this.config._isEnabled;
    },

    /**
     * Adds or removes `aria-hidden` attribute to elements.
     *
     * @param {Object|string|Array} $elements
     * @param {boolean} [isHidden=true]
     * @returns {Object} Returns `Adapt.a11y`
     */
    toggleHidden: function($elements, isHidden) {
      $elements = $($elements);
      var config = Adapt.a11y.config;
      if (!config._isEnabled || !config._options._isAriaHiddenManagementEnabled) {
        return this;
      }
      isHidden = isHidden === undefined ? true : isHidden;
      if (isHidden === true) {
        $elements.attr('aria-hidden', true);
      } else {
        $elements.removeAttr('aria-hidden');
      }
      return this;
    },

    /**
     * Adds or removes `aria-hidden` and `disabled` attributes and `disabled`
     * classes to elements.
     *
     * @param {Object|string|Array} $elements
     * @param {boolean} [isHidden=true]
     * @returns {Object} Returns `Adapt.a11y`
     */
    toggleAccessibleEnabled: function($elements, isAccessibleEnabled) {
      this.toggleAccessible($elements, isAccessibleEnabled);
      this.toggleEnabled($elements, isAccessibleEnabled);
      return this;
    },

    /**
     * Adds or removes `aria-hidden` attribute and disables `tabindex` on elements.
     *
     * @param {Object|string|Array} $elements
     * @param {boolean} [isReadable=true]
     * @returns {Object} Returns `Adapt.a11y`
     */
    toggleAccessible: function($elements, isReadable) {
      $elements = $($elements);
      var config = Adapt.a11y.config;
      if (!config._isEnabled || !config._options._isAriaHiddenManagementEnabled || $elements.length === 0) {
        return this;
      }
      isReadable = isReadable === undefined ? true : isReadable;
      if (!isReadable) {
        $elements.attr({
          tabindex: '-1',
          'aria-hidden': 'true'
        }).addClass('aria-hidden');
      } else {
        $elements.removeAttr('aria-hidden tabindex').removeClass('aria-hidden');
        $elements.parents(config._options._ariaHiddenExcludes).removeAttr('aria-hidden').removeClass('aria-hidden');
      }
      return this;
    },

    /**
     * Adds or removes `disabled` attribute and `disabled` class.
     *
     * @param {Object|string|Array} $elements
     * @param {boolean} [isEnabled=true]
     * @returns {Object} Returns `Adapt.a11y`
     */
    toggleEnabled: function($elements, isEnabled) {
      $elements = $($elements);
      if ($elements.length === 0) {
        return this;
      }
      isEnabled = isEnabled === undefined ? true : isEnabled;
      if (!isEnabled) {
        $elements.attr('disabled','disabled').addClass('is-disabled');
      } else {
        $elements.removeAttr('disabled').removeClass('is-disabled');
      }
      return this;
    },

    /**
     * Find the first tabbable element after the specified element.
     *
     * @param {Object|string|Array} $element
     * @returns {Object}
     */
    findFirstTabbable: function($element) {
      $element = $($element).first();
      return this._findFirstForward($element, this.isTabbable);
    },

    /**
     * Find the first readable element after the specified element.
     *
     * @param {Object|string|Array} $element
     * @returns {Object}
     */
    findFirstReadable: function($element) {
      $element = $($element).first();
      return this._findFirstForward($element, this.isReadable);
    },

    /**
     * Find all tabbable elements in the specified element.
     *
     * @param {Object|string|Array} $element
     * @returns {Object}
     */
    findTabbable: function($element) {
      var config = Adapt.a11y.config;
      return $($element).find(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes);
    },

    /**
     * Find all readable elements in the specified element.
     *
     * @param {Object|string|Array} $element
     */
    findReadable: function($element) {
      var config = Adapt.a11y.config;
      return $($element).find('*').filter(function(index, element) {
        return this.isReadable(element);
      }.bind(this));
    },

    /**
     * Check if the element is natively or explicitly tabbable.
     *
     * @param {Object|string|Array} $element
     * @returns {boolean|undefined}
     */
    isTabbable: function($element) {
      var config = Adapt.a11y.config;
      var value = $($element).is(config._options._tabbableElements).is(config._options._tabbableElementsExcludes);
      if (!value) {
        return undefined; // Allow _findForward to descend
      }
      return value;
    },

    /**
     * Check if the first item is readable by a screen reader.
     *
     * @param {Object|string|Array} $element
     * @param {boolean} [checkParents=true] Check if parents are inaccessible.
     * @returns {boolean}
     */
    isReadable: function($element, checkParents) {
      var config = Adapt.a11y.config;
      $element = $($element).first();
      checkParents = checkParents === undefined ? true : false;

      var $branch =  checkParents
        ? $element.add($element.parents())
        : $element;

      var isNotVisible = _.find($branch.toArray(), function(item) {
        var $item = $(item);
        // make sure item is not explicitly invisible
        var isNotVisible = $item.css('display') === 'none'
          || $item.css('visibility') === 'hidden'
          || $item.attr('aria-hidden') === 'true';
        if (isNotVisible) {
          return true;
        }
      });
      if (isNotVisible) {
        return false;
      }

      // check that the component is natively tabbable or
      // will be knowingly read by a screen reader
      var hasNativeFocusOrIsScreenReadable = $element.is(config._options._focusableElements)
        || $element.is(config._options._readableElements);
      if (hasNativeFocusOrIsScreenReadable) {
        return true;
      }
      var childNodes = $element[0].childNodes;
      for (var c = 0, cl = childNodes.length; c < cl; c++) {
        var childNode = childNodes[c];
        var isTextNode = (childNode.nodeType === 3);
        if (!isTextNode) {
          continue;
        }
        var isOnlyWhiteSpace = /^\s*$/.test(childNode.nodeValue);
        if (isOnlyWhiteSpace) {
          continue;
        }
        return true;
      }
      return undefined; // Allows _findForward to decend.
    },

    /**
     * Find forward in the DOM, descending and ascending to move forward
     * as appropriate.
     *
     * If the selector is a function it should returns true, false or undefined.
     * Returning true matches the item and returns it. Returning false means do
     * not match or descend into this item, returning undefined means do not match,
     * but descend into this item.
     *
     * @param {Object|string|Array} $element
     * @param {string|function|undefined} selector
     * @returns {Object} Returns found descendant.
     */
    _findFirstForward: function($element, selector) {
      $element = $($element).first();

      // make sure iterator is correct, use boolean or selector comparison
      // appropriately
      var iterator;
      switch (typeof selector) {
        case 'string':
          // make selector iterator
          iterator = function($tag) {
            return $tag.is(selector) || undefined;
          };
          break;
        case 'function':
          iterator = selector;
          break;
        case 'undefined':
          // find first next element
          iterator = Boolean;
      }

      if ($element.length === 0) {
        return $element.not('*');
      }

      // check children by walking the tree
      var $found = this._findFirstForwardDescendant($element, iterator);
      if ($found && $found.length) {
        return $found;
      }

      // check subsequent siblings
      var $nextSiblings = $element.nextAll().toArray();
      _.find($nextSiblings, function(sibling) {
        var $sibling = $(sibling);
        var value = iterator($sibling);

        // skip this sibling if explicitly instructed
        if (value === false) {
          return;
        }

        if (value) {
          // sibling matched
          $found = $sibling;
          return true;
        }

        // check parent sibling children by walking the tree
        $found = this._findFirstForwardDescendant($sibling, iterator);
        if ($found && $found.length) return true;
      }.bind(this));
      if ($found && $found.length) {
        return $found;
      }

      // move through parents towards the body element
      var $branch = $element.add($element.parents()).toArray().reverse();
      _.find($branch, function(parent) {
        var $parent = $(parent);
        if (iterator($parent) === false) {
          // skip this parent if explicitly instructed
          return false;
        }

        // move through parents nextAll siblings
        var $siblings = $parent.nextAll().toArray();
        return _.find($siblings, function(sibling) {
          var $sibling = $(sibling);
          var value = iterator($sibling);

          // skip this sibling if explicitly instructed
          if (value === false) {
            return;
          }

          if (value) {
            // sibling matched
            $found = $sibling;
            return true;
          }

          // check parent sibling children by walking the tree
          $found = this._findFirstForwardDescendant($sibling, iterator);
          if ($found && $found.length) {
            return true;
          }
        }.bind(this));
      }.bind(this));

      if (!$found || !$found.length) {
        return $element.not('*');
      }
      return $found;
    },

    /**
     * Find descendant in a DOM tree, work from selected to branch-end, through allowed
     * branch structures in hierarchy order
     *
     * If the selector is a function it should returns true, false or undefined.
     * Returning true matches the item and returns it. Returning false means do
     * not match or descend into this item, returning undefined means do not match,
     * but descend into this item.
     *
     * @param {Object|string|Array} $element jQuery element to start from.
     * @param {string|function|undefined} selector
     * @returns {Object} Returns found descendant.
     */
    _findFirstForwardDescendant: function($element, selector) {
      $element = $($element).first();

      // make sure iterator is correct, use boolean or selector comparison
      // appropriately
      var iterator;
      switch (typeof selector) {
        case 'string':
          // make selector iterator
          iterator = function($tag) {
            return $tag.is(selector) || undefined;
          };
          break;
        case 'function':
          iterator = selector;
          break;
        case 'undefined':
          // find first next element
          iterator = Boolean;
      }


      var $notFound = $element.not('*');
      if ($element.length === 0) {
        return $notFound;
      }

      // keep walked+passed children in a stack
      var stack = [{
        item: $element[0],
        value: undefined
      }];
      var stackIndexPosition = 0;
      var childIndexPosition = stackIndexPosition+1;
      do {

        var stackEntry = stack[stackIndexPosition];
        var $stackItem = $(stackEntry.item);

        // check current item
        switch (stackEntry.value) {
          case true:
            return $stackItem;
          case false:
            return $notFound;
        }

        // get i stack children
        var $children = $stackItem.children().toArray();
        _.find($children, function(item) {
          var $item = $(item);
          var value = iterator($item);

          // item explicitly not allowed, don't add to stack,
          // skip children
          if (value === false) {
            return false;
          }

          // item passed or readable, add to stack before any parent
          // siblings
          stack.splice(childIndexPosition++, 0, {
            item: item,
            value: value
          });
        });

        // move to next stack item
        stackIndexPosition++;
        // keep place to inject children
        childIndexPosition = stackIndexPosition+1;
      } while (stackIndexPosition < stack.length)

      return $notFound;
    },

    /**
     * Assign focus to the next readable element.
     *
     * @param {Object|string|Array} $element
     * @param {FocusOptions} options
     * @returns {Object} Returns `Adapt.a11y`
     */
    focusNext: function($element, options) {
      options = new FocusOptions(options);
      $element = $($element).first();
      $element = Adapt.a11y.findFirstReadable($element);
      this.focus($element, options);
      return this;
    },

    /**
     * Assign focus to either the specified element if it is readable or the
     * next readable element.
     *
     * @param {Object|string|Array} $element
     * @param {FocusOptions} options
     * @returns {Object} Returns `Adapt.a11y`
     */
    focusFirst: function($element, options) {
      options = new FocusOptions(options);
      $element = $($element).first();
      if (Adapt.a11y.isReadable($element)) {
        this.focus($element, options);
        return $element;
      }
      $element = Adapt.a11y.findFirstReadable($element);
      this.focus($element, options);
      return $element;
    },

    /**
     * Force focus to the specified element with/without a defer or scroll.
     *
     * @param {Object|string|Array} $element
     * @param {FocusOptions} options
     * @returns {Object} Returns `Adapt.a11y`
     */
    focus: function($element, options) {
      options = new FocusOptions(options);
      $element = $($element).first();
      var config = Adapt.a11y.config;
      if (!config._isEnabled || !config._options._isFocusAssignmentEnabled || $element.length === 0) {
        return this;
      }
      function perform() {
        if (options.preventScroll) {
          var y = $(window).scrollTop();
          try {
            if ($element.attr('tabindex') === undefined) {
              $element.attr({
                'tabindex': '-1',
                'data-a11y-force-focus': 'true'
              });
            }
            $element[0].focus({
              preventScroll: true
            });
          } catch (e) {
            // Drop focus errors as only happens when the element
            // isn't attached to the DOM.
          }
          window.scrollTo(null, y);
        } else {
          $element[0].focus();
        }
      }
      if (options.defer) {
        _.defer(function() {
          perform();
        }.bind(this));
      } else {
        perform();
      }
      return this;
    },

    /**
     * Used to convert html to text aria-labels.
     *
     * @param {string} htmls Any html strings.
     * @returns {string} Returns text without markup or html encoded characters.
     */
    normalize: function(htmls) {
      var values = Array.prototype.slice.call(arguments, 0);
      values = values.filter(Boolean);
      values = values.filter(_.isString);
      htmls = values.join(' ');
      var text = $('<div>' + htmls + '</div>').html();
      // Remove all html encoded characters, such as &apos;
      return text.replace(this._htmlCharRegex, '');
    },

    /**
     * Removes all html tags except stylistic elements.
     * Useful for producing uninterrupted text for screen readers from
     * any html.
     *
     * @param  {string} htmls Any html strings.
     * @return {string} Returns html string without markup which would cause screen reader to pause.
     */
    removeBreaks: function(htmls) {
      var values = Array.prototype.slice.call(arguments, 0);
      values = values.filter(Boolean);
      values = values.filter(_.isString);
      htmls = values.join(' ');
      var $div = $('<div>' + htmls + '</div>');
      var stack = [ $div[0] ];
      var stackIndex = 0;
      var outputs = [];
      do {
        if (stack[stackIndex].childNodes.length) {
          var nodes = stack[stackIndex].childNodes;
          var usable = _.filter(nodes, function(node) {
            var isTextNode = (node.nodeType === 3);
            if (isTextNode) {
              return true;
            }
            var isStyleElement = $(node).is(Adapt.a11y.config._options._wrapStyleElements);
            if (isStyleElement) {
              return true;
            }
            return false;
          });
          outputs.push.apply(outputs, usable);
          stack.push.apply(stack, nodes);
        }
        stackIndex++;
      } while (stackIndex < stack.length)
      var rtnText = '';
      outputs.forEach(function(item) {
        rtnText+=item.outerHTML||item.textContent;
      });
      return rtnText;
    },

    /**
     * @param {Object|string|Array} $elements
     * @returns {Object} Returns `Adapt.a11y`
     */
    scrollEnable: function($elements) {
      this._scroll.enable($elements);
      return this;
    },

    /**
     * @param {Object|string|Array} $elements
     * @returns {Object} Returns `Adapt.a11y`
     */
    scrollDisable: function($elements) {
      this._scroll.disable($elements);
      return this;
    },

    /**
     * To apply accessibilty handling to a tag, isolating the user.
     *
     * @param {Object} $popupElement Element encapsulating the popup.
     * @returns {Object} Returns `Adapt.a11y`
     */
    popupOpened: function($popupElement) {
      this._popup.opened($popupElement);
      return this;
    },

    /**
     * Remove the isolation applied with a call to `popupOpened`.
     *
     * @param {Object} [$focusElement] Element to move focus to.
     * @returns {Object} Returns `Adapt.a11y`
     */
    popupClosed: function($focusElement) {
      this._popup.closed($focusElement);
      return this;
    },

    /**
     * When a popup is open, this function makes it possible to swap the element
     * that should receive focus on popup close.
     *
     * @param {Object} $focusElement Set a new element to focus on.
     * @returns {Object} Returns previously set focus element.
     */
    setPopupCloseTo: function($focusElement) {
      return this._popup.setCloseTo($focusElement);
    }

  });

  return Adapt.a11y = new A11y();

});

define('core/js/accessibility',[
  'core/js/adapt',
  './a11y'
], function(Adapt, a11y) {

  /**
   * Backwards compatibility `Adapt.accessibility` reroutes to `Adapt.a11y`
   * with a warning.
   */
  Object.defineProperty(Adapt, 'accessibility', {

    get: function() {
      a11y.log.deprecated("Adapt.accessibility has moved to Adapt.a11y");
      return Adapt.accessibility = a11y;
    }

  });

});

define('core/js/collections/adaptCollection',[
  'core/js/adapt'
], function(Adapt) {

  var AdaptCollection = Backbone.Collection.extend({
    initialize : function(models, options){
      this.url = options.url;

      this.once('reset', this.loadedData, this);
      if (this.url) {
        this.fetch({
          reset:true,
          error: _.bind(function(model, xhr, options) {
            if(this.url !== 'course/en/assets.json') {
              console.error("ERROR: unable to load file " + this.url);
            }
          }, this)
        });
      }
    },

    loadedData: function() {
      Adapt.trigger('adaptCollection:dataLoaded');
    }

  });

  return AdaptCollection;

});

define('core/js/modelEvent',[],function() {

  var ModelEvent = Backbone.Controller.extend({

    type: null,
    target: null,
    value: null,
    canBubble: true,
    deepPath: null,
    timeStamp: null,

    /**
     * @param {string} type Event name / type
     * @param {Backbone.Model} target Origin model
     * @param {*} [value] Any value that should be carried through on the event
     */
    initialize: function(type, target, value) {
      this.type = type;
      this.target = target;
      this.value = value;
      this.deepPath = [target];
    },

    stopPropagation: function() {
      this.canBubble = false;
    },

    addPath: function(target) {
      this.deepPath.unshift(target);
    }

  });

  return ModelEvent;

});

define('core/js/enums/logLevelEnum',[],function() {

  // Used to determine if log call should be printed based on log level
  var LOG_LEVEL = ENUM([
    "DEBUG",
    "INFO",
    "WARN",
    "ERROR",
    "FATAL"
  ]);

  return LOG_LEVEL;

})
;
define('core/js/logging',[
  'core/js/adapt',
  'core/js/enums/logLevelEnum'
], function(Adapt, LOG_LEVEL) {

  var Logging = Backbone.Controller.extend({

    _config: {
      _isEnabled: true,
      _level: LOG_LEVEL.INFO.asLowerCase, // Default log level
      _console: true // Log to console
    },

    initialize: function() {

      Adapt.once('configModel:dataLoaded', this.onLoadConfigData.bind(this));

    },

    onLoadConfigData: function() {

      this.loadConfig();

      this.debug('Logging config loaded');

      this.trigger('log:ready');

    },

    loadConfig: function() {

      if (Adapt.config.has('_logging')) {
        this._config = Adapt.config.get('_logging');
      }

      this.checkQueryStringOverride();

    },

    checkQueryStringOverride: function() {

      // Override default log level with level present in query string
      var matches = window.location.search.match(/[?&]loglevel=([a-z]*)/i);
      if (!matches || matches.length < 2) return;

      var override = LOG_LEVEL(matches[1].toUpperCase());
      if (!override) return;

      this._config._level = override.asLowerCase;
      this.debug('Loglevel override in query string:', this._config._level);

    },

    debug: function() {
      this._log(LOG_LEVEL.DEBUG, Array.prototype.slice.call(arguments));
    },

    info: function() {
      this._log(LOG_LEVEL.INFO, Array.prototype.slice.call(arguments));
    },

    warn: function() {
      this._log(LOG_LEVEL.WARN, Array.prototype.slice.call(arguments));
    },

    error: function() {
      this._log(LOG_LEVEL.ERROR, Array.prototype.slice.call(arguments));
    },

    fatal: function() {
      this._log(LOG_LEVEL.FATAL, Array.prototype.slice.call(arguments));
    },

    _log: function(level, data) {

      var isEnabled = (this._config._isEnabled);
      if (!isEnabled) return;

      var configLevel = LOG_LEVEL(this._config._level.toUpperCase());

      var isLogLevelAllowed = (level >= configLevel);
      if (!isLogLevelAllowed) return;

      this._logToConsole(level, data);

      // Allow error reporting plugins to hook and report to logging systems
      this.trigger('log', level, data);
      this.trigger('log:' + level.asLowerCase, level, data);

    },

    _logToConsole: function(level, data) {

      var shouldLogToConsole = (this._config._console);
      if (!shouldLogToConsole) return;

      var log = [level.asUpperCase + ':'];
      data && log.push.apply(log, data);

      // is there a matching console method we can use e.g. console.error()?
      if(console[level.asLowerCase]) {
        console[level.asLowerCase].apply(console, log);
      } else {
        console.log.apply(console, log);
      }
    }

  });

  Adapt.log = new Logging();

});

define('core/js/models/adaptModel',[
  'core/js/adapt',
  'core/js/modelEvent',
  'core/js/logging'
], function (Adapt, ModelEvent) {

  var AdaptModel = Backbone.Model.extend({

    defaults: {
      _canShowFeedback: true,
      _classes: "",
      _canReset: false,
      _isComplete: false,
      _isInteractionComplete: false,
      _isA11yRegionEnabled: false,
      _isA11yCompletionDescriptionEnabled: true,
      _requireCompletionOf: -1,
      _isEnabled: true,
      _isResetOnRevisit: false,
      _isAvailable: true,
      _isOptional: false,
      _isReady: false,
      _isVisible: true,
      _isLocked: false,
      _isHidden: false
    },

    trackable: [
      '_id',
      '_isComplete',
      '_isInteractionComplete'
    ],

    bubblingEvents: [
      'change:_isComplete',
      'change:_isInteractionComplete'
    ],

    initialize: function () {
      // Wait until data is loaded before setting up model
      this.listenToOnce(Adapt, 'app:dataLoaded', this.setupModel);

    },

    setupModel: function() {
      if (this.get('_type') === 'page') {
        this._children = 'articles';
      }
      if (this._siblings === 'contentObjects' && this.get('_parentId') !== Adapt.course.get('_id')) {
        this._parent = 'contentObjects';
      }
      if (this._children) {
        this.setupChildListeners();
      }

      this.init();

      _.defer(function() {
        if (this._children) {
          this.checkCompletionStatus();

          this.checkInteractionCompletionStatus();

          this.checkLocking();
        }

        this.setupTrackables();

      }.bind(this));

    },

    setupTrackables: function() {

      // Limit state trigger calls and make state change callbacks batched-asynchronous
      var originalTrackableStateFunction = this.triggerTrackableState;
      this.triggerTrackableState = _.compose(
        function() {

          // Flag that the function is awaiting trigger
          this.triggerTrackableState.isQueued = true;

        }.bind(this),
        _.debounce(function() {

          // Trigger original function
          originalTrackableStateFunction.apply(this);

          // Unset waiting flag
          this.triggerTrackableState.isQueued = false;

        }.bind(this), 17)
      );

      // Listen to model changes, trigger trackable state change when appropriate
      this.listenTo(this, "change", function(model, value) {

        // Skip if trigger queued or adapt hasn't started yet
        if (this.triggerTrackableState.isQueued || !Adapt.attributes._isStarted) {
          return;
        }

        // Check that property is trackable
        var trackablePropertyNames = _.result(this, 'trackable', []);
        var changedPropertyNames = _.keys(model.changed);
        var isTrackable = _.find(changedPropertyNames, function(item, index) {
          return _.contains(trackablePropertyNames, item);
        }.bind(this));

        if (isTrackable) {
          // Trigger trackable state change
          this.triggerTrackableState();
        }
      });
    },

    setupChildListeners: function() {
      var children = this.getChildren();
      if (!children.length) {
        return;
      }

      this.listenTo(children, {
        "all": this.onAll,
        "bubble": this.bubble,
        "change:_isReady": this.checkReadyStatus,
        "change:_isComplete": this.onIsComplete,
        "change:_isInteractionComplete": this.checkInteractionCompletionStatus
      });
    },

    init: function() {},

    getTrackableState: function() {

      var trackable = this.resultExtend("trackable", []);
      var json = this.toJSON();

      var args = trackable;
      args.unshift(json);

      return _.pick.apply(_, args);

    },

    setTrackableState: function(state) {

      var trackable = this.resultExtend("trackable", []);

      var args = trackable;
      args.unshift(state);

      state = _.pick.apply(_, args);

      this.set(state);

      return this;

    },

    triggerTrackableState: function() {

      Adapt.trigger("state:change", this, this.getTrackableState());

    },

    reset: function(type, force) {
      if (!this.get("_canReset") && !force) return;

      type = type || true;

      switch (type) {
      case "hard": case true:
        this.set({
          _isEnabled: true,
          _isComplete: false,
          _isInteractionComplete: false
        });
        break;
      case "soft":
        this.set({
          _isEnabled: true,
          _isInteractionComplete: false
        });
        break;
      }
    },

    checkReadyStatus: function () {
      // Filter children based upon whether they are available
      // Check if any return _isReady:false
      // If not - set this model to _isReady: true
      var children = this.getAvailableChildModels();
      if (_.find(children, function(child) { return child.get('_isReady') === false; })) {
        return;
      }

      this.set('_isReady', true);
    },

    setCompletionStatus: function() {
      if (!this.get('_isVisible')) return;

      this.set({
        _isComplete: true,
        _isInteractionComplete: true
      });
    },

    checkCompletionStatus: function () {
      //defer to allow other change:_isComplete handlers to fire before cascading to parent
      Adapt.checkingCompletion();
      _.defer(this.checkCompletionStatusFor.bind(this), '_isComplete');
    },

    checkInteractionCompletionStatus: function () {
      //defer to allow other change:_isInteractionComplete handlers to fire before cascading to parent
      Adapt.checkingCompletion();
      _.defer(this.checkCompletionStatusFor.bind(this), '_isInteractionComplete');
    },

    /**
     * Function for checking whether the supplied completion attribute should be set to true or false.
     * It iterates over our immediate children, checking the same completion attribute on any mandatory child
     * to see if enough/all of them them have been completed. If enough/all have, we set our attribute to true;
     * if not, we set it to false.
     * @param {string} [completionAttribute] Either "_isComplete" or "_isInteractionComplete". Defaults to "_isComplete" if not supplied.
     */
    checkCompletionStatusFor: function(completionAttribute) {
      if (!completionAttribute) completionAttribute = "_isComplete";

      var completed = false;
      var children = this.getAvailableChildModels();
      var requireCompletionOf = this.get("_requireCompletionOf");

      if (requireCompletionOf === -1) { // a value of -1 indicates that ALL mandatory children must be completed
        completed = (_.find(children, function(child) {
          return !child.get(completionAttribute) && !child.get('_isOptional');
        }) === undefined);
      } else {
        completed = (_.filter(children, function(child) {
          return child.get(completionAttribute) && !child.get('_isOptional');
        }).length >= requireCompletionOf);
      }

      this.set(completionAttribute, completed);

      Adapt.checkedCompletion();
    },

    /**
     * Searches the model's ancestors to find the first instance of the specified ancestor type
     * @param {string} [ancestorType] Valid values are 'course', 'pages', 'contentObjects', 'articles' or 'blocks'.
     * If left blank, the immediate ancestor (if there is one) is returned
     * @return {object} Reference to the model of the first ancestor of the specified type that's found - or `undefined` if none found
     */
    findAncestor: function (ancestorType) {
      var parent = this.getParent();
      if (!parent) return;

      if (ancestorType === 'pages') {
        ancestorType = 'contentObjects';
      }

      if (!ancestorType || this._parent === ancestorType) {
        return parent;
      }

      return parent.findAncestor(ancestorType);
    },

    /**
     * Returns all the descendant models of a specific type
     * @param {string} descendants Valid values are 'contentObjects', 'pages', 'menus', 'articles', 'blocks' or 'components'
     * @param {object} options an object that defines the search type and the properties/values to search on. Currently only the `where` search type (equivalent to `Backbone.Collection.where()`) is supported.
     * @param {object} options.where
     * @return {array}
     * @example
     * //find all available, non-optional components
     * this.findDescendantModels('components', { where: { _isAvailable: true, _isOptional: false }});
     */
    findDescendantModels: function(descendants, options) {

      var types = [
        descendants.slice(0, -1)
      ];
      if (descendants === 'contentObjects') {
        types.push.apply(types, ['page', 'menu']);
      }

      var allDescendantsModels = this.getAllDescendantModels();
      var returnedDescendants = allDescendantsModels.filter(function(model) {
        return _.contains(types, model.get("_type"));
      });

      if (!options) {
        return returnedDescendants;
      }

      if (options.where) {
        return returnedDescendants.filter(function(descendant) {
          for (var property in options.where) {
            var value = options.where[property];
            if (descendant.get(property) !== value) {
              return false;
            }
          }
          return true;
        });
      }
    },

    /**
     * Fetches the sub structure of a model as a flattened array
     *
     * Such that the tree:
     *  { a1: { b1: [ c1, c2 ], b2: [ c3, c4 ] }, a2: { b3: [ c5, c6 ] } }
     *
     * will become the array (parent first = false):
     *  [ c1, c2, b1, c3, c4, b2, a1, c5, c6, b3, a2 ]
     *
     * or (parent first = true):
     *  [ a1, b1, c1, c2, b2, c3, c4, a2, b3, c5, c6 ]
     *
     * This is useful when sequential operations are performed on the menu/page/article/block/component hierarchy.
     * @param {boolean} [isParentFirst]
     * @return {array}
     */
    getAllDescendantModels: function(isParentFirst) {

      var descendants = [];

      if (this.get("_type") === "component") {
        descendants.push(this);
        return descendants;
      }

      var children = this.getChildren();

      for (var i = 0, l = children.models.length; i < l; i++) {

        var child = children.models[i];
        if (child.get("_type") === "component") {

          descendants.push(child);
          continue;

        }

        var subDescendants = child.getAllDescendantModels(isParentFirst);
        if (isParentFirst === true) {
          descendants.push(child);
        }

        descendants = descendants.concat(subDescendants);

        if (isParentFirst !== true) {
          descendants.push(child);
        }

      }

      return descendants;

    },

    /**
     * Returns a relative model from the Adapt hierarchy
     *
     * Such that in the tree:
     *  { a1: { b1: [ c1, c2 ], b2: [ c3, c4 ] }, a2: { b3: [ c5, c6 ] } }
     *
     *  c1.findRelativeModel("@block +1") = b2;
     *  c1.findRelativeModel("@component +4") = c5;
     *
     * @see Adapt.parseRelativeString for a description of relativeStrings
     * @param {string} relativeString
     * @param {object} options Search configuration settings
     * @param {boolean} options.limitParentId
     * @param {function} options.filter
     * @param {boolean} options.loop
     * @return {array}
     */
    findRelativeModel: function(relativeString, options) {

      var types = [ "menu", "page", "article", "block", "component" ];

      options = options || {};

      var modelId = this.get("_id");
      var modelType = this.get("_type");

      // return a model relative to the specified one if opinionated
      var rootModel = Adapt.course;
      if (options.limitParentId) {
        rootModel = Adapt.findById(options.limitParentId);
      }

      var relativeDescriptor = Adapt.parseRelativeString(relativeString);

      var findAncestorType = (_.indexOf(types, modelType) > _.indexOf(types, relativeDescriptor.type));
      var findSiblingType = (modelType === relativeDescriptor.type);

      var searchBackwards = (relativeDescriptor.offset < 0);
      var moveBy = Math.abs(relativeDescriptor.offset);
      var movementCount = 0;

      var findDescendantType = (!findSiblingType && !findAncestorType);

      if (findDescendantType) {
        // move by one less as first found is considered next
        moveBy--;
      }

      var pageDescendants;
      if (searchBackwards) {
        // parents first [p1,a1,b1,c1,c2,a2,b2,c3,c4,p2,a3,b3,c6,c7,a4,b4,c8,c9]
        pageDescendants = rootModel.getAllDescendantModels(true);

        // reverse so that we don't need a forward and a backward iterating loop
        // reversed [c9,c8,b4,a4,c7,c6,b3,a3,p2,c4,c3,b2,a2,c2,c1,b1,a1,p1]
        pageDescendants.reverse();
      } else {
        // children first [c1,c2,b1,a1,c3,c4,b2,a2,p1,c6,c7,b3,a3,c8,c9,b4,a4,p2]
        pageDescendants = rootModel.getAllDescendantModels(false);
      }

      // filter if opinionated
      if (typeof options.filter === "function") {
        pageDescendants = _.filter(pageDescendants, options.filter);
      }

      // find current index in array
      var modelIndex = _.findIndex(pageDescendants, function(pageDescendant) {
        if (pageDescendant.get("_id") === modelId) {
          return true;
        }
        return false;
      });

      if (options.loop) {

        // normalize offset position to allow for overflow looping
        var typeCounts = {};
        pageDescendants.forEach(function(model) {
          var type = model.get("_type");
          typeCounts[type] = typeCounts[type] || 0;
          typeCounts[type]++;
        });
        moveBy = moveBy % typeCounts[relativeDescriptor.type];

        // double up entries to allow for overflow looping
        pageDescendants = pageDescendants.concat(pageDescendants.slice(0));

      }

      for (var i = modelIndex, l = pageDescendants.length; i < l; i++) {
        var descendant = pageDescendants[i];
        if (descendant.get("_type") === relativeDescriptor.type) {
          if (movementCount === moveBy) {
            return Adapt.findById(descendant.get("_id"));
          }
          movementCount++;
        }
      }

      return undefined;
    },

    getChildren: function () {
      if (this.get("_children")) return this.get("_children");

      var childrenCollection;

      if (!this._children) {
        childrenCollection = new Backbone.Collection();
      } else {
        var children = Adapt[this._children].where({_parentId: this.get("_id")});
        childrenCollection = new Backbone.Collection(children);
      }

      if (this.get('_type') == 'block' &&
        childrenCollection.length == 2 &&
        childrenCollection.models[0].get('_layout') !== 'left' &&
        this.get('_sortComponents') !== false) {
        // Components may have a 'left' or 'right' _layout,
        // so ensure they appear in the correct order
        // Re-order component models to correct it
        childrenCollection.comparator = '_layout';
        childrenCollection.sort();
      }

      this.set("_children", childrenCollection);

      return childrenCollection;
    },

    getAvailableChildModels: function() {
      return this.getChildren().where({
        _isAvailable: true
      });
    },

    getParent: function () {
      if (this.get("_parent")) return this.get("_parent");
      if (this._parent === "course") {
        return Adapt.course;
      }
      var parent = Adapt.findById(this.get("_parentId"));
      this.set("_parent", parent);

      // returns a parent model
      return parent;
    },

    getAncestorModels: function(shouldIncludeChild) {
      var parents = [];
      var context = this;

      if (shouldIncludeChild) parents.push(context);

      while (context.has("_parentId")) {
        context = context.getParent();
        parents.push(context);
      }

      return parents.length ? parents : null;
    },

    getSiblings: function (passSiblingsAndIncludeSelf) {
      var siblings;
      if (!passSiblingsAndIncludeSelf) {
        // returns a collection of siblings excluding self
        if (this._hasSiblingsAndSelf === false) {
          return this.get("_siblings");
        }
        siblings = _.reject(Adapt[this._siblings].where({
          _parentId: this.get('_parentId')
        }), function (model) {
          return model.get('_id') == this.get('_id');
        }.bind(this));

        this._hasSiblingsAndSelf = false;

      } else {
        // returns a collection of siblings including self
        if (this._hasSiblingsAndSelf) {
          return this.get("_siblings");
        }

        siblings = Adapt[this._siblings].where({
          _parentId: this.get("_parentId")
        });
        this._hasSiblingsAndSelf = true;
      }

      var siblingsCollection = new Backbone.Collection(siblings);
      this.set("_siblings", siblingsCollection);
      return siblingsCollection;
    },

    setOnChildren: function (key, value, options) {

      var args = arguments;

      this.set.apply(this, args);

      if (!this._children) return;

      var children = this.getChildren();
      var models = children.models;
      for (var i = 0, len = models.length; i < len; i++) {
        var child = models[i];
        child.setOnChildren.apply(child, args);
      }

    },

    /**
     * @deprecated since v3.2.3 - please use `model.set('_isOptional', value)` instead
     */
    setOptional: function(value) {
      Adapt.log.warn("DEPRECATED - Use model.set('_isOptional', value) as setOptional() may be removed in the future");
      this.set({_isOptional: value});
    },

    checkLocking: function() {
      var lockType = this.get("_lockType");

      if (!lockType) return;

      switch (lockType) {
        case "sequential":
          this.setSequentialLocking();
          break;
        case "unlockFirst":
          this.setUnlockFirstLocking();
          break;
        case "lockLast":
          this.setLockLastLocking();
          break;
        case "custom":
          this.setCustomLocking();
          break;
        default:
          console.warn("AdaptModel.checkLocking: unknown _lockType \"" +
            lockType + "\" found on " + this.get("_id"));
      }
    },

    setSequentialLocking: function() {
      var children = this.getAvailableChildModels();

      for (var i = 1, j = children.length; i < j; i++) {
        children[i].set("_isLocked", !children[i - 1].get("_isComplete"));
      }
    },

    setUnlockFirstLocking: function() {
      var children = this.getAvailableChildModels();
      var isFirstChildComplete = children[0].get("_isComplete");

      for (var i = 1, j = children.length; i < j; i++) {
        children[i].set("_isLocked", !isFirstChildComplete);
      }
    },

    setLockLastLocking: function() {
      var children = this.getAvailableChildModels();
      var lastIndex = children.length - 1;

      for (var i = lastIndex - 1; i >= 0; i--) {
        if (!children[i].get("_isComplete")) {
          return children[lastIndex].set("_isLocked", true);
        }
      }

      children[lastIndex].set("_isLocked", false);
    },

    setCustomLocking: function() {
      var children = this.getAvailableChildModels();

      for (var i = 0, j = children.length; i < j; i++) {
        var child = children[i];

        child.set("_isLocked", this.shouldLock(child));
      }
    },

    shouldLock: function(child) {
      var lockedBy = child.get("_lockedBy");

      if (!lockedBy) return false;

      for (var i = lockedBy.length - 1; i >= 0; i--) {
        var id = lockedBy[i];

        try {
          var model = Adapt.findById(id);

          if (!model.get("_isAvailable")) continue;
          if (!model.get("_isComplete")) return true;
        }
        catch (e) {
          console.warn("AdaptModel.shouldLock: unknown _lockedBy ID \"" + id +
            "\" found on " + child.get("_id"));
        }
      }

      return false;
    },

    onIsComplete: function() {
      this.checkCompletionStatus();

      this.checkLocking();
    },

    /**
     * Internal event handler for all module events. Triggers event bubbling
     * through the module hierarchy when the event is included in
     * `this.bubblingEvents`.
     * @param {string} type Event name / type
     * @param {Backbone.Model} model Origin backbone model
     * @param {*} value New property value
     */
    onAll: function(type, model, value) {
        if (!_.contains(this.bubblingEvents, type)) return;
        var event = new ModelEvent(type, model, value);
        this.bubble(event);
    },

    /**
     * Internal event handler for bubbling events.
     * @param {ModelEvent} event
     */
    bubble: function(event) {
        if (!event.canBubble) return;
        event.addPath(this);
        this.trigger("bubble:" + event.type + " bubble", event);
    }

  });

  return AdaptModel;

});

define('core/js/models/articleModel',[
  'core/js/models/adaptModel'
], function (AdaptModel) {

  var ArticleModel = AdaptModel.extend({
    _parent: 'contentObjects',
    _siblings: 'articles',
    _children: 'blocks'
  });

  return ArticleModel;

});

define('core/js/models/blockModel',[
  'core/js/models/adaptModel'
], function (AdaptModel) {

  var BlockModel = AdaptModel.extend({
    _parent: 'articles',
    _siblings: 'blocks',
    _children: 'components',

    defaults: function() {
      return _.extend({
        _sortComponents: true
      }, AdaptModel.prototype.defaults);
    }
  });

  return BlockModel;

});

define('core/js/models/configModel',[
  'core/js/adapt'
], function (Adapt) {

  var ConfigModel = Backbone.Model.extend({

    defaults: {
      screenSize: {
        large: 900,
        medium: 760,
        small: 520
      },
      _forceRouteLocking: false,
      _canLoadData: true,
      _disableAnimation: false
    },

    initialize: function(attrs, options) {
      this.url = options.url;
      // Fetch data & if successful trigger event to enable plugins to stop course files loading
      // Then check if course files can load
      // 'configModel:loadCourseData' event starts the core content collections and models being fetched
      this.fetch({
        success: function() {
          Adapt.trigger('offlineStorage:prepare');

          Adapt.wait.queue(function() {

            Adapt.trigger('configModel:dataLoaded');

            if (this.get('_canLoadData')) {
              Adapt.trigger('configModel:loadCourseData');
            }

          }.bind(this));
        }.bind(this),
        error: function() {
          console.log('Unable to load course/config.json');
        }
      });
    },

    loadData: function() {

    }

  });

  return ConfigModel;

});

define('core/js/models/contentObjectModel',[
  'core/js/models/adaptModel'
], function (AdaptModel) {

  var ContentObjectModel = AdaptModel.extend({
    _parent: 'course',
    _siblings: 'contentObjects',
    _children: 'contentObjects'
  });

  return ContentObjectModel;

});

define('core/js/models/componentModel',[
  'core/js/models/adaptModel'
], function (AdaptModel) {

  var ComponentModel = AdaptModel.extend({
    _parent: 'blocks',
    _siblings: 'components',

    defaults: AdaptModel.resultExtend('defaults', {
      _isA11yComponentDescriptionEnabled: true
    }),

    trackable: AdaptModel.resultExtend("trackable", [
      '_userAnswer'
    ])

  });

  return ComponentModel;

});

define('core/js/models/courseModel',[
  'core/js/adapt',
  'core/js/models/adaptModel'
], function (Adapt, AdaptModel) {

  var CourseModel = AdaptModel.extend({

    initialize: function(attrs, options) {
      AdaptModel.prototype.initialize.apply(this, arguments);
      Adapt.trigger('courseModel:dataLoading');

      this.url = options.url;

      this.on('sync', this.loadedData, this);
      if (this.url) {
        this.fetch({
          error: _.bind(function(model, xhr, options) {
            console.error("ERROR: unable to load file " + this.url);
          }, this)
        });
      }
    },

    loadedData: function() {
      Adapt.trigger('courseModel:dataLoaded');
    },

    _children: "contentObjects"

  });

  return CourseModel;

});

define('core/js/enums/buttonStateEnum',[],function() {

  var BUTTON_STATE = ENUM([
    'SUBMIT',
    'CORRECT',
    'INCORRECT',
    'SHOW_CORRECT_ANSWER',
    'HIDE_CORRECT_ANSWER',
    'SHOW_FEEDBACK',
    'RESET'
  ]);

  return BUTTON_STATE;

})
;
define('core/js/models/questionModel',[
  'core/js/adapt',
  'core/js/models/componentModel',
  'core/js/enums/buttonStateEnum'
], function(Adapt, ComponentModel, BUTTON_STATE) {

  var QuestionModel = ComponentModel.extend({

    //////
    // Setup question types
    ////

    // Used to set model defaults
    defaults: function() {
      // Extend from the ComponentModel defaults
      return ComponentModel.resultExtend("defaults", {
        _isQuestionType: true,
        _shouldDisplayAttempts: false,
        _canShowModelAnswer: true,
        _canShowFeedback: true,
        _canShowMarking: true,
        _isSubmitted: false,
        _questionWeight: Adapt.config.get("_questionWeight"),
        _items: [],
      });
    },

    // Extend from the ComponentModel trackable
    trackable: ComponentModel.resultExtend("trackable", [
      '_isSubmitted',
      '_score',
      '_isCorrect',
      '_attemptsLeft'
    ]),

    init: function() {
      this.setupDefaultSettings();
      this.listenToOnce(Adapt, "adapt:initialize", this.onAdaptInitialize);
    },

    // Calls default methods to setup on questions
    setupDefaultSettings: function() {
      // Not sure this is needed anymore, keeping to maintain API
      this.setupWeightSettings();
      this.setupButtonSettings();
    },

    // Used to setup either global or local button text
    setupButtonSettings: function() {
      var globalButtons = Adapt.course.get("_buttons");

      // Check if  '_buttons' attribute exists and if not use the globally defined buttons.
      if (!this.has("_buttons")) {
        this.set("_buttons", globalButtons);
      } else {
        // Check all the components buttons.
        // If they are empty use the global defaults.
        var componentButtons = this.get("_buttons");

        for (var key in componentButtons) {
          if (typeof componentButtons[key] === 'object') {
            // Button text.
            if (!componentButtons[key].buttonText && globalButtons[key].buttonText) {
              componentButtons[key].buttonText = globalButtons[key].buttonText;
            }

            // ARIA labels.
            if (!componentButtons[key].ariaLabel && globalButtons[key].ariaLabel) {
              componentButtons[key].ariaLabel = globalButtons[key].ariaLabel;
            }
          }

          if (!componentButtons[key] && globalButtons[key]) {
            componentButtons[key] = globalButtons[key];
          }
        }
      }
    },

    // Used to setup either global or local question weight/score
    setupWeightSettings: function() {
      // Not needed as handled by model defaults, keeping to maintain API
    },

    //////
    // Selection restoration process
    ////

    // Used to add post-load changes to the model
    onAdaptInitialize: function() {
      this.restoreUserAnswers();
    },

    // Used to restore the user answers
    restoreUserAnswers: function() {},

    //////
    // Submit process
    ////

    // Use to check if the user is allowed to submit the question
    // Maybe the user has to select an item?
    canSubmit: function() {},

    // Used to update the amount of attempts the user has left
    updateAttempts: function() {
      if (!this.get('_attemptsLeft')) {
        this.set("_attemptsLeft", this.get('_attempts'));
      }
      this.set("_attemptsLeft", this.get('_attemptsLeft') - 1);
    },

    // Used to set _isEnabled and _isSubmitted on the model
    setQuestionAsSubmitted: function() {
      this.set({
        _isEnabled: false,
        _isSubmitted: true
      });
    },

    // This is important for returning or showing the users answer
    // This should preserve the state of the users answers
    storeUserAnswer: function() {},

    // Sets _isCorrect:true/false based upon isCorrect method below
    markQuestion: function() {

      if (this.isCorrect()) {
        this.set('_isCorrect', true);
      } else {
        this.set('_isCorrect', false);
      }

    },

    // Should return a boolean based upon whether to question is correct or not
    isCorrect: function() {},

    // Used to set the score based upon the _questionWeight
    setScore: function() {},

    // Checks if the question should be set to complete
    // Calls setCompletionStatus and adds complete classes
    checkQuestionCompletion: function() {

      var isComplete = (this.get('_isCorrect') || this.get('_attemptsLeft') === 0);

      if (isComplete) {
        this.setCompletionStatus();
      }

      return isComplete;

    },

    // Updates buttons based upon question state by setting
    // _buttonState on the model which buttonsView listens to
    updateButtons: function() {

      var isInteractionComplete = this.get('_isInteractionComplete');
      var isCorrect = this.get('_isCorrect');
      var isEnabled = this.get('_isEnabled');
      var buttonState = this.get('_buttonState');
      var canShowModelAnswer = this.get('_canShowModelAnswer');

      if (isInteractionComplete) {

        if (isCorrect || !canShowModelAnswer) {
          // Use correct instead of complete to signify button state
          this.set('_buttonState', BUTTON_STATE.CORRECT);

        } else {

          switch (buttonState) {
            case BUTTON_STATE.SUBMIT:
            case BUTTON_STATE.HIDE_CORRECT_ANSWER:
              this.set('_buttonState', BUTTON_STATE.SHOW_CORRECT_ANSWER);
              break;
            default:
              this.set('_buttonState', BUTTON_STATE.HIDE_CORRECT_ANSWER);
          }

        }

      } else {

        if (isEnabled) {
          this.set('_buttonState', BUTTON_STATE.SUBMIT);
        } else {
          this.set('_buttonState', BUTTON_STATE.RESET);
        }
      }

    },

    // Used to setup the correct, incorrect and partly correct feedback
    setupFeedback: function() {
      if (!this.has('_feedback')) return;

      if (this.get('_isCorrect')) {
        this.setupCorrectFeedback();
      } else if (this.isPartlyCorrect()) {
        this.setupPartlyCorrectFeedback();
      } else {
        this.setupIncorrectFeedback();
      }
    },

    // Used by the question to determine if the question is incorrect or partly correct
    // Should return a boolean
    isPartlyCorrect: function() {},

    setupCorrectFeedback: function() {
      this.set({
        feedbackTitle: this.getFeedbackTitle(),
        feedbackMessage: this.get('_feedback').correct
      });
    },

    setupPartlyCorrectFeedback: function() {
      var feedback = this.get('_feedback')._partlyCorrect;

      if (feedback && feedback.final) {
        this.setAttemptSpecificFeedback(feedback);
      } else {
        this.setupIncorrectFeedback();
      }
    },

    setupIncorrectFeedback: function() {
      this.setAttemptSpecificFeedback(this.get('_feedback')._incorrect);
    },

    setAttemptSpecificFeedback: function(feedback) {
      var body = this.get('_attemptsLeft') && feedback.notFinal || feedback.final;

      this.set({
        feedbackTitle: this.getFeedbackTitle(),
        feedbackMessage: body
      });
    },

    getFeedbackTitle: function() {
      return this.get('_feedback').title || this.get('displayTitle') ||  this.get('title') || "";
    },

    /**
     * Used to determine whether the learner is allowed to interact with the question component or not.
     * @return {Boolean}
     */
    isInteractive: function() {
      return !this.get('_isComplete') || (this.get('_isEnabled') && !this.get('_isSubmitted'));
    },

    // Reset the model to let the user have another go (not the same as attempts)
    reset: function(type, force) {
      if (!this.get("_canReset") && !force) return;

      type = type || true; //hard reset by default, can be "soft", "hard"/true

      ComponentModel.prototype.reset.call(this, type, force);

      var attempts = this.get('_attempts');
      this.set({
        _attemptsLeft: attempts,
        _isCorrect: undefined,
        _isSubmitted: false,
        _buttonState: BUTTON_STATE.SUBMIT
      });
    },

    // Reset question for subsequent attempts
    setQuestionAsReset: function() {
      this.set({
        _isEnabled: true,
        _isSubmitted: false
      });
    },

    // Used by the question view to reset the stored user answer
    resetUserAnswer: function() {},

    refresh: function() {
      this.trigger('question:refresh');
    },

    getButtonState: function() {
      if (this.get('_isCorrect')) {
        return BUTTON_STATE.CORRECT;
      }

      if (this.get('_attemptsLeft') === 0) {
         return this.get('_canShowModelAnswer') ? BUTTON_STATE.SHOW_CORRECT_ANSWER : BUTTON_STATE.INCORRECT;
      }

      return this.get('_isSubmitted') ? BUTTON_STATE.RESET : BUTTON_STATE.SUBMIT;
    },

    // Returns an object specific to the question type, e.g. if the question
    // is a 'choice' this should contain an object with:
    // - correctResponsesPattern[]
    // - choices[]
    getInteractionObject: function() {
      return {};
    },

    // Returns a string detailing how the user answered the question.
    getResponse: function() {},

    // Returns a string describing the type of interaction: "choice" and "matching" supported (see scorm wrapper)
    getResponseType: function() {}

  });

  return QuestionModel;

});

define('core/js/models/buildModel',[
  'core/js/adapt',
  'core/js/logging'
], function (Adapt) {

  var BuildModel = Backbone.Model.extend({

    defaults: {
      jsonext: 'json'
    },

    initialize: function(attrs, options) {
      this.url = options.url;
      // Fetch data & if successful trigger event to enable plugins to stop course files loading
      // Then check if course files can load
      // 'configModel:loadCourseData' event starts the core content collections and models being fetched
      this.fetch({
        success: _.bind(function() {
          this.isLoaded = true;
          Adapt.trigger('buildModel:dataLoaded');
        }, this),
        error: function() {
          console.log('Unable to load adapt/js/build.js');
          Adapt.trigger('buildModel:dataLoaded');
        }
      });
    },

    whenReady: function() {
      if (this.isLoaded) return Promise.resolve();
      return new Promise(function (resolve) {
          Adapt.once("buildModel:dataLoaded", resolve);
      }.bind(this));
    }

  });

  return Adapt.build = new BuildModel(null, {url: 'adapt/js/build.min.js', reset:true});

});

define('core/js/startController',[
  'core/js/adapt'
], function(Adapt) {

  var StartController = Backbone.Controller.extend({

    model: null,

    loadCourseData: function() {
      this.model = new Backbone.Model(Adapt.course.get("_start"));
    },

    setStartLocation: function() {
      if (!this.isEnabled()) return;
      window.history.replaceState('', '', this.getStartHash());
    },

    getStartHash: function(alwaysForce) {
      var startId = this.getStartId();

      var hasStartId = (startId)
        ? true
        : false;

      var isRouteSpecified = (_.indexOf(window.location.href,"#") > -1);
      var shouldForceStartId = alwaysForce || this.model.get("_force");
      var shouldNavigateToStartId = hasStartId && (!isRouteSpecified || shouldForceStartId);

      var startHash = "#/";
      if (shouldNavigateToStartId) {
        if (startId !== Adapt.course.get("_id")) {
          startHash = "#/id/"+startId;
        }
      } else {
        //go to specified route or course main menu
        var hasLocationHash = (window.location.hash)
          ? true
          : false;

        startHash = hasLocationHash ? window.location.hash : startHash;
      }

      return startHash;
    },

    isEnabled: function() {
      if (!this.model || !this.model.get("_isEnabled")) return false;
      return true;
    },

    getStartId: function() {
      var startId = this.model.get("_id");
      var startIds = this.model.get("_startIds");
      var $html = $("html");

      var hasStartIdsConfiguration = (startIds && startIds.length > 0);
      if (hasStartIdsConfiguration) {
        for (var i = 0, l =  startIds.length; i < l; i++) {
          var item = startIds[i];
          var className =  item._className;
          var skipIfComplete = item._skipIfComplete;

          var model = Adapt.findById(item._id);

          if (!model) {
            console.log("startController: cannot find id", item._id);
            continue;
          }

          if (skipIfComplete) {
            if (model.get("_isComplete")) continue;
          }

          if (!className || $html.is(className) || $html.hasClass(className)) {
            startId = item._id;
            break;
          }
        }
      }

      return startId;
    }

  });

  Adapt.once("adapt:start", function() {
    Adapt.startController.loadCourseData();
    Adapt.startController.setStartLocation();
  });

  return Adapt.startController = new StartController();

});

define('core/js/data',[
  'core/js/adapt',
  'core/js/collections/adaptCollection',
  'core/js/models/articleModel',
  'core/js/models/blockModel',
  'core/js/models/configModel',
  'core/js/models/contentObjectModel',
  'core/js/models/componentModel',
  'core/js/models/courseModel',
  'core/js/models/questionModel',
  'core/js/models/lockingModel',
  'core/js/models/buildModel',
  'core/js/startController'
], function(Adapt, AdaptCollection, ArticleModel, BlockModel, ConfigModel, ContentObjectModel, ComponentModel, CourseModel, QuestionModel) {

  var Data = Backbone.Controller.extend({

    mappedIds: {},

    init: function () {
      Adapt.build.whenReady().then(this.onBuildDataLoaded.bind(this));
    },

    onBuildDataLoaded: function() {
      $('html').attr('data-adapt-framework-version', Adapt.build.get('package').version);
      Adapt.config = new ConfigModel(null, {url: 'course/config.' + Adapt.build.get('jsonext'), reset:true});
      Adapt.config.on({
        'change:_activeLanguage': this.onLanguageChange.bind(this),
        'change:_defaultDirection': this.onDirectionChange.bind(this)
      });

      // Events that are triggered by the main Adapt content collections and models
      Adapt.once('configModel:loadCourseData', this.onLoadCourseData.bind(this));
    },

    onLanguageChange: function(model, language) {
      Adapt.offlineStorage.set('lang', language);
      this.loadCourseData(this.triggerDataReady.bind(this), language);
    },

    onDirectionChange: function(model, direction) {
      if (direction === 'rtl') {
        $('html').removeClass('dir-ltr').addClass('dir-rtl').attr('dir', 'rtl');
      } else {
        $('html').removeClass('dir-rtl').addClass('dir-ltr').attr('dir', 'ltr');
      }
    },

    /**
     * Before we actually go to load the course data, we first need to check to see if a language has been set
     * If it has we can go ahead and start loading; if it hasn't, apply the defaultLanguage from config.json
     */
    onLoadCourseData: function() {
      if (Adapt.config.get('_activeLanguage')) {
        this.loadCourseData(this.triggerDataReady.bind(this));
      } else {
        Adapt.config.set('_activeLanguage', Adapt.config.get('_defaultLanguage'));
      }
    },

    loadCourseData: function(callback, newLanguage) {
      Adapt.on('adaptCollection:dataLoaded courseModel:dataLoaded', function() {
        this.checkDataIsLoaded(callback, newLanguage);
      }.bind(this));

      // All code that needs to run before adapt starts should go here
      var language = Adapt.config.get('_activeLanguage');
      var jsonext = Adapt.build.get('jsonext');
      var courseFolder = 'course/' + language +'/';

      $('html').attr('lang', language);

      Adapt.course = new CourseModel(null, {url:courseFolder + 'course.'+jsonext, reset:true});

      Adapt.contentObjects = new AdaptCollection(null, {
        model: ContentObjectModel,
        url: courseFolder +'contentObjects.'+jsonext
      });

      Adapt.articles = new AdaptCollection(null, {
        model: ArticleModel,
        url: courseFolder + 'articles.'+jsonext
      });

      Adapt.blocks = new AdaptCollection(null, {
        model: BlockModel,
        url: courseFolder + 'blocks.'+jsonext
      });

      Adapt.assets = new AdaptCollection(null, {
        model: BlockModel,
        url: courseFolder + 'assets.'+jsonext
      })

      Adapt.components = new AdaptCollection(null, {
        model: function(json) {

          //use view+model object
          var ViewModelObject = Adapt.componentStore[json._component];

          if (!ViewModelObject) {
            throw new Error('One or more components of type "'+json._component+'" were included in the course - but no component of that type is installed...');
          }

          //if model defined for component use component model
          if (ViewModelObject.model) {
            return new ViewModelObject.model(json);
          }

          var View = ViewModelObject.view || ViewModelObject;
          //if question type use question model
          if (View._isQuestionType) {
            return new QuestionModel(json);
          }

          //otherwise use component model
          return new ComponentModel(json);
        },
        url: courseFolder + 'components.' + jsonext
      });
    },

    checkDataIsLoaded: function(callback, newLanguage) {
      if (Adapt.contentObjects.models.length > 0 &&
        Adapt.articles.models.length > 0 &&
        Adapt.blocks.models.length > 0 &&
        Adapt.components.models.length > 0 &&
        Adapt.course.get('_id')) {

        this.mapAdaptIdsToObjects();

        Adapt.log.debug('Firing app:dataLoaded');

        try {
          Adapt.trigger('app:dataLoaded');// Triggered to setup model connections in AdaptModel.js
        } catch(e) {
          Adapt.log.error('Error during app:dataLoading trigger', e);
        }

        this.setupMapping();

        Adapt.wait.queue(function() {
          callback(newLanguage);
        });

      }
    },

    mapAdaptIdsToObjects: function () {
      Adapt.contentObjects._byAdaptID = Adapt.contentObjects.groupBy('_id');
      Adapt.articles._byAdaptID = Adapt.articles.groupBy('_id');
      Adapt.blocks._byAdaptID = Adapt.blocks.groupBy('_id');
      Adapt.components._byAdaptID = Adapt.components.groupBy('_id');
    },

    setupMapping: function() {
      this.mappedIds = {};

      // Setup course Id
      this.mappedIds[Adapt.course.get('_id')] = 'course';

      var collections = ['contentObjects', 'articles', 'blocks', 'components'];

      collections.forEach(function(collection) {
        Adapt[collection].models.forEach(function(model) {
          var id = model.get('_id');
          this.mappedIds[id] = collection;
        }.bind(this));
      }.bind(this));
    },

    triggerDataReady: function(newLanguage) {
      if (newLanguage) {

        Adapt.trigger('app:languageChanged', newLanguage);

        _.defer(function() {
          Adapt.startController.loadCourseData();
          var hash = '#/';

          if (Adapt.startController.isEnabled()) {
            hash = Adapt.startController.getStartHash(true);
          }

          Backbone.history.navigate(hash, { trigger: true, replace: true });
        });
      }

      Adapt.log.debug('Firing app:dataReady');

      try {
        Adapt.trigger('app:dataReady');
      } catch(e) {
        Adapt.log.error('Error during app:dataReady trigger', e);
      }

      Adapt.wait.queue(this.triggerInit.bind(this));

    },

    triggerInit: function() {
      this.isReady = true;
      this.trigger('ready');
    },

    whenReady: function() {
      if (this.isReady) return Promise.resolve();

      return new Promise(function (resolve) {
        this.once('ready', resolve);
      }.bind(this));
    },

    /**
     * Looks up which collection a model belongs to
     * @param {string} id The id of the item you want to look up e.g. `"co-05"`
     * @return {string} One of the following (or `undefined` if not found):
     * - "course"
     * - "contentObjects"
     * - "blocks"
     * - "articles"
     * - "components"
     */
    mapById: function(id) {
      return this.mappedIds[id];
    },

    /**
     * Looks up a model by its `_id` property
     * @param {string} id The id of the item e.g. "co-05"
     * @return {Backbone.Model}
     */
    findById: function(id) {
      if (id === Adapt.course.get('_id')) {
        return Adapt.course;
      }

      var collectionType = Adapt.mapById(id);

      if (!collectionType) {
        console.warn('Adapt.findById() unable to find collection type for id: ' + id);
        return;
      }

      return Adapt[collectionType]._byAdaptID[id][0];
    }

  });

  return (Adapt.data = new Data());

});

define('core/js/offlineStorage',[
  'core/js/adapt'
], function(Adapt) {

  //Basic API for setting and getting name+value pairs
  //Allows registration of a single handler.

  var OfflineStorage = Backbone.Controller.extend({

    /**
     * set to true initially so that if there are no offlineStorage handlers (i.e. if contrib-spoor is not installed)
     * this can still be accessed OK
     */
    ready: true,
    _handler: undefined,

    /**
     * set .ready to false if an offlineStorage handler is being attached - we'll need to wait until the handler lets us know
     * it's ready before we can safely use offlineStorage
     */
    initialize: function(handler) {
      if (!handler) {
        return;
      }

      this.ready = false;
      this._handler = handler;
    },

    /**
     * Flag to indicate if an offlineStorage handler has been defined.
     * @returns {boolean} true if an offlineStorage handler has been defined, false otherwise
     */
    hasHandler: function() {
      return this._handler !== undefined;
    },

    set: function(name, value) {
      if (this._handler && this._handler.set) {
        return this._handler.set.apply(this._handler, arguments);
      }
      // if no handler has been defined, just store the data locally
      this[name] = value;
    },

    get: function(name) {
      if (this._handler && this._handler.get) {
        return this._handler.get.apply(this._handler, arguments);
      }
      // if no handler has been defined, check local data store
      return this[name];
    },

    /**
     * Some forms of offlineStorage could take time to initialise, this allows us to let plugins know when it's ready to be used
     */
    setReadyStatus: function() {
      this.ready = true;
      Adapt.trigger("offlineStorage:ready");
    }

  });

  Adapt.offlineStorage = new OfflineStorage();

  return Adapt.offlineStorage;

});

define('core/js/enums/completionStateEnum',[],function() {

  var COMPLETION_STATE = ENUM([
    'INCOMPLETE',
    'COMPLETED',
    'PASSED',
    'FAILED'
  ]);

  return COMPLETION_STATE;

})
;
define('core/js/tracking',[
  'core/js/adapt',
  'core/js/enums/completionStateEnum'
], function(Adapt, COMPLETION_STATE) {

  var Tracking = Backbone.Controller.extend({

    _config: {
      _requireContentCompleted: true,
      _requireAssessmentCompleted: false
    },

    _assessmentState: null,

    initialize: function() {
      Adapt.once('configModel:dataLoaded', this.loadConfig.bind(this));
      Adapt.on('app:dataReady', this.setupEventListeners.bind(this));
    },

    setupEventListeners: function() {
      // Check if completion requires passing an assessment.
      if (this._config._requireAssessmentCompleted) {
        this.listenTo(Adapt, {
          'assessment:complete': this.onAssessmentComplete,
          'assessment:restored': this.onAssessmentRestored
        });
      }

      // Check if completion requires completing all content.
      if (this._config._requireContentCompleted) {
        this.listenTo(Adapt.course, 'change:_isComplete', this.checkCompletion);
      }
    },

    /**
     * Store the assessment state.
     * @param {object} assessmentState - The object returned by Adapt.assessment.getState()
     */
    onAssessmentComplete: function(assessmentState) {
      this._assessmentState = assessmentState;

      this.checkCompletion();
    },

    /**
     * Restores the _assessmentState object when an assessment is registered.
     * @param {object} assessmentState - An object representing the overall assessment state
     */
    onAssessmentRestored: function(assessmentState) {
      this._assessmentState = assessmentState;
    },

    /**
     * Evaluate the course and assessment completion.
     */
    checkCompletion: function() {
      var completionData = this.getCompletionData();

      if (completionData.status === COMPLETION_STATE.INCOMPLETE) {
        return;
      }

      Adapt.trigger('tracking:complete', completionData);
      Adapt.log.debug('tracking:complete', completionData);
    },

    /**
     * The return value of this function should be passed to the trigger of 'tracking:complete'.
     * @returns An object representing the user's course completion.
     */
    getCompletionData: function() {
      var completionData = {
        status: COMPLETION_STATE.INCOMPLETE,
        assessment: null
      };

      // Course complete is required.
      if (this._config._requireContentCompleted && !Adapt.course.get('_isComplete')) {
        // INCOMPLETE: course not complete.
        return completionData;
      }

      // Assessment completed required.
      if (this._config._requireAssessmentCompleted) {
        if (!this._assessmentState) {
          // INCOMPLETE: assessment is not complete.
          return completionData;
        }

        // PASSED/FAILED: assessment completed.
        completionData.status = this._assessmentState.isPass ? COMPLETION_STATE.PASSED : COMPLETION_STATE.FAILED;
        completionData.assessment = this._assessmentState;

        return completionData;
      }

      // COMPLETED: criteria met, no assessment requirements.
      completionData.status = COMPLETION_STATE.COMPLETED;

      return completionData;
    },

    /**
     * Set the _config object to the values retrieved from config.json.
     */
    loadConfig: function() {
      if (Adapt.config.has('_completionCriteria')) {
        this._config = Adapt.config.get('_completionCriteria');
      }
    }

  });

  Adapt.tracking = new Tracking();

  return Adapt.tracking;

});

define('core/js/device',[
  'core/js/adapt',
  'bowser'
], function(Adapt, Bowser) {

  var $html = $('html');
  var $window = $(window);

  Adapt.device = {
    touch: Modernizr.touchevents,
    screenWidth: getScreenWidth(),
    screenHeight: getScreenHeight(),
    browser: (Bowser.name || '').toLowerCase(),
    version: (Bowser.version || '').toLowerCase(),
    OS: getOperatingSystem().toLowerCase(),
    osVersion: Bowser.osversion || '',
    renderingEngine: getRenderingEngine()
  };

  // Define 'orientation' and 'aspectRatio' here once 'screenWidth' and 'screenHeight' have been set,
  // as both these functions are getters, essentially.
  Object.defineProperties(Adapt.device, {
    "orientation": {
      get: function () {
        return (this.screenWidth >= this.screenHeight) ? 'landscape' : 'portrait';
      }
    },
    "aspectRatio": {
      get: function () {
        return this.screenWidth / this.screenHeight;
      }
    }
  });

  Adapt.once('app:dataReady', function() {
    Adapt.device.screenSize = checkScreenSize();

    $html.addClass('size-' + Adapt.device.screenSize);

    if (Adapt.device.orientation) {
      $html.addClass('orientation-' + Adapt.device.orientation);
    }

    // As Adapt.config is available it's ok to bind the 'resize'.
    $window.on('resize orientationchange', onWindowResize);
  });

  /**
   * Compares the calculated screen width to the breakpoints defined in config.json.
   *
   * @returns {string} 'large', 'medium' or 'small'
   */
  function checkScreenSize() {
    var screenSizeConfig = Adapt.config.get('screenSize');
    var screenSize;

    var screensizeEmThreshold = 300;
    var baseFontSize = 16;

    // Check to see if the screen size value is larger than the em threshold
    // If value is larger than em threshold, convert value (assumed px) to ems
    // Otherwise assume value is in ems
    var mediumEmBreakpoint = screenSizeConfig.medium > screensizeEmThreshold ?
      screenSizeConfig.medium / baseFontSize :
      screenSizeConfig.medium;
    var smallEmBreakpoint = screenSizeConfig.small > screensizeEmThreshold ?
      screenSizeConfig.small / baseFontSize :
      screenSizeConfig.small;

    var fontSize = parseFloat($('html').css('font-size'));
    var screenSizeEmWidth = (Adapt.device.screenWidth / fontSize);

    // Check to see if client screen width is larger than medium em breakpoint
    // If so apply large, otherwise check to see if client screen width is
    // larger than small em breakpoint. If so apply medium, otherwise apply small
    if (screenSizeEmWidth > mediumEmBreakpoint) {
      screenSize = 'large';
    } else if (screenSizeEmWidth > smallEmBreakpoint) {
      screenSize = 'medium';
    } else {
      screenSize = 'small';
    }

    return screenSize;
  }

  function getScreenWidth() {
    return isAppleDevice()
      ? getAppleScreenWidth()
      : window.innerWidth || $window.width();
  }

  function getScreenHeight() {
    return isAppleDevice()
      ? getAppleScreenHeight()
      : window.innerHeight || $window.height();
  }

  function getOperatingSystem() {
    var os = '';
    var flags = ['windows', 'mac', 'linux', 'windowsphone', 'chromeos', 'android',
      'ios', 'blackberry', 'firefoxos', 'webos', 'bada', 'tizen', 'sailfish'];

    for (var i = 0; i < flags.length; i++) {
      if (Bowser[flags[i]]) {
        os = flags[i];
        break;
      }
    }

    if (os === '') {
      // Fall back to using navigator.platform in case Bowser can't detect the OS.
      var platform = navigator.platform;
      var platforms = ['Win', 'Mac', 'Linux'];
      os = 'PlatformUnknown';

      for (var i = 0; i < platforms.length; i++) {
        if (platform.indexOf(platforms[i]) != -1) {
          os = platforms[i].toLowerCase();
          break;
        }
      }

      // Set consistency with the Bowser flags.
      if (os == 'win') {
        os = 'windows';
      }
    }

    return os;
  }

  function getRenderingEngine() {
    var engine = '';
    var flags = ['webkit', 'blink', 'gecko', 'msie', 'msedge'];

    for (var i = 0; i < flags.length; i++) {
      if (Bowser[flags[i]]) {
        engine = flags[i];
        break;
      }
    }

    return engine;
  }

  var onWindowResize = _.debounce(function onScreenSizeChanged() {
    // Calculate the screen properties.
    var previousWidth = Adapt.device.screenWidth;
    var previousHeight = Adapt.device.screenHeight;

    Adapt.device.screenWidth = getScreenWidth();
    Adapt.device.screenHeight = getScreenHeight();

    if (previousWidth === Adapt.device.screenWidth && previousHeight === Adapt.device.screenHeight) {
      // Do not trigger a change if the viewport hasn't actually changed.  Scrolling on iOS will trigger a resize.
      return;
    }

    var newScreenSize = checkScreenSize();

    if (newScreenSize !== Adapt.device.screenSize) {
      Adapt.device.screenSize = newScreenSize;

      $html.removeClass('size-small size-medium size-large').addClass('size-' + Adapt.device.screenSize);

      if (Adapt.device.orientation) {
        $html.removeClass('orientation-landscape orientation-portrait').addClass('orientation-' + Adapt.device.orientation);
      }

      Adapt.trigger('device:changed', Adapt.device.screenSize);
    }

    Adapt.trigger('device:preResize device:resize device:postResize', Adapt.device.screenWidth);

  }, 100);

  function isAppleDevice() {
    return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
  }

  function getAppleScreenWidth() {
    return (Math.abs(window.orientation) === 90) ? screen.height : screen.width;
  }

  function getAppleScreenHeight() {
    return (Math.abs(window.orientation) === 90) ? screen.width : screen.height;
  }

  function getAppleDeviceType() {
    var type = '';

    var flags = ['iphone', 'ipad', 'ipod'];

    for (var i = 0; i < flags.length; i++) {
      if (Bowser[flags[i]]) {
        type = flags[i];
        break;
      }
    }

    return type;
  }

  function pixelDensity() {
    var pixelDensity = (window.devicePixelRatio || 1);

    if (pixelDensity >= 3) {
      return 'ultra-high';
    } else if (pixelDensity >= 2) {
      return 'high';
    } else if (pixelDensity >= 1.5) {
      return 'medium';
    } else {
      return 'low';
    }
  }

  var browser = Adapt.device.browser.toLowerCase();
  // Convert 'msie' and 'internet explorer' to 'ie'.
  var browserString = browser.replace(/msie|internet explorer/, 'ie');
  browserString = browserString + ' version-' + Adapt.device.version + ' OS-' + Adapt.device.OS + ' ' + getAppleDeviceType();
  browserString += browserString.replace('.', '-').toLowerCase();

  $html.addClass(browserString + ' pixel-density-' + pixelDensity());
});

define('core/js/views/drawerItemView',[
  'core/js/adapt'
], function(Adapt) {

  var DrawerItemView = Backbone.View.extend({

    className: 'drawer__menu drawer__item',

    attributes: {
      role: 'list'
    },

    initialize: function() {
      this.listenTo(Adapt, 'drawer:empty', this.remove);
      this.render();
    },

    events: {
      'click .drawer__item-btn': 'onDrawerItemClicked'
    },

    render: function() {
      var data = this.model.toJSON();
      var template = Handlebars.templates['drawerItem']
      $(this.el).html(template(data)).appendTo('.drawer__holder');
      return this;
    },

    onDrawerItemClicked: function(event) {
      event.preventDefault();
      var eventCallback = this.model.get('eventCallback');
      Adapt.trigger(eventCallback);
    }

  }, {
    type: 'drawerItem'
  });

  return DrawerItemView;

});
define('core/js/views/drawerView',[
  'core/js/adapt',
  'core/js/views/drawerItemView'
], function(Adapt, DrawerItemView) {

  var DrawerView = Backbone.View.extend({

    className: 'drawer u-display-none',
    disableAnimation: false,

    attributes: {
      'role': 'dialog',
      'aria-modal': 'true',
      'aria-labelledby': 'drawer-heading',
      'aria-hidden': 'true'
    },

    initialize: function() {
      this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;
      this._isVisible = false;
      this.drawerDir = 'right';
      if(Adapt.config.get('_defaultDirection')=='rtl'){//on RTL drawer on the left
          this.drawerDir = 'left';
      }
      this.setupEventListeners();
      this.render();
      this.drawerDuration = Adapt.config.get('_drawer')._duration;
      this.drawerDuration = (this.drawerDuration) ? this.drawerDuration : 400;
      // Setup cached selectors
      this.$wrapper = $('#wrapper');
    },

    setupEventListeners: function() {
      this.listenTo(Adapt, {
        'navigation:toggleDrawer': this.toggleDrawer,
        'drawer:triggerCustomView': this.openCustomView,
        'drawer:closeDrawer': this.onCloseDrawer,
        'remove': this.onCloseDrawer,
        'drawer:remove': this.remove
      });

      this._onKeyUp = _.bind(this.onKeyUp, this);
      this.setupEscapeKey();
    },

    setupEscapeKey: function() {
      $(window).on("keyup", this._onKeyUp);
    },

    onKeyUp: function(event) {
      if (event.which != 27) return;
      event.preventDefault();

      this.onCloseDrawer();
    },

    events: {
      'click .drawer__back': 'onBackButtonClicked',
      'click .drawer__close':'onCloseClicked'
    },

    render: function() {
      var template = Handlebars.templates['drawer']
      $(this.el).html(template({_globals: Adapt.course.get("_globals")})).prependTo('body');
      var shadowTemplate = Handlebars.templates['shadow'];
      $(shadowTemplate()).prependTo('body');
      // Set defer on post render
      _.defer(_.bind(function() {
        this.postRender();
      }, this));
      return this;
    },

    // Set tabindex for select elements
    postRender: function() {
      this.$('a, button, input, select, textarea').attr('tabindex', -1);

      this.checkIfDrawerIsAvailable();
    },

    openCustomView: function(view, hasBackButton) {
      // Set whether back button should display
      this._hasBackButton = hasBackButton;
      this._isCustomViewVisible = true;
      Adapt.trigger('drawer:empty');
      this.showDrawer();
      this.$('.drawer__holder').html(view);
    },

    checkIfDrawerIsAvailable: function() {
      if (this.collection.length === 0) {
        $('.js-nav-drawer-btn').addClass('u-display-none');
        Adapt.trigger('drawer:noItems');
        return;
      }
      $('.js-nav-drawer-btn').removeClass('u-display-none');
    },

    onBackButtonClicked: function(event) {
      event.preventDefault();
      this.showDrawer(true);
    },

    onCloseClicked: function(event) {
      event.preventDefault();
      this.hideDrawer();
    },

    onCloseDrawer: function($toElement) {
      this.hideDrawer($toElement);
    },

    toggleDrawer: function() {
      if (this._isVisible && this._isCustomViewVisible === false) {
        this.hideDrawer();
      } else {
        this.showDrawer(true);
      }
    },

    showDrawer: function(emptyDrawer) {
      this.$el.removeClass('u-display-none').removeAttr('aria-hidden');
      //only trigger popup:opened if drawer is visible, pass popup manager drawer element
      if (!this._isVisible) {
        Adapt.a11y.popupOpened(this.$el);
        Adapt.a11y.scrollDisable('body');
        this._isVisible = true;
      }

      var drawerWidth = this.$el.width();
      // Sets tab index to 0 for all tabbable elements in Drawer
      this.$('a, button, input, select, textarea').attr('tabindex', 0);

      if (emptyDrawer) {
        this.$('.drawer__back').addClass('u-display-none');
        this._isCustomViewVisible = false;
        this.emptyDrawer();
        if (this.collection.models.length === 1) {
          // This callback triggers openCustomView() and sets
          // _isCustomViewVisible to true, causing toggleDrawer()
          // to re-render the drawer on every toggle button press
          Adapt.trigger(this.collection.models[0].get('eventCallback'));
          // Set _isCustomViewVisible to false to prevent re-rendering
          // the drawer and fix the toggle functionality on toggle button press
          this._isCustomViewVisible = false;
        } else {
          this.renderItems();
          Adapt.trigger('drawer:openedItemView');
        }
      } else {
        if (this._hasBackButton && this.collection.models.length > 1) {
          this.$('.drawer__back').removeClass('u-display-none');
        } else {
          this.$('.drawer__back').addClass('u-display-none');
        }
        Adapt.trigger('drawer:openedCustomView');
      }

      //delay drawer animation until after background fadeout animation is complete
      if (this.disableAnimation) {
        $('.js-shadow').removeClass("u-display-none");

        var direction={};
        direction[this.drawerDir]=0;
        this.$el.css(direction);
        complete.call(this);

      } else {

        $('.js-shadow').velocity({opacity:1},{duration:this.drawerDuration, begin: _.bind(function() {
          $(".js-shadow").removeClass("u-display-none");
          complete.call(this);
        }, this)});

        var showEasingAnimation = Adapt.config.get('_drawer')._showEasing;
        var easing = (showEasingAnimation) ? showEasingAnimation : 'easeOutQuart';
        var direction={};
        direction[this.drawerDir]=0;
        this.$el.velocity(direction, this.drawerDuration, easing);

      }

      function complete() {
        this.addShadowEvent();
        Adapt.trigger('drawer:opened');

        //focus on first tabbable element in drawer
        Adapt.a11y.focusFirst(this.$el, { defer: true });
      }

    },

    emptyDrawer: function() {
      this.$('.drawer__holder').empty();
    },

    renderItems: function() {
      Adapt.trigger('drawer:empty');
      this.emptyDrawer();
      var models = this.collection.models;
      for (var i = 0, len = models.length; i < len; i++) {
        var item = models[i];
        new DrawerItemView({model: item});
      }
    },

    hideDrawer: function($toElement) {
      //only trigger popup:closed if drawer is visible
      if (this._isVisible) {
        Adapt.a11y.popupClosed($toElement);
        this._isVisible = false;
        Adapt.a11y.scrollEnable('body');
      } else {
        return;
      }

      if (this.disableAnimation) {

        var direction={};
        direction[this.drawerDir]=-this.$el.width();
        this.$el
            .css(direction)
            .addClass('u-display-none')
            .attr('aria-hidden', 'true');

        $('.js-shadow').addClass('u-display-none');

        Adapt.trigger('drawer:closed');

      } else {

        var showEasingAnimation = Adapt.config.get('_drawer')._hideEasing;
        var easing = (showEasingAnimation) ? showEasingAnimation : 'easeOutQuart';

        var direction={};
        direction[this.drawerDir]=-this.$el.width();
        this.$el.velocity(direction, this.drawerDuration, easing, _.bind(function() {
          this.$el
              .addClass('u-display-none')
              .attr('aria-hidden', 'true');

          Adapt.trigger('drawer:closed');
        }, this));

        $('.js-shadow').velocity({opacity:0}, {duration:this.drawerDuration, complete:function() {
          $('.js-shadow').addClass("u-display-none");
        }});

      }

      this._isCustomViewVisible = false;
      this.removeShadowEvent();

    },

    addShadowEvent: function() {
      $('.js-shadow').one('click touchstart', function() {
        this.onCloseDrawer();
      }.bind(this));
    },

    removeShadowEvent: function() {
      $('.js-shadow').off('click touchstart');
    },

    remove: function() {
      Backbone.View.prototype.remove.apply(this, arguments);
      $(window).off("keyup", this._onKeyUp);

      Adapt.trigger('drawer:empty');
      this.collection.reset();
      $('.js-shadow').remove();
    }

  }, {
    childContainer: '.js-drawer-holder',
    childView: DrawerItemView
  });

  return DrawerView;

});

define('core/js/drawer',[
  'core/js/adapt',
  'core/js/views/drawerView'
], function(Adapt, DrawerView) {

  var DrawerCollection = new Backbone.Collection(null, { comparator: 'drawerOrder' });
  var Drawer = {};

  Drawer.addItem = function(drawerObject, eventCallback) {
    drawerObject.eventCallback = eventCallback;
    DrawerCollection.add(drawerObject);
  };

  Drawer.triggerCustomView = function(view, hasBackButton) {
    if (hasBackButton !== false) {
      hasBackButton = true;
    }
    Adapt.trigger('drawer:triggerCustomView', view, hasBackButton);
  };

  Adapt.on({
    'adapt:start': function() {
      new DrawerView({ collection: DrawerCollection });
    },
    'app:languageChanged': function() {
      Adapt.trigger('drawer:remove');
    }
  });

  Adapt.drawer = Drawer;

});

define('core/js/views/notifyPushView',[
  'core/js/adapt'
], function (Adapt) {

  var NotifyPushView = Backbone.View.extend({

    className: function () {
      var classes = 'notify-push ';
      classes += (this.model.get('_classes') || '');
      return classes;
    },

    attributes: {
      'role': 'dialog',
      'aria-labelledby': 'notify-push-heading',
      'aria-modal': 'false'
    },

    initialize: function () {
      this.listenTo(Adapt, {
        'notify:pushShown notify:pushRemoved': this.updateIndexPosition,
        'remove': this.remove
      });

      this.listenTo(this.model.collection, {
        'remove': this.updateIndexPosition,
        'change:_index': this.updatePushPosition
      });

      this.preRender();
      this.render();
    },

    events: {
      'click .notify-push-close': 'closePush',
      'click .notify-push-inner': 'triggerEvent'
    },

    preRender: function () {
      this.hasBeenRemoved = false;
    },

    render: function () {
      var data = this.model.toJSON();
      var template = Handlebars.templates['notifyPush'];
      this.$el.html(template(data)).appendTo('#wrapper');

      _.defer(this.postRender.bind(this));

      return this;
    },

    postRender: function () {
      this.$el.addClass('show');

      _.delay(this.closePush.bind(this), this.model.get('_timeout'));

      Adapt.trigger('notify:pushShown');
    },

    closePush: function (event) {
      if (event) {
        event.preventDefault();
      }

      // Check whether this view has been removed as the delay can cause it to be fired twice
      if (this.hasBeenRemoved === false) {

        this.hasBeenRemoved = true;

        this.$el.removeClass('show');

        _.delay(function () {
          this.model.collection.remove(this.model);
          Adapt.trigger('notify:pushRemoved', this);
          this.remove();
        }.bind(this), 600);
      }
    },

    triggerEvent: function (event) {
      Adapt.trigger(this.model.get('_callbackEvent'));
      this.closePush();
    },

    updateIndexPosition: function () {
      if (!this.hasBeenRemoved) {
        var models = this.model.collection.models;
        for (var i = 0, len = models.length; i < len; i++) {
          var index = i;
          var model = models[i];
          if (model.get('_isActive') === true) {
            model.set('_index', index);
            this.updatePushPosition();
          }
        }
      }
    },

    updatePushPosition: function () {
      if (this.hasBeenRemoved) {
        return;
      }

      if (this.model.get('_index') != undefined) {
        var elementHeight = this.$el.height();
        var offset = 20;
        var navigationHeight = $('.nav').height();
        var currentIndex = this.model.get('_index');
        var flippedIndex = (currentIndex == 0) ? 1 : 0;

        if (this.model.collection.where({ _isActive: true }).length === 1) {
          flippedIndex = 0;
        }

        var positionLowerPush = (elementHeight + offset) * flippedIndex + navigationHeight + offset;
        this.$el.css('top', positionLowerPush);
      }
    }
  });

  return NotifyPushView;

});

define('core/js/models/notifyModel',[],function() {

  var NotifyModel = Backbone.Model.extend({
    defaults: {
      _isActive: false,
      _showIcon: false,
      _timeout: 3000
    }
  });

  return NotifyModel;

});

define('core/js/collections/notifyPushCollection',[
  'core/js/adapt',
  'core/js/views/notifyPushView',
  'core/js/models/notifyModel'
], function(Adapt, NotifyPushView, NotifyModel) {

  // Build a collection to store push notifications
  var NotifyPushCollection = Backbone.Collection.extend({

    model: NotifyModel,

    initialize: function() {
      this.listenTo(this, 'add', this.onPushAdded);
      this.listenTo(Adapt, 'notify:pushRemoved', this.onRemovePush);
    },

    onPushAdded: function(model) {
      this.checkPushCanShow(model);
    },

    checkPushCanShow: function(model) {
      if (this.canShowPush()) {
        model.set('_isActive', true);
        this.showPush(model);
      }
    },

    canShowPush: function() {
      var availablePushNotifications = this.where({_isActive:true});
      if (availablePushNotifications.length >= 2) {
        return false;
      }
      return true;
    },

    showPush: function(model) {
      new NotifyPushView({
        model: model
      });
    },

    onRemovePush: function(view) {
      var inactivePushNotifications = this.where({_isActive:false});
      if (inactivePushNotifications.length > 0) {
        this.checkPushCanShow(inactivePushNotifications[0]);
      }
    }

  });

  return NotifyPushCollection;

});

define('core/js/views/notifyView',[
  'core/js/adapt'
], function(Adapt) {

  var NotifyView = Backbone.View.extend({

    className: function() {
      var classes = 'notify ';
      classes += (this.model.get('_classes') || '');
      return classes;
    },

    attributes: {
      'role': 'dialog',
      'aria-labelledby': 'notify-heading',
      'aria-modal': 'true'
    },

    disableAnimation: false,
    isOpen: false,
    hasOpened: false,

    initialize: function() {
      _.bindAll(this, 'resetNotifySize');
      this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;

      this.setupEventListeners();

      this.render();
    },

    setupEventListeners: function() {
      this.listenTo(Adapt, {
        'remove page:scrollTo': this.closeNotify,
        'notify:resize': this.resetNotifySize,
        'notify:cancel': this.cancelNotify,
        'notify:close': this.closeNotify,
        'device:resize': this.resetNotifySize
      });

      this._onKeyUp = this.onKeyUp.bind(this);
      this.setupEscapeKey();
    },

    setupEscapeKey: function() {
      $(window).on('keyup', this._onKeyUp);
    },

    onKeyUp: function(event) {
      if (event.which != 27) return;
      event.preventDefault();

      this.cancelNotify();
    },

    events: {
      'click .js-notify-btn-alert':'onAlertButtonClicked',
      'click .js-notify-btn-prompt': 'onPromptButtonClicked',
      'click .js-notify-close-btn': 'onCloseButtonClicked',
      'click .js-notify-shadow-click': 'onShadowClicked'
    },

    render: function() {
      var data = this.model.toJSON();
      var template = Handlebars.templates.notify;

      //hide notify container
      this.$el.css('visibility', 'hidden');
      //attach popup + shadow
      this.$el.html(template(data)).prependTo('body');
      //hide popup
      this.$('.notify__popup').css('visibility', 'hidden');
      //show notify container
      this.$el.css('visibility', 'visible');

      this.showNotify();
      return this;
    },

    onAlertButtonClicked: function(event) {
      event.preventDefault();
      //tab index preservation, notify must close before subsequent callback is triggered
      this.closeNotify();
      Adapt.trigger(this.model.get('_callbackEvent'), this);
    },

    onPromptButtonClicked: function(event) {
      event.preventDefault();
      //tab index preservation, notify must close before subsequent callback is triggered
      this.closeNotify();
      Adapt.trigger($(event.currentTarget).attr('data-event'), this);
    },

    onCloseButtonClicked: function(event) {
      event.preventDefault();
      //tab index preservation, notify must close before subsequent callback is triggered
      this.cancelNotify();
    },

    onShadowClicked: function(event) {
      event.preventDefault();
      if (this.model.get('_closeOnShadowClick') === false) return;
      this.cancelNotify();
    },

    cancelNotify: function() {
      if (this.model.get('_isCancellable') === false) return;
      //tab index preservation, notify must close before subsequent callback is triggered
      this.closeNotify();
      Adapt.trigger('notify:cancelled', this);
    },

    resetNotifySize: function() {
      if (!this.hasOpened) return;
      
      $('.notify__popup').removeAttr('style').css({ visibility: 'visible', opacity: 1 });

      this.resizeNotify();
    },

    resizeNotify: function() {
      var windowHeight = $(window).height();
      var notifyHeight = this.$('.notify__popup').outerHeight();

      if (notifyHeight >= windowHeight) {
        this.$('.notify__popup').css({
          'height':'100%',
          'top':0,
          'overflow-y': 'scroll',
          '-webkit-overflow-scrolling': 'touch'
        });
      } else {
        this.$('.notify__popup').css({
          'margin-top': -(notifyHeight/2)
        });
      }
    },

    showNotify: function() {
      this.isOpen = true;
      this.addSubView();

      // Keep focus from previous action
      this.$previousActiveElement = $(document.activeElement);

      Adapt.trigger('notify:opened', this);

      this.$el.imageready(this.onLoaded.bind(this));
    },

    onLoaded: function() {
      if (this.disableAnimation) {
        this.$('.notify__shadow').css('display', 'block');
      } else {
        this.$('.notify__shadow').velocity({ opacity: 0 }, { duration: 0 }).velocity({ opacity: 1 }, {duration: 400, begin: function() {
          this.$('.notify__shadow').css('display', 'block');
        }.bind(this)});
      }

      this.resizeNotify();

      if (this.disableAnimation) {
        this.$('.notify__popup').css('visibility', 'visible');
        this.onOpened();
      } else {
        this.$('.notify__popup').velocity({ opacity: 0 }, { duration: 0 }).velocity({ opacity: 1 }, { duration: 400, begin: function() {
          // Make sure to make the notify visible and then set
          // focus, disabled scroll and manage tabs
          this.$('.notify__popup').css('visibility', 'visible');
          this.onOpened();
        }.bind(this)});
      }
    },

    onOpened: function() {
      this.hasOpened = true;
      // Allows popup manager to control focus
      Adapt.a11y.popupOpened(this.$('.notify__popup'));
      Adapt.a11y.scrollDisable('body');
      $('html').addClass('notify');

      // Set focus to first accessible element
      Adapt.a11y.focusFirst(this.$('.notify__popup'), { defer: false });
    },

    addSubView: function() {
      this.subView = this.model.get('_view');
      if (!this.subView) return;
      
      this.subView.$el.on('resize', this.resetNotifySize);

      this.$('.notify__content-inner').append(this.subView.$el);
    },

    closeNotify: function (event) {
      // Prevent from being invoked multiple times - see https://github.com/adaptlearning/adapt_framework/issues/1659
      if (!this.isOpen) return;
      this.isOpen = false;

      // If closeNotify is called before showNotify has finished then wait
      // until it's open.
      if (!this.hasOpened) {
        this.listenToOnce(Adapt, 'popup:opened', function() {
          // Wait for popup:opened to finish processing
          _.defer(this.onCloseReady.bind(this));
        });
      } else {
        this.onCloseReady();
      }
    },

    onCloseReady: function() {
      if (this.disableAnimation) {
        this.$('.notify__popup').css('visibility', 'hidden');
        this.$el.css('visibility', 'hidden');
        this.remove();
      } else {
        this.$('.notify__popup').velocity({ opacity: 0 }, {duration: 400, complete: function() {
          this.$('.notify__popup').css('visibility', 'hidden');
        }.bind(this)});

        this.$('.notify__shadow').velocity({ opacity: 0 }, {duration: 400, complete:function() {
          this.$el.css('visibility', 'hidden');
          this.remove();
        }.bind(this)});
      }

      Adapt.a11y.scrollEnable('body');
      $('html').removeClass('notify');

      // Return focus to previous active element
      Adapt.a11y.popupClosed(this.$previousActiveElement);
      // Return reference to the notify view
      Adapt.trigger('notify:closed', this);
    },

    remove: function() {
      this.removeSubView();
      $(window).off('keyup', this._onKeyUp);
      Backbone.View.prototype.remove.apply(this, arguments);
    },

    removeSubView: function() {
      if (!this.subView) return;
      this.subView.$el.off('resize', this.resetNotifySize);
      this.subView.remove();
      this.subView = null;
    }

  });

  return NotifyView;

});

define('core/js/notify',[
  'core/js/adapt',
  'core/js/collections/notifyPushCollection',
  'core/js/views/notifyView',
  'core/js/models/notifyModel'
], function(Adapt, NotifyPushCollection, NotifyView, NotifyModel) {

  var Notify = Backbone.Controller.extend({

    notifyPushes: null,

    _warnFirstOnly: true,
    _warn: true,
    _hasWarned: false,

    initialize: function() {
      this.notifyPushes = new NotifyPushCollection();
      this.listenTo(Adapt, {
        'notify:popup': this._deprecated.bind(this, 'popup'),
        'notify:alert': this._deprecated.bind(this, 'alert'),
        'notify:prompt': this._deprecated.bind(this, 'prompt'),
        'notify:push': this._deprecated.bind(this, 'push')
      });
    },

    _deprecated: function(type, notifyObject) {
      if (this._warn && (this._warnFirstOnly && !this._hasWarned)) {
        Adapt.log.warn('NOTIFY DEPRECATED: Adapt.trigger(\'notify:'+type+'\', notifyObject); is no longer supported, please use Adapt.notify.'+type+'(notifyObject);');
        this._hasWarned = true;
      }
      return this.create(notifyObject, { _type: type });
    },

    create: function(notifyObject, defaults) {
      notifyObject =_.defaults({}, notifyObject, defaults, {
        _type: 'popup',
        _isCancellable: true,
        _showCloseButton: true,
        _closeOnShadowClick: true,
      });

      if (notifyObject._type === 'push') {
        this.notifyPushes.push(notifyObject);
        return;
      }

      return new NotifyView({
        model: new NotifyModel(notifyObject)
      });
    },

    /**
     * Creates a 'popup' notify
     * @param {Object} notifyObject An object containing all the settings for the popup
     * @param {string} notifyObject.title Title of the popup
     * @param {string} notifyObject.body Body of the popup
     * @param {Boolean} [notifyObject._showCloseButton=true] If set to `false` the popup will not have a close button. The learner will still be able to dismiss the popup by clicking outside of it or by pressing the Esc key. This setting is typically used mainly for popups that have a subview (where the subview contains the close button)
     * @param {Boolean} [notifyObject._isCancellable=true] If set to `false` the learner will not be able to close the popup - use with caution!
     * @param {string} [notifyObject._classes] A class name or (space separated) list of class names you'd like to be applied to the popup's `<div>`
     * @param {Backbone.View} [notifyObject._view] Subview to display in the popup instead of the standard view
     */
    popup: function(notifyObject) {
      return this.create(notifyObject, { _type: 'popup' });
    },

    /**
     * Creates an 'alert' notify popup
     * @param {Object} notifyObject An object containing all the settings for the alert popup
     * @param {string} notifyObject.title Title of the alert popup
     * @param {string} notifyObject.body Body of the alert popup
     * @param {string} notifyObject.confirmText Label for the popup confirm button
     * @param {Boolean} [notifyObject._isCancellable=true] If set to `false` only the confirm button can be used to dismiss/close the popup
     * @param {Boolean} [notifyObject._showIcon=false] If set to `true` an 'alert' icon will be displayed in the popup
     * @param {string} [notifyObject._callbackEvent] Event to trigger when the confirm button is clicked
     * @param {string} [notifyObject._classes] A class name or (space separated) list of class names you'd like to be applied to the popup's `<div>`
     * @param {Backbone.View} [notifyObject._view] Subview to display in the popup instead of the standard view
     */
    alert: function(notifyObject) {
      return this.create(notifyObject, { _type: 'alert' });
    },

    /**
     * Creates a 'prompt dialog' notify popup
     * @param {Object} notifyObject An object containing all the settings for the prompt dialog
     * @param {string} notifyObject.title Title of the prompt
     * @param {string} notifyObject.body Body of the prompt
     * @param {Object[]} notifyObject._prompts Array of objects that each define a button (and associated callback event) that you want shown in the prompt
     * @param {string} notifyObject._prompts[].promptText Label for this button
     * @param {string} notifyObject._prompts[]._callbackEvent Event to be triggered when this button is clicked
     * @param {Boolean} [notifyObject._isCancellable=true] If set to `false` only the confirm button can be used to dismiss/close the prompt
     * @param {Boolean} [notifyObject._showIcon=true] If set to `true` a 'query' icon will be displayed in the popup
     * @param {string} [notifyObject._callbackEvent] Event to trigger when the confirm button is clicked
     * @param {string} [notifyObject._classes] A class name or (space separated) list of class names you'd like to be applied to the popup's `<div>`
     * @param {Backbone.View} [notifyObject._view] Subview to display in the popup instead of the standard view
     */
    prompt: function(notifyObject) {
      return this.create(notifyObject, { _type: 'prompt' });
    },

    /**
     * Creates a 'push notification'
     * @param {Object} notifyObject An object containing all the settings for the push notification
     * @param {string} notifyObject.title Title of the push notification
     * @param {string} notifyObject.body Body of the push notification
     * @param {Number} [notifyObject._timeout=3000] Length of time (in milliseconds) the notification should left on-screen before automatically fading away
     * @param {string} notifyObject._callbackEvent Event to be triggered if the learner clicks on the push notification (not triggered if they use the close button)
     * @param {string} [notifyObject._classes] A class name or (space separated) list of class names you'd like to be applied to the popup's `<div>`
     */
    push: function(notifyObject) {
      return this.create(notifyObject, { _type: 'push' });
    }

  });

  return (Adapt.notify = new Notify());

});

define('core/js/models/routerModel',[
  'core/js/adapt'
], function (Adapt) {

  var RouterModel = Backbone.Model.extend({

    defaults: {
      _canNavigate: true,
      _shouldNavigateFocus: true
    },

    lockedAttributes: {
      _canNavigate: false,
      _shouldNavigateFocus: false
    }

  });

  return RouterModel;

 });

define('core/js/views/adaptView',[
  'core/js/adapt'
], function(Adapt) {

  var AdaptView = Backbone.View.extend({

    attributes: function() {
      return {
        "data-adapt-id": this.model.get('_id')
      };
    },

    initialize: function() {
      this.listenTo(Adapt, 'remove', this.remove);
      this.listenTo(this.model, {
        'change:_isVisible': this.toggleVisibility,
        'change:_isHidden': this.toggleHidden,
        'change:_isComplete': this.onIsCompleteChange
      });
      this.model.set( {
        '_globals': Adapt.course.get('_globals'),
        '_isReady': false
      });
      this._isRemoved = false;

      if (Adapt.location._currentId === this.model.get('_id')) {
        Adapt.parentView = this;
      }

      this.preRender();
      this.render();
      this.setupOnScreenHandler();
    },

    preRender: function() {},

    postRender: function() {
      this.addChildren();
    },

    render: function() {
      Adapt.trigger(this.constructor.type + 'View:preRender', this);

      var data = this.model.toJSON();
      data.view = this;
      var template = Handlebars.templates[this.constructor.template];
      this.$el.html(template(data));

      Adapt.trigger(this.constructor.type + 'View:render', this);

      _.defer(function() {
        // don't call postRender after remove
        if(this._isRemoved) return;

        this.postRender();
        Adapt.trigger(this.constructor.type + 'View:postRender', this);
      }.bind(this));

      return this;
    },

    setupOnScreenHandler: function() {
      var onscreen = this.model.get('_onScreen');

      if (!onscreen || !onscreen._isEnabled) return;

      this.$el
        .addClass('has-animation')
        .addClass(onscreen._classes + '-before');

      this.$el.on('onscreen.adaptView', function (e, m) {

        if (!m.onscreen) return;

        var minVerticalInview = onscreen._percentInviewVertical || 33;

        if (m.percentInviewVertical < minVerticalInview) return;

        this.$el.addClass( onscreen._classes + '-after' || 'onscreen' ).off('onscreen.adaptView');

      }.bind(this));
    },

    addChildren: function() {
      var nthChild = 0;
      var children = this.model.getChildren();
      var models = children.models;
      this.childViews = {};
      for (var i = 0, len = models.length; i < len; i++) {
        var model = models[i];
        if (!model.get('_isAvailable')) continue;

        nthChild ++;
        model.set("_nthChild", nthChild);

        var ViewModelObject = this.constructor.childView || Adapt.componentStore[model.get("_component")];
        var ChildView = ViewModelObject.view || ViewModelObject;

        if (!ChildView) {
          throw 'The component \'' + models[i].attributes._id + '\'' +
          ' (\'' + models[i].attributes._component + '\')' +
          ' has not been installed, and so is not available in your project.';
        }

        var $parentContainer = this.$(this.constructor.childContainer);
        var childView = new ChildView({ model: model });

        this.childViews[model.get('_id')] = childView;

        $parentContainer.append(childView.$el);
      }
    },

    findDescendantViews: function(isParentFirst) {
      var descendants = [];
      this.childViews && _.each(this.childViews, function(view) {
        if (isParentFirst) descendants.push(view);
        var children = view.findDescendantViews && view.findDescendantViews(isParentFirst);
        if (children) descendants.push.apply(descendants, children);
        if (!isParentFirst) descendants.push(view);
      });
      return descendants;
    },

    setReadyStatus: function() {
      this.model.set('_isReady', true);
    },

    setCompletionStatus: function() {
      if (this.model.get('_isVisible')) {
        this.model.set({
          '_isComplete': true,
          '_isInteractionComplete': true
        });
      }
    },

    resetCompletionStatus: function(type) {
      if (!this.model.get("_canReset")) return;

      var descendantComponents = this.model.findDescendantModels('components');
      if (descendantComponents.length === 0) {
        this.model.reset(type);
      } else {
        _.each(descendantComponents, function(model) {
          model.reset(type);
        });
      }
    },

    preRemove: function() {},

    remove: function() {

      this.preRemove();
      this._isRemoved = true;

      Adapt.wait.for(function(end) {

        this.$el.off('onscreen.adaptView');
        this.model.setOnChildren('_isReady', false);
        this.model.set('_isReady', false);
        Backbone.View.prototype.remove.call(this);

        end();
      }.bind(this));

      return this;
    },

    setVisibility: function() {
      var visible = 'u-visibility-hidden';
      if (this.model.get('_isVisible')) {
        visible = '';
      }
      return visible;
    },

    toggleVisibility: function() {
      if (this.model.get('_isVisible')) {
        return this.$el.removeClass('u-visibility-hidden');
      }
      this.$el.addClass('u-visibility-hidden');
    },

    setHidden: function() {
      var hidden = '';
      if (this.model.get('_isHidden')) {
        hidden = 'u-display-none';
      }
      return hidden;
    },

    toggleHidden: function() {
      if (!this.model.get('_isHidden')) {
        return this.$el.removeClass('u-display-none');
      }
      this.$el.addClass('u-display-none');
    },

    onIsCompleteChange: function(model, isComplete){
      this.$el.toggleClass('is-complete', isComplete);
    },

    getChildViews: function() {
      return this.childViews;
    }

  },{
    className: ''
  });

  return AdaptView;

});

define('core/js/views/blockView',[
  'core/js/views/adaptView'
], function(AdaptView) {

  var BlockView = AdaptView.extend({

    className: function() {
      return [
        'block',
        this.model.get('_id'),
        this.model.get('_classes'),
        this.setVisibility(),
        this.setHidden(),
        (this.model.get('_isComplete') ? 'is-complete' : ''),
        (this.model.get('_isOptional') ? 'is-optional' : '')
      ].join(' ');
    }

  }, {
    childContainer: '.component__container',
    type: 'block',
    template: 'block'
  });

  return BlockView;

});

define('core/js/views/articleView',[
  'core/js/views/adaptView',
  'core/js/views/blockView'
], function(AdaptView, BlockView) {

  var ArticleView = AdaptView.extend({

    className: function() {
      return [
        'article',
        this.model.get('_id'),
        this.model.get('_classes'),
        this.setVisibility(),
        this.setHidden(),
        (this.model.get('_isComplete') ? 'is-complete' : ''),
        (this.model.get('_isOptional') ? 'is-optional' : '')
      ].join(' ');
    }

  }, {
    childContainer: '.block__container',
    childView: BlockView,
    type: 'article',
    template: 'article'
  });

  return ArticleView;

});

define('core/js/views/pageView',[
  'core/js/adapt',
  'core/js/views/adaptView',
  'core/js/views/articleView'
], function(Adapt, AdaptView, ArticleView) {

  var PageView = AdaptView.extend({

    attributes: function() {
      return AdaptView.resultExtend('attributes', {
        "aria-labelledby": this.model.get('_id')+"-heading",
        "role": "main"
      }, this);
    },

    className: function() {
      return [
        'page',
        this.model.get('_id'),
        this.model.get('_classes'),
        this.setVisibility(),
        (this.model.get('_isComplete') ? 'is-complete' : ''),
        (this.model.get('_isOptional') ? 'is-optional' : '')
      ].join(' ');
    },

    preRender: function() {
      $.inview.lock('pageView');
      this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;
      this.$el.css('opacity', 0);
      this.listenTo(this.model, 'change:_isReady', this.isReady);
    },

    isReady: function() {
      if (!this.model.get('_isReady')) return;

      var performIsReady = function() {
        $('.js-loading').hide();
        $(window).scrollTop(0);
        Adapt.trigger('pageView:ready', this);
        $.inview.unlock('pageView');
        var styleOptions = { opacity: 1 };
        if (this.disableAnimation) {
          this.$el.css(styleOptions);
          $.inview();
        } else {
          this.$el.velocity(styleOptions, {
            duration: 'fast',
            complete: function() {
              $.inview();
            }
          });
        }
        $(window).scroll();
      }.bind(this);

      Adapt.wait.queue(function() {
        _.defer(performIsReady);
      });
    },

    remove: function() {
      if (this.$pageLabel) {
        this.$pageLabel.remove();
      }
      AdaptView.prototype.remove.call(this);
    }

  }, {
    childContainer: '.article__container',
    childView: ArticleView,
    type: 'page',
    template: 'page'
  });

  return PageView;

});

define('core/js/router',[
  'core/js/adapt',
  'core/js/models/routerModel',
  'core/js/views/pageView',
  'core/js/startController'
], function(Adapt, RouterModel, PageView) {

  Adapt.router = new RouterModel(null, { reset: true });

  var Router = Backbone.Router.extend({

    // Flag to indicate if the router has tried to redirect to the current location.
    _isCircularNavigationInProgress: false,

    initialize: function() {
      this.showLoading();

      // Store #wrapper element and html to cache for later use.
      this.$wrapper = $('#wrapper');
      this.$html = $('html');

      Adapt.once('app:dataReady', function() {
        document.title = Adapt.course.get('title');
      });

      this.listenTo(Adapt, {
        'navigation:backButton': this.navigateToPreviousRoute,
        'navigation:homeButton': this.navigateToHomeRoute,
        'navigation:skipNavigation': this.skipNavigation,
        'navigation:parentButton': this.navigateToParent,
        'router:navigateTo': this.navigateToArguments
      });
    },

    routes: {
      '': 'handleRoute',
      'id/:id': 'handleRoute',
      ':pluginName(/*location)(/*action)': 'handleRoute'
    },

    pruneArguments: function(args) {
      var prunedArgs = _.toArray(args);

      if (prunedArgs.length !== 0) {
        // Remove any null arguments.
        prunedArgs = _.without(args, null);
      }

      return prunedArgs;
    },

    handleRoute: function() {
      var args = this.pruneArguments(arguments);

      if (Adapt.router.get('_canNavigate')) {
        // Reset _isCircularNavigationInProgress protection as code is allowed to navigate away.
        this._isCircularNavigationInProgress = false;
      }

      // Check if the current page is in the process of navigating to itself.
      // It will redirect to itself if the URL was changed and _canNavigate is false.
      if (this._isCircularNavigationInProgress === false) {
        // Trigger an event pre 'router:location' to allow extensions to stop routing.
        Adapt.trigger('router:navigate', args);
      }

      // Re-check as _canNavigate can be set to false on 'router:navigate' event.
      if (Adapt.router.get('_canNavigate')) {
        // Disable navigation whilst rendering.
        Adapt.router.set('_canNavigate', false, { pluginName: 'adapt' });

        switch (args.length) {
          case 1:
            // If only one parameter assume it's the ID.
            return this.handleId.apply(this, args);
          case 2:
            // If there are two parameters assume it's a plugin.
            return this.handlePluginRouter.apply(this, args);
          default:
            // Route to course home page.
            return this.handleCourse();
        }
      }

      if (this._isCircularNavigationInProgress) {
        // Navigation correction finished.
        // Router has successfully re-navigated to the current _id as the URL was changed
        // while _canNavigate: false
        this._isCircularNavigationInProgress = false;
        return;
      }

      // Cancel navigation to stay at the current location.
      this._isCircularNavigationInProgress = true;
      Adapt.trigger('router:navigationCancelled', args);

      // Reset URL to the current one.
      this.navigateToCurrentRoute(true);
    },

    handlePluginRouter: function(pluginName, location, action) {
      var pluginLocation = pluginName;

      if (location) {
        pluginLocation = pluginLocation + '-' +location;

        if (action) {
          pluginLocation = pluginLocation + '-' + action;
        }
      }

      this.updateLocation(pluginLocation, null, null, function() {
        Adapt.trigger('router:plugin:' + pluginName, pluginName, location, action);
        Adapt.trigger('router:plugin', pluginName, location, action);

        Adapt.router.set('_canNavigate', true, { pluginName: 'adapt' });
      });
    },

    handleCourse: function() {
      if (Adapt.course.has('_start')) {
        // Do not allow access to the menu when the start controller is enabled.
        var startController = Adapt.course.get('_start');

        if (startController._isEnabled == true && startController._isMenuDisabled == true) {
          return;
        }
      }

      this.showLoading();

      this.removeViews(_.bind(function() {
        Adapt.course.set('_isReady', false);

        this.setContentObjectToVisited(Adapt.course);

        this.updateLocation('course', null, null, _.bind(function() {
          Adapt.once('menuView:ready', function() {
            // Allow navigation.
            Adapt.router.set('_canNavigate', true, { pluginName: 'adapt' });
            this.handleNavigationFocus();
          }.bind(this));

          Adapt.trigger('router:menu', Adapt.course);
        }, this));
      }, this));
    },

    handleId: function(id) {
      var currentModel = Adapt.findById(id);
      var type = '';

      if (!currentModel) {
        Adapt.router.set('_canNavigate', true, { pluginName: 'adapt' });
        return;
      }

      type = currentModel.get('_type');

      switch (type) {
        case 'page':
        case 'menu':
          if (currentModel.get('_isLocked') && Adapt.config.get('_forceRouteLocking')) {
            Adapt.log.warn('Unable to navigate to locked id: ' + id);
            Adapt.router.set('_canNavigate', true, {pluginName: 'adapt'});
            if (Adapt.location._previousId === undefined) {
              return this.navigate('#/', { trigger: true, replace: true });
            } else {
              return Backbone.history.history.back();
            }
          } else {
            this.showLoading();
            this.removeViews(_.bind(function() {

              this.setContentObjectToVisited(currentModel);

              if (type == 'page') {
                var location = 'page-' + id;
                this.updateLocation(location, 'page', id, _.bind(function() {
                  Adapt.once('pageView:ready', function() {
                    // Allow navigation.
                    Adapt.router.set('_canNavigate', true, { pluginName: 'adapt' });
                    this.handleNavigationFocus();
                  }.bind(this));
                  Adapt.trigger('router:page', currentModel);
                  this.$wrapper.append(new PageView({ model: currentModel }).$el);
                }, this));
              } else {
                var location = 'menu-' + id;
                this.updateLocation(location, 'menu', id, _.bind(function() {
                  Adapt.once('menuView:ready', function() {
                    // Allow navigation.
                    Adapt.router.set('_canNavigate', true, { pluginName: 'adapt' });
                    this.handleNavigationFocus();
                  }.bind(this));
                  Adapt.trigger('router:menu', currentModel);
                }, this));
              }
            }, this));
          }
          break;
        default:
          // Allow navigation.
          Adapt.router.set('_canNavigate', true, { pluginName: 'adapt' });
          Adapt.navigateToElement('.' + id, { replace: true });
      }
    },

    removeViews: function(onComplete) {
      Adapt.remove();

      Adapt.wait.queue(onComplete);
    },

    showLoading: function() {
      $('.js-loading').show();
    },

    navigateToArguments: function(args) {
      args = this.pruneArguments(args);

      var options = { trigger: false, replace: false };

      switch (args.length) {
        case 0:
          this.navigate('#/', options);
          break;
        case 1:
          if (Adapt.findById(args[0])) {
            this.navigate('#/id/' + args[0], options);
          } else {
            this.navigate('#/' + args[0], options);
          }
          break;
        case 2:
        case 3:
          this.navigate('#/' + args.join('/'), options);
          break;
        default:
          Adapt.log.warn('DEPRECATED - use Backbone.history.navigate or ' +
            'window.location.href instead of Adapt.trigger("router:navigateTo")');
          this.handleRoute.apply(this, args);
      }
    },

    skipNavigation: function() {
      Adapt.a11y.focusFirst('.' + Adapt.location._contentType);
    },

    navigateToPreviousRoute: function(force) {
      // Sometimes a plugin might want to stop the default navigation.
      // Check whether default navigation has changed.
      if (Adapt.router.get('_canNavigate') || force) {
        if (!Adapt.location._currentId) {
          return Backbone.history.history.back();
        }
        if (Adapt.location._previousContentType === 'page' && Adapt.location._contentType === 'menu') {
          return this.navigateToParent();
        }
        if (Adapt.location._previousContentType === 'page') {
          return Backbone.history.history.back();
        }
        if (Adapt.location._currentLocation === 'course') {
          return;
        }
        this.navigateToParent();
      }
    },

    navigateToHomeRoute: function(force) {
      if (Adapt.router.get('_canNavigate') || force ) {
        this.navigate('#/', { trigger: true });
      }
    },

    navigateToCurrentRoute: function(force) {
      if (Adapt.router.get('_canNavigate') || force) {
        if (!Adapt.location._currentId) {
          return;
        }
        var currentId = Adapt.location._currentId;
        var route = (currentId === Adapt.course.get('_id')) ? '#/' : '#/id/' + currentId;
        this.navigate(route, { trigger: true, replace: true });
      }
    },

    navigateToParent: function(force) {
      if (Adapt.router.get('_canNavigate') || force) {
        var parentId = Adapt.contentObjects.findWhere({ _id: Adapt.location._currentId }).get('_parentId');
        var route = (parentId === Adapt.course.get('_id')) ? '#/' : '#/id/' + parentId;
        this.navigate(route, { trigger: true });
      }
    },

    setContentObjectToVisited: function(model) {
      model.set('_isVisited', true);
    },

    updateLocation: function(currentLocation, type, id, onComplete) {
      // Handles updating the location.
      Adapt.location._previousId = Adapt.location._currentId;
      Adapt.location._previousContentType = Adapt.location._contentType;

      if (currentLocation === 'course') {
        Adapt.location._currentId = Adapt.course.get('_id');
        Adapt.location._contentType = 'menu';
        Adapt.location._lastVisitedMenu = currentLocation;
      } else if (!type) {
        Adapt.location._currentId = null;
        Adapt.location._contentType = null;
      } else if (_.isString(id)) {
        Adapt.location._currentId = id;
        Adapt.location._contentType = type;

        if (type === 'menu') {
          Adapt.location._lastVisitedType = 'menu';
          Adapt.location._lastVisitedMenu = id;
        } else if (type === 'page') {
          Adapt.location._lastVisitedType = 'page';
          Adapt.location._lastVisitedPage = id;
        }
      }

      Adapt.location._currentLocation = currentLocation;

      var locationModel = Adapt.findById(id) || Adapt.course;
      var htmlClasses = locationModel && locationModel.get('_htmlClasses') || '';

      var classes = (Adapt.location._currentId) ? 'location-'
        + Adapt.location._contentType
        + ' location-id-'
        + Adapt.location._currentId :
        'location-' + Adapt.location._currentLocation;

      var previousClasses = Adapt.location._previousClasses;
      if (previousClasses) {
        this.$html.removeClass(previousClasses);
      }

      Adapt.location._previousClasses = classes + ' ' + htmlClasses;

      this.$html
          .addClass(classes)
          .addClass(htmlClasses)
          .attr('data-location', Adapt.location._currentLocation);

      this.$wrapper
          .removeClass()
          .addClass(classes)
          .attr('data-location', Adapt.location._currentLocation);

      this.setDocumentTitle();

      // Trigger event when location changes.
      Adapt.trigger('router:location', Adapt.location);

      Adapt.wait.queue(onComplete);
    },

    setDocumentTitle: function() {
      if (!Adapt.location._currentId) return;

      var currentModel = Adapt.findById(Adapt.location._currentId);
      var pageTitle = '';

      if (currentModel && currentModel.get('_type') !== 'course') {
        var currentTitle = currentModel.get('title');

        if (currentTitle) {
          pageTitle = ' | ' + currentTitle;
        }
      }

      var courseTitle = Adapt.course.get('title');
      var documentTitle = $('<div>' + courseTitle + pageTitle + '</div>').text();

      Adapt.once('pageView:ready menuView:ready', function() {
        document.title = documentTitle;
      });
    },

    handleNavigationFocus: function() {
      if (!Adapt.router.get("_shouldNavigateFocus")) return;
      // Body will be forced to accept focus to start the
      // screen reader reading the page.
      Adapt.a11y.focus('body');
    }
  });

  return new Router({ model: new Backbone.Model() });

});

define('core/js/helpers',[
  'handlebars',
  'core/js/adapt'
], function(Handlebars, Adapt){

  var defaultAriaLevels = {
    '_menu': 1,
    '_menuItem': 2,
    '_page': 1,
    '_article': 2,
    '_block': 3,
    '_component': 4,
    '_componentItem': 5,
    '_notify': 1
  };

  var helpers = {

    lowercase: function(text) {
      return text.toLowerCase();
    },

    capitalise:  function(text) {
      return text.charAt(0).toUpperCase() + text.slice(1);
    },

    inc: function(index) {
      return index+1;
    },

    dec: function(index) {
      return index-1;
    },

    odd: function (index) {
      return (index +1) % 2 === 0  ? 'even' : 'odd';
    },

    equals: function(value, text, block) {
      return helpers.compare.call(this, value, '==', text, block);
    },

    compare: function(value, operator, text, block) {
      // Comparison operators
      switch (operator) {
      case '===':
        if (value === text) return block.fn(this);
        break;
      case '=': case '==':
        if (value == text) return block.fn(this);
        break;
      case '>=':
        if (value >= text) return block.fn(this);
        break;
      case '<=':
        if (value <= text) return block.fn(this);
        break;
      case '>':
        if (value > text) return block.fn(this);
        break;
      case '<':
        if (value < text) return block.fn(this);
        break;
      }
      return block.inverse(this);
    },

    math: function(lvalue, operator, rvalue, options) {
      // Mathematical operators
      lvalue = parseFloat(lvalue);
      rvalue = parseFloat(rvalue);
      switch (operator) {
        case '+': return lvalue + rvalue;
        case '-': return lvalue - rvalue;
        case '*': return lvalue * rvalue;
        case '/': return lvalue / rvalue;
        case '%': return lvalue % rvalue;
      }
    },

    /**
     * Equivalent to:
     *  if (conditionA || conditionB)
     * @example
     * {{#any displayTitle body instruction}}
     * <div class='component__header {{_component}}__header'></div>
     * {{/any}}
     */
    any: function() {
      var args = Array.prototype.slice.call(arguments, 0, -1);
      var block = Array.prototype.slice.call(arguments, -1)[0];

      return _.any(args) ? block.fn(this) : block.inverse(this);
    },

    /**
     * Equivalent to:
     *  if (conditionA && conditionB)
     * @example
     * {{#all displayTitle body instruction}}
     * <div class='component__header {{_component}}__header'></div>
     * {{/all}}
     */
    all: function() {
      var args = Array.prototype.slice.call(arguments, 0, -1);
      var block = Array.prototype.slice.call(arguments, -1)[0];

      return _.all(args) ? block.fn(this) : block.inverse(this);
    },

    /**
     * Allow JSON to be a template i.e. you can use handlebars {{expressions}} within your JSON
     */
    compile: function(template, context) {
      if (!template) {
        return '';
      }
      if (template instanceof Object) template = template.toString();
      var data = this;
      if (context) {
        // choose between a passed argument context or the default handlebars helper context
        data = (!context.data || !context.data.root ? context : context.data.root);
      }
      return Handlebars.compile(template)(data);
    },

    /**
     * Allow JSON to be a template and accessible text
     */
    compile_a11y_text: function(template, context) {
      Adapt.a11y.log.deprecated('a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/');
      return helpers.compile.call(this, template, context);
    },

    /**
     * Allow JSON to be a template and normalized text
     */
    compile_a11y_normalize: function(template, context) {
      if (!template) {
        return '';
      }
      if (template instanceof Object) template = template.toString();
      return Handlebars.helpers.a11y_normalize.call(this, helpers.compile.call(this, template, context));
    },

    /**
     * Remove all html tags except styling tags
     */
    compile_a11y_remove_breaks: function(template, context) {
      if (!template) {
        return '';
      }
      return Handlebars.helpers.a11y_remove_breaks.call(this, helpers.compile.call(this, template, context));
    },

    /**
     * makes the _globals object in course.json available to a template
     */
    import_globals: function(context) {
      if (context.data.root._globals) {
        return '';
      }
      context.data.root._globals = Adapt.course.get('_globals');
      return '';
    },

    /**
     * makes the Adapt module data available to a template
     */
    import_adapt: function(context) {

      if (context.data.root.Adapt) {
        return;
      }
      var adapt = context.data.root.Adapt = {};

      var i, l, name;

      var directImport = ['config','course'];
      for (i = 0, l = directImport.length; i < l; i++) {
        name = directImport[i];
        // convert the model to a json object and add to the current context
        adapt[name] = Adapt[name].toJSON();
      }

      var indexedImport = ['contentObjects','articles','blocks','components'];
      for (i = 0, l = indexedImport.length; i < l; i++) {
        name = indexedImport[i];
        // convert the collection of models to an array of json objects
        var importArray = Adapt[name].toJSON();
        // convert the array of json models to an object indexed by id
        var importIndex = {};
        for (var i1 = 0, l1 = importArray.length; i1 < l1; i1++) {
          var item = importArray[i1];
          importIndex[item._id] = item;
        }
        // add the indexed object to the current context
        adapt[name] = importIndex;
      }

      return '';

    },

    /**
     * Allow components to fetch their component description.
     *
     * Creates an aria label using the `a11y_aria_label` helper containing
     * the component description specified in the
     * `_globals._component[componentName].ariaRegion`. This value is defined
     * in the `properties.schema:globals.ariaRegion`.
     *
     * @param {string} [override]
     * @returns {string}
     */
    component_description: function(override, context) {
      if (!this._isA11yComponentDescriptionEnabled) {
        return;
      }
      var isNotDefined = (!this._globals._components || !this._globals._components['_'+this._component]);
      if (isNotDefined) {
        return;
      }
      var hasOverride = (arguments.length > 1);
      var description;
      if (hasOverride) {
        description = override;
        description = helpers.compile(description, context);
      } else {
        description = this._globals._components['_'+this._component].ariaRegion;
        description = helpers.compile(description, override);
      }
      if (!description) {
        return;
      }
      return new Handlebars.SafeString('<div class="aria-label">'+description+'</div>');
    },

    a11y_text: function(text) {
      Adapt.a11y.log.deprecated('a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/');
      return text;
    },

    /**
     * Handlebars helper for `Adapt.a11y.normalize(htmls)`.
     *
     * @param {string} htmls Any htmls.
     * @returns {string}
     */
    a11y_normalize: function(htmls) {
      return Adapt.a11y.normalize.apply(Adapt.a11y, arguments);
    },

    /**
     * Handlebars helper for `Adapt.a11y.removeBreaks(htmls)`.
     *
     * @param {string} htmls Any htmls.
     * @returns {string}
     */
    a11y_remove_breaks: function(htmls) {
      return Adapt.a11y.removeBreaks.apply(Adapt.a11y, arguments);
    },

    /**
     * Creates a div styled with tiny, transparent text.
     * It it absolutely positioned.
     * The text is not visibly readable but is read by screen readers.
     *
     * @param {string} htmls
     * @returns {string}
     */
    a11y_aria_label: function(htmls) {
      var values = Array.prototype.slice.call(arguments, 0,-1);
      values = values.filter(Boolean);
      return new Handlebars.SafeString('<div class="aria-label">'+values.join(' ')+'</div>');
    },

    /**
     * Creates a div styled with tiny, transparent text.
     * It it relatively positioned.
     * The text is not visibly readable but is read by screen readers.
     *
     * @param {string} htmls Aria label texts.
     * @returns {string}
     */
    a11y_aria_label_relative: function(htmls) {
      var values = Array.prototype.slice.call(arguments, 0,-1);
      values = values.filter(Boolean);
      return new Handlebars.SafeString('<div class="aria-label relative">'+values.join(' ')+'</div>');
    },

    /**
     * Creates a div styled with tiny, transparent text and `role"=img"`.
     * It is used for representing an image to a screen reader user in an
     * order which cannot be represented in the DOM in a way that achieves the
     * styling objectives.
     * It it absolutely positioned.
     * The text is not visibly readable but is read by screen readers.
     *
     * @param {string} texts Aria label texts.
     * @returns {string}
     */
    a11y_aria_image: function(texts) {
      var values = Array.prototype.slice.call(arguments, 0,-1);
      values = values.filter(Boolean);
      return new Handlebars.SafeString('<div class="aria-label" role="img" aria-label="'+values.join(' ')+'"></div>');
    },

    /**
     * Returns an `a` tag which when receiving focus causes the focus to wrap
     * to the top of the readable document.
     *
     * @returns {string}
     */
    a11y_wrap_focus: function() {
      var cfg = Adapt.config.get('_accessibility');
      if (cfg._isPopupWrapFocusEnabled === false) return '';
      return new Handlebars.SafeString('<a class="a11y-focusguard a11y-ignore a11y-ignore-focus" role="presentation">&nbsp;</a>');
    },

    /**
     * Creates the attributes for a subject heading text. `role="heading"` and
     * `aria-level="#"`. It will use the `_ariaLevel` attribute from the current
     * context if specified, a number if given as the `levelOrType` parameter,
     * or a name from the configured aria levels hash.
     *
     * @param {number|string} levelOrType
     * @returns {string}
     */
    a11y_attrs_heading: function(levelOrType) {
      // get the global configuration from config.json
      var cfg = Adapt.config.get('_accessibility');
      // default level to use if nothing overrides it
      var level = 1;

      // first check to see if the Handlebars context has an override
      if (this._ariaLevel) {
        levelOrType = this._ariaLevel;
      }

      if (isNaN(levelOrType) === false) {
        // if a number is passed just use this
        level = levelOrType;
      } else if (_.isString(levelOrType)) {
        // if a string is passed check if it is defined in global configuration
        cfg._ariaLevels = cfg._ariaLevels || defaultAriaLevels;
        if (cfg._ariaLevels && cfg._ariaLevels['_'+levelOrType] !== undefined) {
          level = cfg._ariaLevels['_'+levelOrType];
        }
      }

      return new Handlebars.SafeString(' role="heading" aria-level="'+level+'" ');
    },

    a11y_attrs_tabbable: function() {
      Adapt.a11y.log.deprecated('a11y_attrs_tabbable should not be used. tabbable elements should be natively tabbable.');
      return new Handlebars.SafeString(' role="region" tabindex="0" ');
    },

    /**
     * Produce display text with alternative screen reader version.
     * @param {string} visible Text that will be displayed on screen
     * @param {string} alternatives Text that will be read by the screen reader (instead of what's displayed on screen)
     * @example {{a11y_alt_text '$5bn' 'five billion dollars'}} or {{a11y_alt_text 'Here are some bits to read' 'There are' _items.length 'items to read'}}
     */
    a11y_alt_text: function(visible, alternatives) {
      var values = Array.prototype.slice.call(arguments, 1, -1);
      values = values.filter(Boolean);
      return new Handlebars.SafeString('<span aria-hidden="true">'+visible+'</span><span class="aria-label">'+values.join(' ')+'</span>');
    }

  };

  // Compatibility references
  _.extend(helpers, {

    if_value_equals: function() {
      Adapt.a11y.log.deprecated('if_value_equals, use equals instead.');
      return helpers.equals.apply(this, arguments);
    },

    numbers: function() {
      Adapt.a11y.log.deprecated('numbers, use inc instead.');
      return helpers.inc.apply(this, arguments);
    },

    lowerCase: function() {
        Adapt.a11y.log.deprecated('lowerCase, use lowercase instead.');
        return helpers.lowercase.apply(this, arguments);
    }

  });

  for (var name in helpers) {
    if (!helpers.hasOwnProperty(name)) continue;
    Handlebars.registerHelper(name, helpers[name]);
  }

  return helpers;

});

define('core/js/scrolling',[
  'core/js/adapt'
], function(Adapt) {

  var Scrolling = Backbone.Controller.extend({

    $html: null,
    $app: null,
    isLegacyScrolling : true,

    initialize: function() {
      this._checkApp();
      Adapt.once('configModel:dataLoaded', this._loadConfig.bind(this));
    },

    _checkApp: function() {
      this.$html = $('html');
      this.$app = $('#app');
      if (this.$app.length) return;
      this.$app = $('<div id="app">');
      $('body').append(this.$app);
      this.$app.append($('#wrapper'));
      Adapt.log.warn("UPDATE - Your html file needs to have #app adding. See https://github.com/adaptlearning/adapt_framework/issues/2168");
    },

    _loadConfig: function() {
      var config = Adapt.config.get("_scrollingContainer");
      if (!config || !config._isEnabled) return;
      var limitTo = config._limitToSelector;
      var isIncluded = !limitTo || (this.$html.is(limitTo) || this.$html.hasClass(limitTo));
      if (!isIncluded) return;
      this.isLegacyScrolling = false;
      this._addStyling();
      this._fixJQuery();
      this._fixScrollTo();
      this._fixBrowser();
    },

    _addStyling: function() {
      this.$html.addClass("adapt-scrolling");
    },

    _fixJQuery: function() {
      var selectorScrollTop = $.fn.scrollTop;
      var $app = Adapt.scrolling.$app;
      $.fn.scrollTop = function() {
        if (this[0] === window || this[0] === document.body) {
          return selectorScrollTop.apply($app, arguments);
        }
        return selectorScrollTop.apply(this, arguments);
      };
      var selectorOffset = $.fn.offset;
      $.fn.offset = function(coordinates) {
        if (coordinates) {
          return selectorOffset.apply(this, arguments);
        }
        var $app = Adapt.scrolling.$app;
        var $element = this;
        var elementOffset = selectorOffset.call($element);
        var isCorrectedContainer = $element.parents().add($element).filter('html,body,#app').length;
        if (!isCorrectedContainer) {
          // Do not adjust the offset measurement as not in $app container and isn't html or body
          return elementOffset;
        }
        // Adjust measurement by scrolling and offset of $app container
        var scrollTop = parseInt($app.scrollTop());
        var scrollLeft = parseInt($app.scrollLeft());
        var appOffset = selectorOffset.call($app);
        elementOffset.top += (scrollTop - appOffset.top);
        elementOffset.left += (scrollLeft - appOffset.left);
        return elementOffset;
      };
    },

    _fixScrollTo: function() {
      var selectorScrollTo = $.fn.scrollTo;
      var scrollTo = $.scrollTo;
      var $app = Adapt.scrolling.$app;
      $.fn.scrollTo = function(target, duration, settings) {
        if (this[0] === window || this[0] === document.body) {
          return selectorScrollTo.apply($app, arguments);
        }
        return selectorScrollTo.apply(this, arguments);
      };
      $.scrollTo = function(target, duration, settings) {
        return selectorScrollTo.apply($app, arguments);
      };
      _.extend($.scrollTo, scrollTo);
    },

    _fixBrowser: function() {
      var app = Adapt.scrolling.$app[0];
      window.scrollTo = function(x, y) {
        app.scrollTop = y || 0;
        app.scrollLeft = x || 0;
      };
      var $window = $(window);
      this.$app.on("scroll", function() {
        $window.scroll();
      });
    }

  });

  Adapt.scrolling = new Scrolling();

  Adapt.scrollTo = function(selector, settings) {
    // Get the current location - this is set in the router
    var location = (Adapt.location._contentType) ?
      Adapt.location._contentType : Adapt.location._currentLocation;
    // Trigger initial scrollTo event
    Adapt.trigger(location+':scrollTo', selector);
    //Setup duration variable passed upon arguments
    var settings = (settings || {});
    var disableScrollToAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;
    if (disableScrollToAnimation) {
      settings.duration = 0;
    }
    else if (!settings.duration) {
      settings.duration = $.scrollTo.defaults.duration;
    }

    var offsetTop = 0;
    if (Adapt.scrolling.isLegacyScrolling) {
      offsetTop = -$('.nav').outerHeight();
      // prevent scroll issue when component description aria-label coincident with top of component
      if ($(selector).hasClass('component')) {
        offsetTop -= $(selector).find('.aria-label').height() || 0;
      }
    }

    if (!settings.offset) settings.offset = { top: offsetTop, left: 0 };
    if (settings.offset.top === undefined) settings.offset.top = offsetTop;
    if (settings.offset.left === undefined) settings.offset.left = 0;

    if (settings.offset.left === 0) settings.axis = "y";

    if (Adapt.get("_canScroll") !== false) {
      // Trigger scrollTo plugin
      $.scrollTo(selector, settings);
    }

    // Trigger an event after animation
    // 300 milliseconds added to make sure queue has finished
    _.delay(function() {
      Adapt.a11y.focusNext(selector);
      Adapt.trigger(location+':scrolledTo', selector);
    }, settings.duration+300);
  };

});

define('core/js/views/headingView',[
  'core/js/adapt'
], function(Adapt) {

  var HeadingView = Backbone.View.extend({

    initialize: function() {
      this.listenTo(Adapt, "remove", this.remove);
      this.listenTo(this.model, "change:_isComplete", this.render);
      this.render();
    },

    render: function() {
      var template = Handlebars.templates[this.constructor.template];
      var data = this.model.toJSON();
      var customHeadingType = this.$el.attr('data-a11y-heading-type');
      if (customHeadingType) data._type = customHeadingType;
      this.$el.html(template(data));
      this.checkCompletion();
    },

    checkCompletion: function() {
      var isComplete = this.model.get("_isComplete");
      this.$el
          .toggleClass("is-complete", isComplete)
          .toggleClass("is-incomplete", !isComplete);
    }

  }, {
    template: 'heading'
  });

  return HeadingView;

});

define('core/js/headings',[
  './adapt',
  './views/headingView'
], function(Adapt, HeadingView) {

  var Headings = Backbone.Controller.extend({

    initialize: function() {
      var types = [ 'menu', 'page', 'article', 'block', 'component' ];
      var eventNames = types.concat(['']).join('View:render ');
      this.listenTo(Adapt, eventNames, this.onViewRender);
    },

    onViewRender: function(view) {
      var $headingSeats = view.$('.js-heading');
      $headingSeats.each(function(index, el) {
        new HeadingView({
          el: el,
          model: view.model
        });
      });
    }

  });

  return new Headings();

});

define('core/js/views/navigationView',[
  'core/js/adapt'
], function(Adapt) {

  var NavigationView = Backbone.View.extend({

    className: "nav",

    initialize: function() {
      this.listenToOnce(Adapt, {
        'courseModel:dataLoading': this.remove
      });
      this.listenTo(Adapt, 'router:menu router:page', this.hideNavigationButton);
      this.template = "nav";
      this.preRender();
    },

    events: {
      'click [data-event]': 'triggerEvent'
    },

    attributes: {
      'role': 'navigation'
    },

    preRender: function() {
      Adapt.trigger('navigationView:preRender', this);
      this.render();
    },

    render: function() {
      var template = Handlebars.templates[this.template];
      this.$el.html(template(
        {
          _globals: Adapt.course.get("_globals"),
          _accessibility: Adapt.config.get("_accessibility")
        }
      )).insertBefore('#app');

      _.defer(_.bind(function() {
        Adapt.trigger('navigationView:postRender', this);
      }, this));

      return this;
    },

    triggerEvent: function(event) {
      event.preventDefault();
      var currentEvent = $(event.currentTarget).attr('data-event');
      Adapt.trigger('navigation:' + currentEvent);
    },

    hideNavigationButton: function(model) {
      if (model.get('_type') === "course") {
        $('.nav__back-btn, .nav__home-btn').addClass('u-display-none');
      } else {
        this.showNavigationButton();
      }
    },

    showNavigationButton: function() {
      $('.nav__back-btn, .nav__home-btn').removeClass('u-display-none');
    }

  });

  return NavigationView;

});

define('core/js/navigation',[
  'core/js/adapt',
  'core/js/views/navigationView'
], function(Adapt, NavigationView) {

  var NavigationController = Backbone.Controller.extend({

    initialize: function() {
      this.listenTo(Adapt, 'adapt:preInitialize', this.addNavigationBar);
    },

    addNavigationBar: function() {
      var adaptConfig = Adapt.course.get('_navigation');

      if (adaptConfig && adaptConfig._isDefaultNavigationDisabled) {
        Adapt.trigger('navigation:initialize');
        return;
      }

      Adapt.navigation = new NavigationView();// This should be triggered after 'app:dataReady' as plugins might want to manipulate the navigation
    }

  });

  return new NavigationController();

});

define('core/js/views/componentView',[
  'core/js/adapt',
  'core/js/views/adaptView'
], function(Adapt, AdaptView) {

  var ComponentView = AdaptView.extend({

    attributes: function() {
      if (!this.model.get("_isA11yRegionEnabled")) {
        return AdaptView.resultExtend('attributes', {}, this);
      }
      return AdaptView.resultExtend('attributes', {
        "aria-labelledby": this.model.get('_id')+"-heading",
        "role": "region"
      }, this);
    },

    className: function() {
      return [
        'component',
        this.model.get('_component').toLowerCase(),
        this.model.get('_id'),
        this.model.get('_classes'),
        this.setVisibility(),
        this.setHidden(),
        'is-' + this.model.get('_layout'),
        (this.model.get('_isComplete') ? 'is-complete' : ''),
        (this.model.get('_isOptional') ? 'is-optional' : '')
      ].join(' ');
    },

    renderState: function() {
      Adapt.log.warn("REMOVED - renderState is removed and moved to item title");
    },

    /**
     * Allows components that want to use inview for completion to set that up
     * @param {string} [inviewElementSelector] Allows to you to specify (via a selector) which DOM element to use for inview.
     * Defaults to `'.component__inner'` if not supplied.
     * @param {function} [callback] Allows you to specify what function is called when the component has been viewed, should
     * you want to perform additional checks before setting the component to completed - see adapt-contrib-assessmentResults
     * for an example. Defaults to `view.setCompletionStatus` if not specified.
     */
    setupInviewCompletion: function(inviewElementSelector, callback) {
      this.$inviewElement = this.$(inviewElementSelector || '.component__inner');
      this.inviewCallback = (callback || this.setCompletionStatus);

      this.$inviewElement.on('inview.componentView', this.onInview.bind(this));
    },

    removeInviewListener: function() {
      if (!this.$inviewElement) return;
      this.$inviewElement.off('inview.componentView');
      this.$inviewElement = null;
    },

    onInview: function(event, visible, visiblePartX, visiblePartY) {
      if (!visible) return;

      switch (visiblePartY) {
        case 'top':
          this.hasSeenTop = true;
          break;
        case 'bottom':
          this.hasSeenBottom = true;
          break;
        case 'both':
          this.hasSeenTop = this.hasSeenBottom = true;
      }

      if (!this.hasSeenTop || !this.hasSeenBottom) return;

      this.inviewCallback();

      if (this.model.get('_isComplete')) {
        this.removeInviewListener();
      }
    },

    postRender: function() {},

    remove: function() {
      this.removeInviewListener();

      AdaptView.prototype.remove.call(this);
    }

  }, {
    type:'component'
  });

  return ComponentView;

});

const { forEach } = require("underscore");

define('components/author-ilt-drag-image/js/ilt-drag-image',[
    'core/js/adapt',
    'core/js/views/componentView',
    'core/js/models/componentModel',
    'jquery'
], function(Adapt, ComponentView, ComponentModel, $) {
    'use strict';

    var DROP_TARGET_TEXT = '';

    var compView = ComponentView.extend({
        preRender: function () {
            this.model.preloadAssets = {
                images: []
            }
            var image = this.model.get('imageField');
            if(image) {
                this.model.preloadAssets.images.push(image);
            }
            
            if(Adapt.locale!==undefined){
                let langCode = Adapt.config.get('_activeLanguage');
                this.model.attributes.langData = Adapt.locale[langCode];
            } else {
                if(this.model.attributes.langData===undefined){
                    this.model.attributes.langData = {
                        "submit": "SUBMIT",
                        "questionHead": "Question:",
                        "instruction":"<p></p>",
                        "tryAgain": "Try again!",
                        "correctfeedback":"Correct.",
                        "incorrectfeedback":"Incorrect."
                    }
                }
            }

            this.model.attributes.matches = [];
            var selfAt = this.model;

            this.model.attributes.dragItems.forEach(function(v,i){
                selfAt.distractors.push(v.imageField);
            });
            
            this.model.attributes.itemTargetMatching.forEach(function(val,i){
                selfAt.attributes.matches.push(Object.assign({
                        "dragImage":selfAt.distractors[val.dragItemIndex]
                    }, selfAt.attributes.targetAreas[val.targetAreaIndex]));
                    selfAt.distractors[val.dragItemIndex] = null;
            });

            if(this.model.attributes.dragItems.length != this.model.attributes.itemTargetMatching.length){
                //distractors exist
                for(var dI=this.model.distractors.length-1;dI>=0;dI--){
                    if(this.model.distractors[dI]===null){
                        this.model.distractors.splice(dI,1);
                    }
                }
            }

            this.model.correctAnswers = this.model.attributes.matches.map(function (m) {
                return m["dragImage"];
            })
            this.model.correctAnswer = this.model.concatStringFromArray(this.model.correctAnswers);
            
            for(var i=0;i<this.model.attributes.matches.length;i++){
                this.model.labels.push(this.model.attributes.matches[i].dragImage);
            }

            this.model.submitBtnClickedBind = this.model.submitBtnClicked.bind(this.model);

            Adapt.on('cbtView:replay',this.model.replayFn.bind(this.model));
            Adapt.on('cbtView:blockLoaded',this.model.blockLoaded.bind(this.model));

            this.model.dragBinds = {
                start:this.model.dragBindsStart.bind(this.model),
                end:this.model.dragBindsEnd.bind(this.model),
                move:this.model.dragBindsMove.bind(this.model)
            }
        },
        postRender: function (){
            window.addEventListener('resize', this.model.windowResize.bind(this.model));

            var source = this.model.get('imageField');
            if(!source) {
                console.warn("No drag and drop image specified.");
                // this.model.authorCBTInit();
                this.setReadyStatus();
                this.setCompletionStatus();
                return;
            }
            var img = new Image();
            img.modelContext = this;
            img.onload = function (e) {
                this.modelContext.model.imgRes = {width:this.width,height:this.height};
                this.modelContext.model.authorCBTInit();
                this.modelContext.setReadyStatus();
            // }.bind(this);
            }
            img.onerror = function () {
                console.warn("Error while loading image ", source);
                // this.modelContext.model.authorCBTInit();
                this.modelContext.setReadyStatus();
                this.modelContext.setCompletionStatus();
            }.bind(this);
            img.src = source;
        }
    },{
        template: 'ilt-drag-image' // this is the hbs file in the templates directory that will be passed this.model.attributes
    });

    var compModel = ComponentModel.extend({

        initialize: function(){
            this.submitBtnClickedBind = null;
            this.preloadAssets = null;
            this.labels = [];
            this.distractors = [];
            this.wrongAttempts = 0;
            this.correctAnswers = [];
            this.correctAnswer = '';
        },

        authorCBTInit:function(){
            var submitBtn = $('.' + this.attributes._id + ' .ilt-drag-image-submitBtn')[0];
            submitBtn.addEventListener('click', this.submitBtnClickedBind);

            this.addDraggables();
            this.consistentSizes();
        },
        // setOptionSizeConstraints:function(){
        //     if(this.attributes.optionwidth && this.attributes.optionwidth!==undefined && this.attributes.optionwidth!==0){
        //         var imgProps = this.getImageProps();
        //         var optionWidth = (imgProps.scale*this.imgRes.width) * (this.attributes.optionwidth/100);
        //         var optionHeight = (imgProps.scale*this.imgRes.height) * (this.attributes.optionheight/100);
                
        //         $('.' + this.attributes._id + ' .ilt-drag-image-options').css('width',optionWidth+'px');
        //         $('.' + this.attributes._id + ' .ilt-drag-image-target, .' + this.attributes._id + ' .ilt-drag-image-option').each(function(){
        //             $(this).css('height',optionHeight+'px');
        //         });
        //     }
        // },
        replayFn:function (componentID) {
            if(componentID === this.get('_id')){
                this.wrongAttempts = 0;

                var initialHTML = Handlebars.templates['ilt-drag-image'];
                $('.'+this.attributes._id).empty('').html(initialHTML(this.attributes));

                this.authorCBTInit();
            }
        },
        blockLoaded:function (blockModel) {
          if(blockModel.attributes._children.models[0].get('_id') === this.get('_id')){
            this.replayFn(this.get('_id'));

            if(window.state && window.state._developerMode && window.state._developerMode === true){
                $('.' + this.attributes._id + ' .ilt-drag-image-image img').on('click',function(e){
                    
                    var imgProps = this.getImageProps();
                    var clickLeftPc = Math.round(((e.pageX-imgProps.leftOffset)/(imgProps.scale*this.imgRes.width)) * 10000)/100;
                    var clickTopPc = Math.round(((e.pageY-imgProps.topOffset)/(imgProps.scale*this.imgRes.height)) * 10000)/100;
                    if(clickLeftPc<=100 && clickLeftPc>=0 && clickTopPc<=100 && clickTopPc>=0){
                        Adapt.trigger("debugmessages:push", "Left: "+clickLeftPc+"%   Top: "+clickTopPc+"%");
                    }
                }.bind(this));
            }
          }
        },

        getImageProps(){
            var containerEl = $('.' + this.attributes._id + ' .ilt-drag-image-image img')
            var offset = containerEl.offset();

            var imgProps = {
                width:containerEl.width(),
                height:containerEl.height(),
                leftOffset:offset.left,
                topOffset:offset.top,
                scale:0,
            };
            var containerRatio = imgProps.width/imgProps.height;
            var imgRatio = this.imgRes.width/this.imgRes.height;
            
            var constraint = 'width';
            if(imgRatio===1){
                if(containerRatio>1){
                    constraint = 'height';
                }
            } else if(imgRatio>1){
                if(imgRatio>containerRatio){
                } else {
                    constraint = 'height';
                }
            } else {
                if(imgRatio<containerRatio){
                    constraint = 'height';
                }
            }
            if(constraint === 'width'){
                imgProps.scale = imgProps.width/this.imgRes.width;
            } else {
                imgProps.scale = imgProps.height/this.imgRes.height;
            }
            if(imgProps.scale>1){ imgProps.scale = 1; }
            imgProps.leftOffset += (imgProps.width-(imgProps.scale*this.imgRes.width))/2;
            imgProps.topOffset += (imgProps.height-(imgProps.scale*this.imgRes.height))/2;

            return imgProps;
        },


        windowResize:function(e){
            var currentBlock = window.state._currentBlock;
            var blockId = currentBlock && currentBlock.get('_id');
            if(this.get('_parentId') === blockId){
                var delay = 1000/25;
                this.resizeIntervalCount = 10;
                clearInterval(this.resizeInterval);
                this.resizeInterval = setInterval(function(){
                    --this.resizeIntervalCount;
                    if(this.resizeIntervalCount>0){
                        this.consistentSizes();
                    } else {
                        clearInterval(this.resizeInterval);
                    }
                }.bind(this),delay)
            }
        },

        repositionDropOptions: function(){
            $('.' + this.attributes._id + ' .ilt-drag-image-option').each(function(i,el){
                if($(el).data('ontgt')!==undefined){
                    this.optionToTarget(el, $('.ilt-drag-image-target[data-indx="'+$(el).data('ontgt')+'"]')[0]);
                } else {
                    this.optionOrigin(el, i);
                }
            }.bind(this));
        },

        consistentSizes:function(){
            // this.setOptionSizeConstraints();
            
            var elems = $('.'+this.attributes._id+' .ilt-drag-image-option, .'+this.attributes._id+' .ilt-drag-image-target');
            
            // make targets match the fixed width
            var optionWidth = parseFloat($('.'+this.attributes._id+' .ilt-drag-image-options').width());
            for(var elem of elems){
                var padding = parseFloat($(elem).outerWidth()) - parseFloat($(elem).width());
                $(elem).css('width',optionWidth-padding+'px');
            }

            for(var elem of elems){
                var padding = parseFloat($(elem).outerWidth()) - parseFloat($(elem).width());
                $(elem).css('width',optionWidth-padding+'px');
                
                // because height is fixed we reduce the font-size on each element to fit as necessary.
                // $(elem).css('font-size', '');
                // while(this.isOverflown(elem)){
                //     var currentSize = parseFloat($(elem).css('font-size'));
                //     $(elem).css('font-size', (currentSize*0.9)+'px');
                // }
                // $(elem).data('fontsize',parseFloat($(elem).css('font-size')));
            }

            this.positionDropTargets();
        },

        isOverflown:function(element) {
            return element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;
        },

        submitBtnClicked: function () {
            var correct = this.checkAnswers();
            var feedback = '';
            if (!correct) {
                this.wrongAttempts++;
                if (this.wrongAttempts > 1) {
                    feedback = this.attributes.langData.incorrectfeedback;
                    this.revealCorrectAnswer();
                    this.setCompletionStatus();
                    this.disableUI();
                } else {
                    feedback = this.attributes.langData.tryAgain;
                }
            } else {
                feedback = this.attributes.langData.correctfeedback;
                this.setCompletionStatus();
                this.disableUI();
            }

            $('.' + this.attributes._id + ' .ilt-drag-image-instrBar-text').html(feedback);
        },
        disableUI: function () {
            var submitBtn = $('.' + this.attributes._id + ' .ilt-drag-image-submitBtn')[0];
            submitBtn.setAttribute('disabled', true);
            submitBtn.removeEventListener("click", this.submitBtnClickedBind);

            this.removeListeners();
        },

        checkAnswers: function () {
            var answerStr = this.buildSentence();
            return answerStr === this.correctAnswer;
        },

        buildSentence:function(){
            var elemsArray = $('.'+this.attributes._id+' .ilt-drag-image-target');
            var strArray = [];

            elemsArray.each(function(){
                strArray.push($(this).find('img').attr('src'));
            })

            return this.concatStringFromArray(strArray);
        },

        revealCorrectAnswer: function () {
            this.clearTargets();
            //establish each items order by looking at the text content and referencing
            var elems = $('.' + this.attributes._id + ' .ilt-drag-image-option');
            var slots = $('.' + this.attributes._id + ' .ilt-drag-image-target');
            //get the correct index of each by comparing to _options
            for(var elem of elems){
                var index = this.getIndex(this.correctAnswers, elem.getElementsByTagName('img')[0].attributes.src);
                var tgtEl = slots[index];
                //set to offset of slot at same index
                var slotOffset = $(tgtEl).offset();
                var currentOffset = $(elem).offset();
                var currentAbsPos = {
                    left: parseInt($(elem).css('left')),
                    top: parseInt($(elem).css('top'))
                }
                var origOffset = {
                    left: currentOffset.left-currentAbsPos.left,
                    top: currentOffset.top-currentAbsPos.top
                }
                var newOffset = {
                    top: slotOffset.top - origOffset.top,
                    left: slotOffset.left - origOffset.left
                }
                this.animateToTarget(newOffset,elem,tgtEl);
            }
        },
        animateToTarget:function(newOffset,optEl, targtEl){
            $(optEl).animate(newOffset, 'slow', function(){
                this.optionToTarget(optEl, targtEl);
            }.bind(this));
        },
        addDraggables: function () {
            this.labels = this.shuffle(this.labels);

            var optionsElement = $('.' + this.attributes._id + ' .ilt-drag-image-options');
            var container = $('.' + this.attributes._id + ' .ilt-drag-image-image');
            
            this.labels.forEach(function (labelText, idx) {
                var option = '<div class="ilt-drag-image-option" data-indx="'+idx+'"><img src="' + labelText + '"/></div>';
                optionsElement.append(option);
            });
            var disIdxInit = this.labels.length;
            this.distractors.forEach(function (labelText, idx) {
                var option = '<div class="ilt-drag-image-option" data-indx="'+(disIdxInit+idx)+'"><img src="' + labelText + '"/></div>';
                optionsElement.append(option);
            });
            $('.' + this.attributes._id + ' .ilt-drag-image-option').each(function(i,el){
                this.optionOrigin(el, i);
            }.bind(this));
            this.attributes.matches.forEach(function (m, ti) {
                container.append('<div class="ilt-drag-image-target" data-indx="'+ti+'">' + DROP_TARGET_TEXT + '</div>');
            });

            this.addListeners();
        },

        resetTargets:function(answer){
            var answerSlotCollection = $('.'+this.attributes._id+' .ilt-drag-image-target');
            for (var slot of answerSlotCollection){
                if(slot.innerText === answer){
                    slot.innerHTML = DROP_TARGET_TEXT;
                    $(slot).css('font-size','');
                }
            }
        },
        clearTargets:function(){
            var answerSlotCollection = $('.'+this.attributes._id+' .ilt-drag-image-target');
            for (var slot of answerSlotCollection){
                slot.innerHTML = DROP_TARGET_TEXT;
            }
        },

        positionDropTargets: function () {
            //ref all drop spaces
            var elems = $('.' + this.attributes._id + ' .ilt-drag-image-target');
            var i = -1;


            //for each space
            for (var e of elems) {
                i++;
                var p = {
                    top: this.attributes.matches[i].pcTop,
                    left: this.attributes.matches[i].pcLeft
                }

                //if px not pc
                // p.top = this.attributes.matches[i].pcTop/this.imgRes.height;
                // p.left = this.attributes.matches[i].pcLeft/this.imgRes.width;

                var draggerWidth = $(e).outerWidth(true);
                var draggerHeight = $(e).outerHeight(true);
                
                var imgProps = this.getImageProps();

                imgProps.leftOffset += imgProps.scale*((p.left/100) * this.imgRes.width);
                imgProps.topOffset += imgProps.scale*((p.top/100) * this.imgRes.height);

                switch(this.attributes.matches[i].alignment){
                    case "top-left":
                        // imgProps.leftOffset
                        // imgProps.topOffset
                        break;
                    case "top-centre":
                        imgProps.leftOffset-=draggerWidth/2;
                        // imgProps.topOffset
                        break;
                    case "top-right":
                        imgProps.leftOffset-=draggerWidth;
                        // imgProps.topOffset
                        break;
                    case "centre-left":
                        // imgProps.leftOffset
                        imgProps.topOffset-=draggerHeight/2;
                        break;
                    case "centre-right":
                        imgProps.leftOffset-=draggerWidth;
                        imgProps.topOffset-=draggerHeight/2;
                        break;
                    case "lower-left":
                        // imgProps.leftOffset
                        imgProps.topOffset-=draggerHeight;
                        break;
                    case "lower-centre":
                        imgProps.leftOffset-=draggerWidth/2;
                        imgProps.topOffset-=draggerHeight;
                        break;
                    case "lower-right":
                        imgProps.leftOffset-=draggerWidth;
                        imgProps.topOffset-=draggerHeight;
                        break;
                    case "centre-centre":
                    default:
                        imgProps.leftOffset-=draggerWidth/2;
                        imgProps.topOffset-=draggerHeight/2;
                        break;
                }

                $(e).offset({
                    top: imgProps.topOffset,
                    left: imgProps.leftOffset
                })
            }
            this.repositionDropOptions();
        },

        shuffle: function (array) {
            let counter = array.length;

            // While there are elements in the array
            while (counter > 0) {
                // Pick a random index
                let index = Math.floor(Math.random() * counter);

                // Decrease counter by 1
                counter--;

                // And swap the last element with it
                let temp = array[counter];
                array[counter] = array[index];
                array[index] = temp;
            }

            return array;
        },

        // getIndex: function (elems, elem) {
        //     var index;
        //     for (var i in elems) {
        //         if (elems[i] === elem) {
        //             index = i;
        //             break;
        //         }
        //     }

        //     return index;
        // },

        concatStringFromArray: function (arr) {
            var str = "";
            for (var item of arr) {
                str += item
            }

            return str;
        },












        

        dragBinds:{},

        dragEvtMgr:{
            interval:0,
            beingDragged:null,
            initialPosition:{},
            initialCursorPosition:{},
            currentCursorPosition:{}
        },

        addListeners: function () {
            var elems = $('.' + this.attributes._id + ' .ilt-drag-image-option');
            for (var elem of elems) {
                elem.addEventListener('mouseenter', this.mouseEnterDragAnswer);
                elem.addEventListener('mouseleave', this.mouseLeaveDragAnswer);
                this.addDropListeners(elem);
            }
        },
        removeListeners: function () {
            var elems = $('.' + this.attributes._id + ' .ilt-drag-image-option');
            for (var elem of elems) {
                elem.removeEventListener('mouseenter', this.mouseEnterDragAnswer);
                elem.removeEventListener('mouseleave', this.mouseLeaveDragAnswer);
                this.removeDropListeners(elem);
            }
        },
        mouseEnterDragAnswer: function (e) {
            e.target.classList.add('mouse-enter-answer');
        },

        mouseLeaveDragAnswer: function (e) {
            e.target.classList.remove('mouse-enter-answer');
        },

        addDropListeners:function(el){
            el.addEventListener('touchstart',this.dragBinds.start);
            el.addEventListener('mousedown',this.dragBinds.start);
        },

        removeDropListeners:function(el){
            el.removeEventListener('touchstart',this.dragBinds.start);
            el.removeEventListener('mousedown',this.dragBinds.start);
        },

        dragBindsStart:function(e){
            this.dragEvtMgr.beingDragged = e.target;
            this.dragEvtMgr.initialPosition = {
                x:e.target.offsetLeft,
                y:e.target.offsetTop
            }
            if(e.type==='mousedown'){
                this.dragEvtMgr.initialCursorPosition = {
                    x:e.pageX,
                    y:e.pageY
                }
            } else {
                this.dragEvtMgr.initialCursorPosition = {
                    x:e.touches[0].pageX,
                    y:e.touches[0].pageY
                }
            }
            this.dragBindsMove(e);

            this.dragEvtMgr.beingDragged.classList.add('active');
            this.dragEvtMgr.beingDragged.style.zIndex = 100;

            document.body.addEventListener('touchmove',this.dragBinds.move);
            document.body.addEventListener('mousemove',this.dragBinds.move);

            document.body.addEventListener('touchend',this.dragBinds.end);
            document.body.addEventListener('mouseup',this.dragBinds.end);
            document.body.addEventListener('mouseleave', this.dragBinds.end);

            this.resetTargets(this.dragEvtMgr.beingDragged.innerText);
            this.dragEvtMgr.interval = setInterval(this.dragInterval.bind(this), (1000/30));
        },
        dragInterval:function(){
            if(this.dragEvtMgr.beingDragged){
                this.dragEvtMgr.beingDragged.style.top = (this.dragEvtMgr.initialPosition.y+this.dragEvtMgr.currentCursorPosition.y - this.dragEvtMgr.initialCursorPosition.y)+'px';
                this.dragEvtMgr.beingDragged.style.left = (this.dragEvtMgr.initialPosition.x+this.dragEvtMgr.currentCursorPosition.x - this.dragEvtMgr.initialCursorPosition.x)+'px';
            }
        },
        dragBindsMove:function(e){
            if(e.type==='mousemove' || e.type==='mousedown'){
                this.dragEvtMgr.currentCursorPosition.y = e.pageY;
                this.dragEvtMgr.currentCursorPosition.x = e.pageX;
            } else {
                this.dragEvtMgr.currentCursorPosition.y = e.touches[0].pageY;
                this.dragEvtMgr.currentCursorPosition.x = e.touches[0].pageX;
            }
        },
        dragBindsEnd:function(e){
            if(this.dragEvtMgr.beingDragged === null){  //e.type === 'mouseleave'
                return;
            }

            var dropTargets;
            if(document.elementsFromPoint){
                dropTargets = document.elementsFromPoint(this.dragEvtMgr.currentCursorPosition.x-window.scrollX,this.dragEvtMgr.currentCursorPosition.y-window.scrollY);
            } else if(document.msElementsFromPoint){
                dropTargets = document.msElementsFromPoint(this.dragEvtMgr.currentCursorPosition.x-window.scrollX,this.dragEvtMgr.currentCursorPosition.y-window.scrollY);
            } else {
                console.log('No document.elementsFromPoint support');
            }
            if(dropTargets){
                var tgtFound = null;
                for(var i=1;i<dropTargets.length;i++){
                    if(dropTargets[i] === this.dragEvtMgr.beingDragged){
                    } else if(dropTargets[i].className && dropTargets[i].className.indexOf('ilt-drag-image-option')>-1){
                        if($(dropTargets[i]).data('ontgt')!==undefined){
                            if($(this.dragEvtMgr.beingDragged).data('ontgt')!==undefined){
                                this.optionToTarget(dropTargets[i], $('.ilt-drag-image-target[data-indx="'+$(this.dragEvtMgr.beingDragged).data('ontgt')+'"]')[0]);
                            } else {
                                this.optionOrigin(dropTargets[i], dropTargets[i].dataset.indx);
                            }
                        }
                        // break;
                    } else if(dropTargets[i].className && dropTargets[i].className.indexOf('ilt-drag-image-target')>-1){
                        tgtFound = {
                            class:'ilt-drag-image-target',
                            el: dropTargets[i]
                        };
                        break;
                    } else if(dropTargets[i].className && dropTargets[i].className.indexOf('ilt-drag-image-options')>-1){
                        tgtFound = {
                            class:'ilt-drag-image-options',
                            el: dropTargets[i]
                        };
                        break;
                    }
                }
                if(tgtFound===null){
                    // return to initial position
                    this.optionOrigin(this.dragEvtMgr.beingDragged, this.dragEvtMgr.beingDragged.dataset.indx);
                } else {
                    //snap to position
                    if(tgtFound.class === 'ilt-drag-image-target' && tgtFound.el.textContent){
                        this.optionToTarget(this.dragEvtMgr.beingDragged, tgtFound.el);
                    } else {
                        this.optionOrigin(this.dragEvtMgr.beingDragged, this.dragEvtMgr.beingDragged.dataset.indx);
                    }
                }
            }
            
            this.clearDrag();
        },
        optionToTarget: function (optnEl, tgtEl){
            $(optnEl).data('ontgt', tgtEl.dataset.indx);
            if($(optnEl).data('fontsize')){
                $(tgtEl).css('font-size',$(optnEl).data('fontsize')+'px');
            }
            tgtEl.innerHTML = optnEl.innerHTML;
            // tgtEl.textContent = optnEl.textContent;
            $(optnEl).offset($(tgtEl).offset());
            $('.'+this.attributes._id+' .ilt-drag-image-submitBtn').prop('disabled', false);
        },
        optionOrigin: function(el,i){
            $(el).removeData('ontgt');
            var maxHeight = 0;
            $('.' + this.attributes._id + ' .ilt-drag-image-option').each(function(i,el){
                var thisHght = $(el).outerHeight(true);
                if(thisHght>maxHeight){ maxHeight = thisHght; }
            });
            $(el).css('left','');
            $(el).css('top', (i*(maxHeight*1.1))+'px');
        },
        clearDrag:function(){
            clearInterval(this.dragEvtMgr.interval);

            if(this.dragEvtMgr.beingDragged && this.dragEvtMgr.beingDragged.classList){
                this.dragEvtMgr.beingDragged.classList.remove('active');
            }
            if(this.dragEvtMgr.beingDragged && this.dragEvtMgr.beingDragged.style){
                this.dragEvtMgr.beingDragged.style.zIndex = 10;
            }

            this.dragEvtMgr.beingDragged = null;

            document.body.removeEventListener('touchmove',this.dragBinds.move);
            document.body.removeEventListener('mousemove',this.dragBinds.move);

            document.body.removeEventListener('touchend',this.dragBinds.end);
            document.body.removeEventListener('mouseup',this.dragBinds.end);
            document.body.removeEventListener('mouseleave', this.dragBinds.end);
        }
    });

    

    return Adapt.register('ilt-drag-image', {
        model: compModel,
        view: compView
    })
});

define('components/author-ilt-image/js/author-ilt-image',[
    'core/js/adapt',
    'core/js/views/componentView',
    'core/js/models/componentModel',
    'jquery'
], function (Adapt, ComponentView, ComponentModel, $) {
    'use strict';

    // https://github.com/adaptlearning/adapt-contrib-graphic

    var compView = ComponentView.extend({
        preRender: function () {
        },
        postRender: function () {
            var bbmvc = this;
            bbmvc.setReadyStatus(); // tells Author that the component is ready to interact with

            var imgEl = $('.' + this.model.attributes._id + ' div img');
            // await the image to load
            imgEl.one("load", function () {
                bbmvc.model.onDeviceResize();
                bbmvc.model.completeFunction();
            }).each(function () {
                if (this.complete) {
                    $(this).trigger('load');
                }
            });
        }
    }, {
        template: 'ilt-image' // this is the hbs file in the templates directory that will be passed this.model.attributes
    });

    var compModel = ComponentModel.extend({
        completeFunction: function () {
            console.log('complete');
            this.setCompletionStatus();  // tells Author that the component is complete
        },
        onDeviceResize: function () {
            console.log('device resized');
        }
    });



    return Adapt.register('ilt-image', {
        model: compModel,
        view: compView
    })
});

define('components/author-ilt-list/js/author-ilt-list',[
    'core/js/adapt',
    'core/js/views/componentView',
    'core/js/models/componentModel',
    'jquery'
], function(Adapt, ComponentView, ComponentModel, $) {
    'use strict';

    var compView = ComponentView.extend({
        preRender: function(){
        },
        postRender: function (){
            var container = $('.'+this.model.attributes._id+' .ilt-list-list');
            
            //setList
            var items = this.model.attributes['listItems'];
            var ol = document.createElement('ol');
            
            items.forEach(element => {
              var li = document.createElement('li');
                li.innerHTML = element.textArea;
                ol.appendChild(li);
            });
            
            ol = this.model.setStart(ol);
            ol = this.model.setStyle(ol);
            
            //list
            container[0].append(ol);
            
            this.setReadyStatus(); // tells Author that the component is ready to interact with
            this.model.completeFunction();
        }
    },{
        template: 'ilt-list' // this is the hbs file in the templates directory that will be passed this.model.attributes
    });

    var compModel = ComponentModel.extend({
        completeFunction:function(){
            this.setCompletionStatus();  // tells Author that the component is complete
        },

        setStart:function(ol){
          ol.setAttribute('start', this.attributes.startNum.toString());
          return ol;
        },
        
        setStyle:function(ol){
          switch (this.attributes.listType) {
            case 'Letters':
              ol.style['list-style-type'] = 'lower-alpha';
              break;
            case 'Bullets':
              ol.style['list-style-type'] = 'disc';
              break;
            case 'Numbers':
              ol.style['list-style-type'] = 'decimal';
              break;
            case 'Blank':
            default:
                ol.style['list-style-type'] = 'none';
                // ol.style['list-style-type'] = 'unset';
                break;
          }
          return ol;
        }
    });

    return Adapt.register('ilt-list', {
        model: compModel,
        view: compView
    })
});

define('components/author-ilt-mcq/js/author-ilt-mcq',[
    'core/js/adapt',
    'core/js/views/componentView',
    'core/js/models/componentModel',
    'jquery'
], function(Adapt, ComponentView, ComponentModel, $) {
    'use strict';


    //  repurpose author-ilt-mcq

    

    var compView = ComponentView.extend({
        preRender: function(){
            this.listenTo(Adapt, {
                'device:changed device:preResize device:resize device:postResize': this.model.onDeviceResize
            });


            
            if(Adapt.locale!==undefined){
                let langCode = Adapt.config.get('_activeLanguage');
                // let langCode = Adapt.course.get('_cbtTraining')._langCode;
                this.model.attributes.langData = Adapt.locale[langCode];
            } else {
                if(this.model.attributes.langData===undefined){
                    this.model.attributes.langData = {
                        "submit": "SUBMIT",
                        "questionHead": "Question:",
                        "instruction":"<p></p>",
                        "tryAgain": "Try again!",
                        "correctfeedback":"Correct.",
                        "incorrectfeedback":"Incorrect."
                    }
                }
            }

            
            this.model.ansClickBind = this.model.ansClick.bind(this.model);

            this.model.attributes.shuffAns = [];
            let tempArr = [];
            for(var i=0;i<this.model.attributes.answers.length;i++){
                tempArr.push(this.model.attributes.answers[i].answerText);
                if(this.model.attributes.answers[i].correct===true){
                    this.model.attributes.correctanswer.push(this.model.attributes.answers[i].answerText);
                }
            }
            for(var k=tempArr.length;k>0;k--){
                var ranInt = Math.round(( Math.random()*(tempArr.length) )-0.5);
                var remvd = tempArr.splice(ranInt, 1)[0];
                this.model.attributes.shuffAns.push('<span class="ilt-mcq-answerIndex">'+String.fromCharCode(64 + k)+'</span><span class="ilt-mcq-answer-text">'+remvd+'</span>');
            }
            this.model.attributes.shuffAns.reverse();

            // Adapt.on('cbtView:replay',this.model.replayFn.bind(this.model));
            // Adapt.on('cbtView:blockLoaded',this.model.blockLoaded.bind(this.model));
        },
        postRender: function (){
            this.model.authorCBTInit();
            this.setReadyStatus(); // tells Author that the component is ready to interact with
        }
    },{
        template: 'ilt-mcq' // this is the hbs file in the templates directory that will be passed this.model.attributes
    });

    var compModel = ComponentModel.extend({
        attempts:0,

        initialize:function(){
            this.attributes.correctanswer = [];
        },

        onDeviceResize:function(){
            console.log('device resized');
        },
        
        authorCBTInit:function(){
            var answers = $('.'+this.attributes._id+' .ilt-mcq-answer');
            for(var i=0;i<answers.length;i++){
                answers.eq(i)[0].addEventListener('click', this.ansClickBind);
            };
            
            $('.'+this.attributes._id+' .ilt-mcq-submitBtn')[0].addEventListener('click', this.sbtClick.bind(this));
            $('.'+this.attributes._id+' .ilt-mcq-submitBtn').prop('disabled', true).removeClass('ilt-mcq-Active');
        },
        // replayFn:function (componentID) {
        //     if(componentID === this.get('_id')){
        //         this.attempts = 0;

        //         var initialHTML = Handlebars.templates['ilt-mcq'];
        //         $('.'+this.attributes._id).empty('').html(initialHTML(this.attributes));

        //         this.authorCBTInit();
        //     }
        // },
        // blockLoaded:function (blockModel) {
        //   if(blockModel.attributes._children.models[0].get('_id') === this.get('_id')){
        //     this.replayFn(this.get('_id'));
        //   }
        // },
        checkAnswer:function(passedArr){
            if(passedArr.length !==this.attributes.correctanswer.length){
                this.failEvt();
            } else {
                var corrFound = 0;
                for(var i=0;i<this.attributes.correctanswer.length;i++){
                    var ansFound = false;
                    ansFor: for(var j=0;j<passedArr.length;j++){
                        if(passedArr[j] === this.attributes.correctanswer[i]){
                            ansFound = true;
                            ++corrFound;
                            passedArr.splice(j,1);
                            break ansFor;
                        }
                    }
                    if(ansFound===false){
                        corrFound = -1;
                        break;
                    }
                }
                if(passedArr.length===0 && corrFound === this.attributes.correctanswer.length){
                    this.successEvt();
                } else {
                    this.failEvt();
                }
            }
        },
        sbtClick:function(e){
            var selArr = [];
            $('.'+this.attributes._id+' .ilt-mcq-Selected .ilt-mcq-answer-text').each(function(u,tgt){
                selArr.push($(this).html());
            })
            this.checkAnswer(selArr);
        },

        successEvt:function(){
            $('.'+this.attributes._id+' .ilt-mcq-instrBar-text').html(this.attributes.langData.correctfeedback);
            this.disableAll();
        },
        failEvt:function(){
            ++this.attempts;
            if(this.attempts>=2){
                $('.'+this.attributes._id+' .ilt-mcq-instrBar-text').html(this.attributes.langData.incorrectfeedback);
                this.disableAll();
            } else {
                $('.'+this.attributes._id+' .ilt-mcq-instrBar-text').text(this.attributes.langData.tryAgain);
                
            }
        },

        disableAll:function(){
            var answers = $('.'+this.attributes._id+' .ilt-mcq-answer');
            for(var i=0;i<answers.length;i++){
                answers.eq(i).removeClass('ilt-mcq-Selected');
                answers.eq(i).removeClass('ilt-mcq-Active');
                answers.eq(i)[0].removeEventListener('click', this.ansClickBind);
                answers.eq(i).prop('disabled', true);
                
                for(var j=0;j<this.attributes.correctanswer.length;j++){
                    if(answers.eq(i).find('.ilt-mcq-answer-text').text() === this.attributes.correctanswer[j]){
                        $(answers.eq(i)).addClass("ilt-mcq-answerCorrect");
                    }
                }
            };
            $('.'+this.attributes._id+' .ilt-mcq-answerButtons').addClass('ilt-mcq-Complete');
            $('.'+this.attributes._id+' .ilt-mcq-submitBtn').prop('disabled', true).removeClass('ilt-mcq-Active');

            
            this.setCompletionStatus();
        },

        ansClick:function(e){
            $('.'+this.attributes._id+' .ilt-mcq-submitBtn').prop('disabled', false).addClass('ilt-mcq-Active');
            if(this.attributes.correctanswer.length === 1){
                $('.'+this.attributes._id+' .ilt-mcq-Selected').removeClass('ilt-mcq-Selected');
            }
            $(e.currentTarget).toggleClass('ilt-mcq-Selected');
        }
    });

    

    return Adapt.register('ilt-mcq', {
        model: compModel,
        view: compView
    })
});

define('components/author-ilt-s1000d/js/author-ilt-s1000d',[
    'core/js/adapt',
    'core/js/views/componentView',
    'core/js/models/componentModel',
    'jquery'
], function(Adapt, ComponentView, ComponentModel, $) {
    'use strict';

    var compView = ComponentView.extend({
        preRender: function(){
            this.listenTo(Adapt, {
                'device:changed device:preResize device:resize device:postResize': this.model.onDeviceResize
            });
        },
        postRender: function (){
            this.setReadyStatus(); // tells Author that the component is ready to interact with
            this.model.completeFunction();
        }
    },{
        template: 'ilt-s1000d' // this is the hbs file in the templates directory that will be passed this.model.attributes
    });

    var compModel = ComponentModel.extend({
        completeFunction:function(){
            this.setCompletionStatus();  // tells Author that the component is complete
        },
        onDeviceResize:function(){
        }
    });

    

    return Adapt.register('ilt-s1000d', {
        model: compModel,
        view: compView
    })
});

define('extensions/author-ispring-training/js/models/mobxState.js',["core/js/adapt", "libraries/mobx"], function (Adapt, mobx) {
  var startBlock = new Backbone.Model({
    _id: "START_BLOCK",
  });
  var endBlock = new Backbone.Model({
    _id: "END_BLOCK",
  });
  function isFastPreview () {
    return window.name === "fast-preview" || opener && opener.name === "fast-preview";
  };

  var currentBlockIndex = isFastPreview() ? 0 : -1;

  function MobxState() {
    
    return mobx.observable({
      previousBlockIndex: null,
      currentBlockIndex: currentBlockIndex,
      get pages() {
        return Adapt.contentObjects.models;
      },
      get articles() {
        return Adapt.articles.models;
      },
      get blocks() {
        return Adapt.blocks.models;
      },

      blockByIndex: function (index) {
        var blockLength = this.blocks.length;
        if (index === -1) {
          return startBlock;
        }
        if (index === blockLength) {
          return endBlock;
        }
        return this.blocks[index];
      },

      get components() {
        return Adapt.components.models;
      },
      get previousArticle() {
        var block = this.previousBlock;
        return block && block.getParent();
      },
      get previousBlock() {
        var blocks = this.blocks;
        var block = blocks[this.previousBlockIndex];
        return block;
      },
      get previousComponents() {
        var block = this.previousBlock;
        return block && block.getChildren();
      },
      get currentArticle() {
        var block = this.currentBlock;
        return block && block.getParent();
      },
      get currentBlock() {
        var blocks = this.blocks;
        var block = blocks[this.currentBlockIndex];
        return block;
      },
      get currentComponents() {
        var block = this.currentBlock;
        return block && block.getChildren();
      },

      get firstPageId() {
        var pages = this.pages;
        var page = pages[0];
        return page && page.get("_id");
      },

      findPresentationComponents: function (components) {
        return components.filter(this.isComponentForPresenation.bind(this));
      },
      findInstructorComponents: function (components) {
        return components.filter(this.isComponentForInstructor.bind(this));
      },
      isComponentForPresenation: function (component) {
        return true;
      },
      isComponentForInstructor: function (component) {
        //var metadata = component.get('__metadata');

        var output = component.get("output");
        if (!output) return;

        var isForInstructor = !!(output && output.iltSettings.iltInstructor);
        return isForInstructor;
      },
    });
  }
  return MobxState;
});

define('extensions/author-ispring-training/js/views/iltInstructorView.js',["core/js/adapt", "libraries/mobx"], function (Adapt, mobx) {
  async function readFile(file) {
    return new Promise((resolve, reject) => {
      const fileReader = new FileReader();
      fileReader.onload = (event) => resolve(JSON.parse(event.target.result));
      fileReader.onerror = (error) => reject(error);
      fileReader.readAsText(file);
    });
  }

  function getLocalNotesAccessor() {
    return "slides-" + Adapt.config.get("_id");
  }

  var ILTInstructorView = Backbone.View.extend({
    // Selectors for global elements
    globalElements: {
      wrapper: "#wrapper",
      app: "#app",
    },

    wasPresentationWindowLaunchedBefore: false,

    // Backbone constructor fn
    initialize: function () {
      this.stateManager = Adapt.stateManager;
      this.state = this.stateManager.state;
      this.setupTemplate();
      this.setupReactions();
    },

    evs: {
      WB_NEXT: "WB_NEXT",
      WB_BACK: "WB_BACK",
      WB_JS: "WB_JS",
      WB_RESET: "WB_RESET",
      WB_FS: "WB_FS",
      WB_EFS: "WB_EFS",
    },

    // Setup Instructor Window Template
    setupTemplate: function () {
      $(this.globalElements.wrapper).hide();
      $(this.globalElements.app).append(
        Handlebars.templates["instructorWindow"]()
      );
      this.handleThumbStrip();
      this.windowControls.forEach(
        function (control) {
          $(control.selector).on(control.event, control.callback.bind(this));
        }.bind(this)
      );

      var childEvs = {
        WB_NEXT: this.onPresentationNextClicked.bind(this),
        WB_BACK: this.onPresentationBackClicked.bind(this),
      };

      window.addEventListener(
        "message",
        function (event) {
          var eventHandler = childEvs[event.data.label];
          eventHandler && eventHandler();
        }.bind(this)
      );

      Adapt.on(
        "iltInstructor:slidesNotesLoaded",
        function () {
          this.renderSlideNotes();
        }.bind(this)
      );

      this.listenTo(Adapt, {
        "device:changed": this.onDeviceResize,
      });
    },

    onDeviceResize: function () {
      this.handleThumbStrip();
    },

    handleThumbStrip: function () {
      var height = $(".footStick").offset().top - $("#launchCtrl").offset().top;
      $(".thumbStrip").css("height", height + "px");
    },

    renderSlideNotes: function () {
      var accessor = getLocalNotesAccessor();
      var notes = localStorage.getItem(accessor);
      try {
        var parsed = JSON.parse(notes);
        var currentSlideIndex = (this.state.currentBlockIndex) + 1;
        var data = parsed[currentSlideIndex];
        var message = data && data.message;
        if (message) {
          $("#addlNotesDiv").html(message);
        }
      } catch (error) {
        localStorage.setItem(accessor, JSON.stringify({}));
      }
    },

    onPresentationBackClicked: function () {
      this.prevBlock();
    },

    onPresentationNextClicked: function () {
      this.nextBlock();
    },

    // Setup Mobx reaction to state properties
    setupReactions: function () {
      mobx.reaction(
        this.bindMobxCurrentBlockIndex.bind(this),
        this.reactToCurrentBlockIndex.bind(this)
      );
    },

    bindMobxCurrentBlockIndex: function () {
      return this.state.currentBlockIndex;
    },

    reactToCurrentBlockIndex: function () {
      var blockIndex = this.state.currentBlockIndex;
      var block = this.state.blockByIndex(blockIndex);
      this.setupBlockForInstructor(block);
      this.sendChildWinEvent(this.evs.WB_JS, blockIndex);
      this.renderSlideNotes();
    },

    setupBlockForInstructor: function (block) {
      var blockId = block.get("_id");
      $("#notesDiv").html(null);

      if (["START_BLOCK", "END_BLOCK"].includes(blockId)) {
        var title =
          Adapt.course.get("displayTitle") || Adapt.course.get("title");
        var prefix = blockId === "START_BLOCK" ? "First Slide" : "Last Slide";
        $("#slideTitle").html("<div>" + prefix + " " + title + "</div>");
        return;
      }

      if (blockId === "END_BLOCK") {
        console.log("render endblock");
        return;
      }

      $("#slideTitle").html(block.get("title"));
      var comps = this.state.findInstructorComponents(block.getChildren());
      $("#notesDiv").hide();
      $("#notesDiv").html(null);
      comps.forEach(function (comp) {
        $("#notesDiv").append(comp.get("textAreaField"));
      });

      $("#notesDiv").show();
    },

    isPresWinOpen: function () {
      var win = this.stateManager.childWindow;
      return win && !win.closed;
    },

    changeBlockIndexState: function (newIndex) {
      this.state.previousBlockIndex = this.state.currentBlockIndex;
      this.state.currentBlockIndex = newIndex;
      var block = this.state.blockByIndex(newIndex);
      this.selectThumb(block.get("_id"));
    },

    sendChildWinEvent: function (label, value) {
      var childWindow = this.stateManager.childWindow;
      if (!childWindow) return;
      childWindow.postMessage({ label: label, value: value }, "*");
    },

    prevBlock: function () {
      if (!this.isPresWinOpen()) {
        return;
      }
      var newIndex = this.state.currentBlockIndex - 1;
      if (newIndex >= -1) {
        this.changeBlockIndexState(newIndex);
        this.sendChildWinEvent(this.evs.WB_BACK, newIndex);
      }
    },

    nextBlock: function () {
      if (!this.isPresWinOpen()) {
        return;
      }
      var isNotLast = this.state.blocks.length !== this.state.currentBlockIndex;
      var newIndex = this.state.currentBlockIndex + 1;
      if (isNotLast) {
        this.changeBlockIndexState(newIndex);
        this.sendChildWinEvent(this.evs.WB_NEXT, newIndex);
      }
    },

    _launchPresentationWin: function () {
      if (!this.isPresWinOpen()) {
        this.stateManager.childWindow = window.open(
          window.location.href + "#/" + this.state.firstPageId,
          "contntWdw",
          "left=0,top=0,width=1280,height=720"
        );
      } else {
        this.stateManager.childWindow.close(); // not working
        this.stateManager.childWindow = null;
      }

      if (!this.wasPresentationWindowLaunchedBefore) {
        this.handleFirstLaunch();
      }
    },

    handleFirstLaunch: function () {
      this.wasPresentationWindowLaunchedBefore = true;
      var blockIndex = this.state.currentBlockIndex
      var block = this.state.blockByIndex(blockIndex);
      this.setupBlockForInstructor(block);
      this.renderSlideNotes();
      this.renderThumbs();
      this.selectThumb(block.get("_id"));
    },

    selectThumb: function (blockId) {
      var targetId = "thumb_" + blockId;
      if (["START_BLOCK", "END_BLOCK"].includes(blockId)) {
        targetId = blockId;
      }
      $(".lh_thumb_selected").removeClass("lh_thumb_selected");
      // $('li[data-blockid="' + blockId + '"').addClass("lh_thumb_selected");
      var toHighlight = document.getElementById(targetId);
      if (toHighlight) {
        toHighlight.classList.add("lh_thumb_selected");
        toHighlight.parentNode.parentNode.scrollTop =
          toHighlight.offsetTop -
          toHighlight.parentNode.offsetTop -
          (document.getElementById("slideTitle").offsetTop -
            document.getElementById("slideTitle").parentNode
              .offsetTop) /*- (toHighlight.parentNode.parentNode.offsetHeight/3)*/;
      }
    },

    restartBlockIndex: function () {
      if (!this.isPresWinOpen()) {
        return;
      }
      var newIndex = 0;
      this.changeBlockIndexState(newIndex);
      this.sendChildWinEvent(this.evs.WB_RESET, newIndex);
    },

    setActiveThumb: function (event) {
      var blockIndex = $(event.target).data("blockindex");
      var blockId = $(event.target).data("blockid");
      this.state.currentBlockIndex = Number(blockIndex);
      this.selectThumb(blockId);
    },

    _createThumbImg: function (options) {
      var thumbImg = document.createElement("img");
      thumbImg.src = options.src;
      thumbImg.id = options.id;
      thumbImg.setAttribute("data-blockid", options.blockId);
      thumbImg.setAttribute("data-blockindex", options.index);
      return thumbImg;
    },

    _createThumbLi: function (options) {
      var thumbList = document.getElementById("thumbList");
      var thumbImg = this._createThumbImg({
        index: options.index,
        blockId: options.blockId,
        src: options.src,
        id: options.id,
      });
      var thumbLi = document.createElement("li");
      thumbLi.classList.add("splide__slide");
      thumbLi.appendChild(thumbImg);
      thumbLi.id = options.id;
      thumbLi.setAttribute("data-blockid", options.blockId);
      thumbLi.setAttribute("data-blockindex", options.index);
      thumbLi.addEventListener("click", this.setActiveThumb.bind(this));
      thumbList.appendChild(thumbLi);
    },

    renderThumbs: function () {
      this._createThumbLi({
        index: -1,
        blockId: "START_BLOCK",
        src: "assets/start.png",
        id: "START_BLOCK",
      });
      var blocks = this.state.blocks;
      for (var i = 0; i < blocks.length; i++) {
        var block = blocks[i];
        var blockId = block.get("_id");
        this._createThumbLi({
          index: i,
          blockId: blockId,
          src: "course/en/assets/thumbs/" + blockId + ".png",
          id: "thumb_" + blockId,
        });
      }
      this._createThumbLi({
        index: blocks.length,
        blockId: "END_BLOCK",
        src: "assets/end.png",
        id: "END_BLOCK",
      });
    },

    // EventListener Bindings
    windowControls: [
      {
        selector: "#launchCtrl",
        event: "click",
        callback: function () {
          this._launchPresentationWin();
        },
      },
      {
        selector: "#previousCtrl",
        event: "click",
        callback: function () {
          this.prevBlock();
        },
      },
      {
        selector: "#nextCtrl",
        event: "click",
        callback: function () {
          this.nextBlock();
        },
      },
      {
        selector: "#restartCtrl",
        event: "click",
        callback: function () {
          this.restartBlockIndex();
        },
      },
      {
        selector: "#inputFile",
        event: "change",
        callback: async function (event) {
          var uploadedFile = event.target.files[0];
          var data = await readFile(uploadedFile);
          document.querySelector("#inputFile").value = "";
          var key = getLocalNotesAccessor();
          localStorage.setItem(key, JSON.stringify(data));
          Adapt.trigger("iltInstructor:slidesNotesLoaded");
        },
      },
    ],
  });

  return ILTInstructorView;
});

define('extensions/author-ispring-training/js/views/iltPresentationView.js',["core/js/adapt", "libraries/mobx"], function (Adapt, mobx) {
  var ILTPresentationView = Backbone.View.extend({
    globalElements: {
      wrapper: "#wrapper",
      app: "#app",
    },

    handlers: {
      instructor: {
        jumpTo: "iltInstructor:jumpToSlide",
      },
      adapt: {
        pageReady: "pageView:ready",
        menuReady: "menuView:ready",
        routerMenu: "router:menu",
        routerPage: "router:page",
      },
    },

    setState: function () {
      var isDoubleScreen = window.name === "contntWdw";
      if (isDoubleScreen) {
        this.state = opener.Adapt.stateManager.state;
      }
    },

    initialize: function () {
      this.setState();
      this.setupTemplate();

      this.evs = {
        WB_NEXT: this.next.bind(this),
        WB_BACK: this.back.bind(this),
        WB_JS: this.jumpTo.bind(this),
        WB_RESET: this.reset.bind(this),
        WB_FS: this.enterFullScreen.bind(this),
        WB_EFS: this.exitFullScreen.bind(this),
      };

      window.addEventListener(
        "message",
        function (event) {
          var eventHandler = this.evs[event.data.label];
          eventHandler && eventHandler(event.data);
        }.bind(this)
      );
    },


    centerWindow: function () {
      $("body").css("display", "flex");
      $("body").css("flex-direction", "column");
      $("body").css("justify-content", "center");
    },

    /**
     * Mount Handlebars Template
     */
    setupTemplate: function () {
      this.centerWindow();

      var globalElements = this.globalElements;
      $(globalElements.wrapper).hide();
      var currentBlockIndex = Adapt.stateManager.state.currentBlockIndex + 1;

      $(globalElements.app).append(
        Handlebars.templates["presentationWindow"]({
          currentBlockIndex: currentBlockIndex,
        })
      );
      this.setupILTEvents();
      $("#presentationWindow__startBlock").append(
        Handlebars.templates["ispringBlockStart"]()
      );
      $("#presentationWindow__endBlock").append(
        Handlebars.templates["ispringBlockEnd"]()
      );

      $(".presentationWindow__inner__content__center").on("click", function () {
        opener.postMessage({ label: "WB_NEXT" });
      });
      $("#presentationWindow__startBlock").on("click", function () {
        opener.postMessage({ label: "WB_NEXT" });
      });

      $("#prevCtrlL").on("click", function () {
        opener.postMessage({ label: "WB_BACK" });
      });
      
      this.listenTo(Adapt, {
        "device:changed": this.onDeviceResize,
      });
    },


    onDeviceResize: function() {
      var h = 1;
      var w = 1;
    },

    next: function (data) {
      this.goToBlock(data.value);
    },
    back: function (data) {
      this.goToBlock(data.value);
    },
    jumpTo: function (data) {
      this.goToBlock(data.value);
    },
    reset: function (data) {
      this.goToBlock(data.value);
    },
    enterFullScreen: function () {
      var element = document.querySelector("#container");
      element.requestFullscreen().then(function () {});
    },
    exitFullScreen: function () {
      document.exitFullscreen().then(function () {
        // element has exited fullscreen mode
      });
    },

    goToBlock: function (blockIndex) {
      var block = Adapt.stateManager.state.blockByIndex(blockIndex);
      this.loadSlideIndex(blockIndex);
      this.loadBlockView(block);
    },
    /**
     * Load content when page are rendered
     * (when hash route changes it triggers pageRender events)
     */
    loadContentOnPageRender: function () {
      $(".article").hide();
      $(".block").hide();
      $(".component").hide();
      this.goToBlock(Adapt.stateManager.state.currentBlockIndex);
    },

    setupILTEvents: function () {
      var instructor = this.handlers.instructor;
      var adapt = this.handlers.adapt;

      Adapt.on({
        [adapt.pageReady]: this.loadContentOnPageRender.bind(this),
      });

      $("#fullScreenCtrl").on("click", function () {
        var element = document.querySelector(".presentationWindow__inner");
        element.requestFullscreen().then(function () {});
      });

      $(".presentationWindow__inner").on("fullscreenchange", function () {
        var display = $("#fullScreenCtrl").css("display");
        $("#fullScreenCtrl").css(
          "display",
          display === "none" ? "block" : "none"
        );
      });
    },

    renderBlock: function (currentBlock) {
      var id = currentBlock.get("_id");
      if (["START_BLOCK", "END_BLOCK"].includes(id)) {
        return;
      }
      var content = $(".presentationWindow__inner__content__center").first();
      var currentArticle = currentBlock.getParent();

      var componentsInView = currentBlock
        .getChildren()
        .filter(this.isILTPresentationComponent);

      componentsInView.forEach(this.showPresentationComponent.bind(this));
      console.log(componentsInView.length);

      var selector1 =
        ".article__container > .article." + currentArticle.get("_id");
      var $block = $(selector1)
        .find(".block__container > .block." + currentBlock.get("_id"))
        .first()
        .detach();

      content.append($block);
      $block.show();
    },

    mountBlockBack: function (blockId) {
      var content = $(".presentationWindow__inner__content__center").first();
      var children = content.children();
      var $block = children.first().detach();
      var blockId = $block.data("adapt-id");
      var blockModel = Adapt.blocks.models.find(
        (m) => m.get("_id").toString() === blockId
      );

      var previousArticle = blockModel.getParent();
      var selector1 =
        ".article__container > .article." + previousArticle.get("_id");
      $(selector1).find(".block__container").append($block);
    },

    loadSlideIndex: function (blockIndex) {
      $(".slideIndex").html(1 + blockIndex);
    },

    showStartSlide: function () {
      $(".presentationWindow__inner__content__center").hide();
      $("#presentationWindow__endBlock").hide();
      $(".presentationWindow__inner__block-img").hide();
      $(".presentationWindow__inner__block-brand").hide();
      $(".presentationWindow__inner__content__bottom__end").hide();
      $("#presentationWindow__startBlock").show();
    },

    showEndSlide: function () {
      $(".presentationWindow__inner__content__center").hide();
      $("#presentationWindow__startBlock").hide();
      $(".presentationWindow__inner__block-img").hide();
      $(".presentationWindow__inner__block-brand").hide();
      $(".presentationWindow__inner__content__bottom__end").hide();
      $("#presentationWindow__endBlock").show();
    },

    showContentSlide: function () {
      var startBlock = $("#presentationWindow__startBlock");
      startBlock.hide();
      var endBlock = $("#presentationWindow__endBlock");
      endBlock.hide();
      $(".presentationWindow__inner__content__bottom__end").show();
      $(".presentationWindow__inner__block-img").show();
      $(".presentationWindow__inner__block-brand").show();
      var coursewareBlock = $(".presentationWindow__inner__content__center");
      coursewareBlock.show();
    },

    handleSlideDisplay: function (blockId) {
      if (blockId === "START_BLOCK") {
        this.showStartSlide();
        return;
      } else if (blockId === "END_BLOCK") {
        this.showEndSlide();
        return;
      }
      this.showContentSlide();
    },

    loadBlockView: function (currentBlock) {
      var blockId = currentBlock.get("_id");
      this.handleSlideDisplay(blockId);
      var content = $(".presentationWindow__inner__content__center").first();
      var children = content.children();

      if (children.length === 0) {
        this.renderBlock(currentBlock);
      } else {
        this.mountBlockBack(blockId);
        this.renderBlock(currentBlock);
      }
    },

    isILTPresentationComponent: function (component) {
      if (!component) return false;
      var outputTypes = component.get("output");
      var metadata = component.get("__metadata");

      if (!outputTypes) return false;

      var isPresentationComponent =
        outputTypes && outputTypes.iltSettings.iltStudent;

      return !!isPresentationComponent;
    },

    showPresentationComponent: function (component) {
      var selector = ".component." + component.get("_id").toString();
      var $comp = $(selector);
      $comp.show();
    },
  });

  return ILTPresentationView;
});

define('extensions/author-ispring-training/js/views/iltMakeThumbnailView.js',["core/js/adapt", "libraries/mobx"], function (Adapt, mobx) {
  var ILTMakeThumbnailView = Backbone.View.extend({
    globalElements: {
      wrapper: "#wrapper",
      app: "#app",
    },

    handlers: {
      instructor: {
        jumpTo: "iltInstructor:jumpToSlide",
      },
      adapt: {
        pageReady: "pageView:ready",
        menuReady: "menuView:ready",
        routerMenu: "router:menu",
        routerPage: "router:page",
      },
    },

    events: {
      "click .thumbnailMode__capture": "makeThumb",
    },

    hideAllOnThumbCaptured: function () {
      $(".presentationWindow").css("visibility", "hidden");
      $(".thumbnailMode__capture").css("visibility", "hidden");
    },

    showOnThumbCaptured: function () {
      $(".thumbnailMode__cancelCapture").css("display", "block");
      $(".thumbnailMode__saveCapture").css("display", "block");
      $(".thumbnailMode__captured").css("display", "block");
    },

    makeThumb: function () {
      var slide = document.querySelector(".presentationWindow__inner");
      html2canvas(slide).then(
        async function (canvas) {
          var base64 = canvas.toDataURL();
          document.querySelector(".thumbnailMode__captured").innerHTML = base64;
          var img = document.createElement("img");
          img.src = base64;
          this.hideAllOnThumbCaptured();
          this.showOnThumbCaptured();
          $(document.body).html(img);
          await this.postThumb(base64);
        }.bind(this)
      );
    },

    getRootWindowOriginObj: function() {
      var Origin = opener && opener.Origin;
      return Origin;
    },

    postThumb: async function (base64) {
      var Origin = this.getRootWindowOriginObj();
      try {
        var model = Adapt.blocks.models[0];
        var endpoint =
          "/api/fast-preview/thumbnails/" + model.get("_id").toString();
        var response = await fetch(endpoint, {
          method: "POST",
          headers: {
            Accept: "application/json",
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            thumb: base64,
          }),
        });
        if(!response.ok && response.status >= 400 && response.status <500) {
          var data = await response.json();
          throw new Error(data.message);
        }
        if(!response.ok) {
          var data = await response.text();
          throw new Error(data);
        }
        var data = await response.json();
        Origin && Origin.trigger('courseWindow:showAPIFeedback', data);
      } catch (error) {
        error.success = false;
        Origin && Origin.trigger('courseWindow:showAPIFeedback', error);
      } finally {
        console.log('close window');
        window.close();
      }
    },

    setState: function () {
      var isDoubleScreen = window.name === "contntWdw";
      if (isDoubleScreen) {
        this.state = opener.Adapt.stateManager.state;
      }
    },

    initialize: function () {
      this.setState();
      this.setupTemplate();

      this.evs = {
        WB_NEXT: this.next.bind(this),
        WB_BACK: this.back.bind(this),
        WB_JS: this.jumpTo.bind(this),
        WB_RESET: this.reset.bind(this),
        WB_FS: this.enterFullScreen.bind(this),
        WB_EFS: this.exitFullScreen.bind(this),
      };

      window.addEventListener(
        "message",
        function (event) {
          var eventHandler = this.evs[event.data.label];
          eventHandler && eventHandler(event.data);
        }.bind(this)
      );
    },

    centerWindow: function () {
      $("body").css("display", "flex");
      $("body").css("flex-direction", "column");
      $("body").css("justify-content", "center");
    },

    /**
     * Mount Handlebars Template
     */
    setupTemplate: function () {
      this.centerWindow();

      var globalElements = this.globalElements;
      $(globalElements.wrapper).hide();
      var currentBlockIndex = Adapt.stateManager.state.currentBlockIndex + 1;

      $(globalElements.app).append(
        Handlebars.templates["presentationWindow"]({
          currentBlockIndex: currentBlockIndex,
          thumbnailMode: true,
        })
      );
      this.setupILTEvents();

      $(".presentationWindow__inner__content__center").on("click", function () {
        opener.postMessage({ label: "WB_NEXT" });
      });
      $("#prevCtrlL").on("click", function () {
        opener.postMessage({ label: "WB_BACK" });
      });

      $(".thumbnailMode__capture").on("click", this.makeThumb.bind(this));
    },

    next: function (data) {
      this.goToBlock(data.value);
    },
    back: function (data) {
      this.goToBlock(data.value);
    },
    jumpTo: function (data) {
      this.goToBlock(data.value);
    },
    reset: function (data) {
      this.goToBlock(data.value);
    },
    enterFullScreen: function () {
      var element = document.querySelector("#container");
      element.requestFullscreen().then(function () {});
    },
    exitFullScreen: function () {
      document.exitFullscreen().then(function () {
        // element has exited fullscreen mode
      });
    },

    goToBlock: function (blockIndex) {
      var blocks = Adapt.blocks.models;
      this.loadSlideIndex(blockIndex);
      this.loadBlockView(blocks[blockIndex]);
    },
    /**
     * Load content when page are rendered
     * (when hash route changes it triggers pageRender events)
     */
    loadContentOnPageRender: function () {
      $(".article").hide();
      $(".block").hide();
      $(".component").hide();
      this.goToBlock(Adapt.stateManager.state.currentBlockIndex);
    },

    setupILTEvents: function () {
      var instructor = this.handlers.instructor;
      var adapt = this.handlers.adapt;

      Adapt.on({
        [adapt.pageReady]: this.loadContentOnPageRender.bind(this),
      });

      $("#fullScreenCtrl").on("click", function () {
        var element = document.querySelector(".presentationWindow__inner");
        element.requestFullscreen().then(function () {});
      });

      $(".presentationWindow__inner").on("fullscreenchange", function () {
        var display = $("#fullScreenCtrl").css("display");
        $("#fullScreenCtrl").css(
          "display",
          display === "none" ? "block" : "none"
        );
      });
    },

    renderBlock: function (currentBlock) {
      var content = $(".presentationWindow__inner__content__center").first();
      var currentArticle = currentBlock.getParent();

      var componentsInView = currentBlock
        .getChildren()
        .filter(this.isILTPresentationComponent);

      componentsInView.forEach(this.showPresentationComponent.bind(this));

      var selector1 =
        ".article__container > .article." + currentArticle.get("_id");
      var $block = $(selector1)
        .find(".block__container > .block." + currentBlock.get("_id"))
        .first()
        .detach();

      content.append($block);
      $block.show();
    },

    mountBlockBack: function () {
      var content = $(".presentationWindow__inner__content__center").first();
      var children = content.children();
      var $block = children.first().detach();
      var blockId = $block.data("adapt-id");
      var blockModel = Adapt.blocks.models.find(
        (m) => m.get("_id").toString() === blockId
      );

      var previousArticle = blockModel.getParent();
      var selector1 =
        ".article__container > .article." + previousArticle.get("_id");
      $(selector1).find(".block__container").append($block);
    },

    loadSlideIndex: function (blockIndex) {
      $(".slideIndex").html(1 + blockIndex);
    },

    showStartSlide: function () {
      $(".presentationWindow__inner__content__center").hide();
      $("#presentationWindow__endBlock").hide();
      $(".presentationWindow__inner__block-img").hide();
      $(".presentationWindow__inner__block-brand").hide();
      $(".presentationWindow__inner__content__bottom__end").hide();
      $("#presentationWindow__startBlock").show();
    },

    showEndSlide: function () {
      $(".presentationWindow__inner__content__center").hide();
      $("#presentationWindow__startBlock").hide();
      $(".presentationWindow__inner__block-img").hide();
      $(".presentationWindow__inner__block-brand").hide();
      $(".presentationWindow__inner__content__bottom__end").hide();
      $("#presentationWindow__endBlock").show();
    },

    showContentSlide: function () {
      var startBlock = $("#presentationWindow__startBlock");
      startBlock.hide();
      var endBlock = $("#presentationWindow__endBlock");
      endBlock.hide();
      $(".presentationWindow__inner__content__bottom__end").show();
      $(".presentationWindow__inner__block-img").show();
      $(".presentationWindow__inner__block-brand").show();
      var coursewareBlock = $(".presentationWindow__inner__content__center");
      coursewareBlock.show();
    },

    handleSlideDisplay: function (blockId) {
      if (blockId === "START_BLOCK") {
        this.showStartSlide();
        return;
      } else if (blockId === "END_BLOCK") {
        this.showEndSlide();
        return;
      }
      this.showContentSlide();
    },
    

    loadBlockView: function (currentBlock) {
      var blockId = currentBlock.get("_id");
      this.handleSlideDisplay(blockId);
      var content = $(".presentationWindow__inner__content__center").first();
      var children = content.children();

      if (children.length === 0) {
        this.renderBlock(currentBlock);
      } else {
        this.mountBlockBack(blockId);
        this.renderBlock(currentBlock);
      }
    },

    isILTPresentationComponent: function (component) {
      if (!component) return false;
      var outputTypes = component.get("output");
      var metadata = component.get("__metadata");

      if (!outputTypes) return false;

      var isPresentationComponent =
        outputTypes && outputTypes.iltSettings.iltStudent;

      return !!isPresentationComponent;
    },

    showPresentationComponent: function (component) {
      var selector = ".component." + component.get("_id").toString();
      var $comp = $(selector);
      $comp.show();
    },
  });

  return ILTMakeThumbnailView;
});

define('extensions/author-ispring-training/js/stateManager.js',[
  "core/js/adapt",
  "./models/mobxState.js",
  "./views/iltInstructorView.js",
  "./views/iltPresentationView.js",
  "./views/iltMakeThumbnailView.js",
], function (
  Adapt,
  MobxState,
  InstructorView,
  PresentationView,
  ThumbnailView
) {
  var StateManager = Backbone.View.extend({
    isPresentationWindow: function () {
      return window.name === "contntWdw";
    },

    isFastPreview: function () {
      return window.name === "fast-preview" || opener && opener.name === "fast-preview";
    },

    isThumbnailView: function () {
      return window.name === "ispring-thumbnail";
    },

    initialize: function () {
      if (this.isFastPreview()) {
        $(".js-loading").hide();
        // this.createFastPresentationWindow();
        // return;
      }

      if (this.isThumbnailView()) {
        $(".js-loading").hide();
        this.createThumbnailView();
        return;
      }

      
      !this.isPresentationWindow() && this.createInstructorWindow();
      this.isPresentationWindow() && this.createPresentationWindow();
    },

    disposeInterval: function () {
      // console.log("dispose interval");
      // function dispose() {
      //   console.log({
      //     opener,
      //   });
      //   if (opener) return;
      //   window.close();
      // }
      // setInterval(dispose.bind(this), 1000);
    },

    createInstructorWindow: function () {
      this.manager = this;
      this.childWindow = null;
      window.Adapt = Adapt;
      Adapt.stateManager = this;
      this.state = new MobxState();
      new InstructorView();
    },

    createPresentationWindow: function () {
      this.disposeInterval();
      Adapt.stateManager = opener.Adapt.stateManager;
      this.manager = opener.Adapt.stateManager;
      this.state = opener.Adapt.stateManager.state;
      new PresentationView();
    },

    createThumbnailView: function () {
      this.manager = this;
      this.childWindow = null;
      window.Adapt = Adapt;
      Adapt.stateManager = this;
      this.state = new MobxState();
      var p = new ThumbnailView();
      this.state.currentBlockIndex = 0;
      p.goToBlock(0);
    },
  });

  return StateManager;
});

/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
!function(A,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define('extensions/author-ispring-training/libraries/html2canvas.js',e):(A="undefined"!=typeof globalThis?globalThis:A||self).html2canvas=e()}(this,function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var r=function(A,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])})(A,e)};function A(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=A}r(A,e),A.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var h=function(){return(h=Object.assign||function(A){for(var e,t=1,r=arguments.length;t<r;t++)for(var B in e=arguments[t])Object.prototype.hasOwnProperty.call(e,B)&&(A[B]=e[B]);return A}).apply(this,arguments)};function a(A,s,o,i){return new(o=o||Promise)(function(t,e){function r(A){try{n(i.next(A))}catch(A){e(A)}}function B(A){try{n(i.throw(A))}catch(A){e(A)}}function n(A){var e;A.done?t(A.value):((e=A.value)instanceof o?e:new o(function(A){A(e)})).then(r,B)}n((i=i.apply(A,s||[])).next())})}function H(t,r){var B,n,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},A={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function e(e){return function(A){return function(e){if(B)throw new TypeError("Generator is already executing.");for(;o;)try{if(B=1,n&&(s=2&e[0]?n.return:e[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,e[1])).done)return s;switch(n=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return o.label++,{value:e[1],done:!1};case 5:o.label++,n=e[1],e=[0];continue;case 7:e=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){o=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){o.label=e[1];break}if(6===e[0]&&o.label<s[1]){o.label=s[1],s=e;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(e);break}s[2]&&o.ops.pop(),o.trys.pop();continue}e=r.call(t,o)}catch(A){e=[6,A],n=0}finally{B=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,A])}}}function t(A,e,t){if(t||2===arguments.length)for(var r,B=0,n=e.length;B<n;B++)!r&&B in e||((r=r||Array.prototype.slice.call(e,0,B))[B]=e[B]);return A.concat(r||e)}var d=(B.prototype.add=function(A,e,t,r){return new B(this.left+A,this.top+e,this.width+t,this.height+r)},B.fromClientRect=function(A,e){return new B(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height)},B.fromDOMRectList=function(A,e){e=Array.from(e).find(function(A){return 0!==A.width});return e?new B(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height):B.EMPTY},B.EMPTY=new B(0,0,0,0),B);function B(A,e,t,r){this.left=A,this.top=e,this.width=t,this.height=r}for(var f=function(A,e){return d.fromClientRect(A,e.getBoundingClientRect())},Q=function(A){for(var e=[],t=0,r=A.length;t<r;){var B,n=A.charCodeAt(t++);55296<=n&&n<=56319&&t<r?56320==(64512&(B=A.charCodeAt(t++)))?e.push(((1023&n)<<10)+(1023&B)+65536):(e.push(n),t--):e.push(n)}return e},g=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var r=[],B=-1,n="";++B<t;){var s=A[B];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(B+1===t||16384<r.length)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n},e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256),s=0;s<e.length;s++)n[e.charCodeAt(s)]=s;for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<o.length;i++)c[o.charCodeAt(i)]=i;function w(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))}var U=(l.prototype.get=function(A){var e;if(0<=A){if(A<55296||56319<A&&A<=65535)return e=this.index[A>>5],this.data[e=(e<<2)+(31&A)];if(A<=65535)return e=this.index[2048+(A-55296>>5)],this.data[e=(e<<2)+(31&A)];if(A<this.highStart)return e=this.index[e=2080+(A>>11)],e=this.index[e+=A>>5&63],this.data[e=(e<<2)+(31&A)];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},l);function l(A,e,t,r,B,n){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=r,this.index=B,this.data=n}for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u="undefined"==typeof Uint8Array?[]:new Uint8Array(256),F=0;F<C.length;F++)u[C.charCodeAt(F)]=F;function p(A,e,t,r){var B=r[t];if(Array.isArray(A)?-1!==A.indexOf(B):A===B)for(var n=t;n<=r.length;){if((o=r[++n])===e)return 1;if(o!==D)break}if(B===D)for(n=t;0<n;){var s=r[--n];if(Array.isArray(A)?-1!==A.indexOf(s):A===s)for(var o,i=t;i<=r.length;){if((o=r[++i])===e)return 1;if(o!==D)break}if(s!==D)break}}function E(A,e){for(var t=A;0<=t;){var r=e[t];if(r!==D)return r;t--}return 0}function I(t,A){var e=(B=function(A,r){void 0===r&&(r="strict");var B=[],n=[],s=[];return A.forEach(function(A,e){var t=rA.get(A);if(50<t?(s.push(!0),t-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(r)&&-1!==[8208,8211,12316,12448].indexOf(A))return n.push(e),B.push(16);if(4!==t&&11!==t)return n.push(e),31===t?B.push("strict"===r?O:q):t===AA||29===t?B.push(J):43===t?131072<=A&&A<=196605||196608<=A&&A<=262141?B.push(q):B.push(J):void B.push(t);if(0===e)return n.push(e),B.push(J);t=B[e-1];return-1===iA.indexOf(t)?(n.push(n[e-1]),B.push(t)):(n.push(e),B.push(J))}),[n,B,s]}(t,(A=A||{lineBreak:"normal",wordBreak:"normal"}).lineBreak))[0],r=B[1],B=B[2];return[e,r="break-all"===A.wordBreak||"break-word"===A.wordBreak?r.map(function(A){return-1!==[R,J,AA].indexOf(A)?q:A}):r,"keep-all"===A.wordBreak?B.map(function(A,e){return A&&19968<=t[e]&&t[e]<=40959}):void 0]}var y,K,m,L,b,D=10,v=13,x=15,M=17,S=18,T=19,G=20,O=21,V=22,k=24,R=25,N=26,P=27,X=28,J=30,Y=32,W=33,Z=34,_=35,q=37,j=38,z=39,$=40,AA=42,eA=[9001,65288],tA="",rA=(m=function(A){var e,t,r,B,n=.75*A.length,s=A.length,o=0;"="===A[A.length-1]&&(n--,"="===A[A.length-2]&&n--);for(var n=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(n),i=Array.isArray(n)?n:new Uint8Array(n),Q=0;Q<s;Q+=4)e=c[A.charCodeAt(Q)],t=c[A.charCodeAt(Q+1)],r=c[A.charCodeAt(Q+2)],B=c[A.charCodeAt(Q+3)],i[o++]=e<<2|t>>4,i[o++]=(15&t)<<4|r>>2,i[o++]=(3&r)<<6|63&B;return n}(y="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),L=Array.isArray(m)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=4)t.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return t}(m):new Uint32Array(m),b=Array.isArray(m)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=2)t.push(A[r+1]<<8|A[r]);return t}(m):new Uint16Array(m),y=w(b,12,L[4]/2),K=2===L[5]?w(b,(24+L[4])/2):(m=L,b=Math.ceil((24+L[4])/4),m.slice?m.slice(b,K):new Uint32Array(Array.prototype.slice.call(m,b,K))),new U(L[0],L[1],L[2],L[3],y,K)),BA=[J,36],nA=[1,2,3,5],sA=[D,8],oA=[P,N],iA=nA.concat(sA),QA=[j,z,$,Z,_],cA=[x,v],aA=(gA.prototype.slice=function(){return g.apply(void 0,this.codePoints.slice(this.start,this.end))},gA);function gA(A,e,t,r){this.codePoints=A,this.required="!"===e,this.start=t,this.end=r}function wA(A,e){var t=Q(A),r=(e=I(t,e))[0],B=e[1],n=e[2],s=t.length,o=0,i=0;return{next:function(){if(s<=i)return{done:!0,value:null};for(var A=tA;i<s&&(A=function(A,e,t,r,B){if(0===t[r])return tA;var n=r-1;if(Array.isArray(B)&&!0===B[n])return tA;var s=n-1,o=1+n,i=e[n],r=0<=s?e[s]:0,B=e[o];if(2===i&&3===B)return tA;if(-1!==nA.indexOf(i))return"!";if(-1!==nA.indexOf(B))return tA;if(-1!==sA.indexOf(B))return tA;if(8===E(n,e))return"";if(11===rA.get(A[n]))return tA;if((i===Y||i===W)&&11===rA.get(A[o]))return tA;if(7===i||7===B)return tA;if(9===i)return tA;if(-1===[D,v,x].indexOf(i)&&9===B)return tA;if(-1!==[M,S,T,k,X].indexOf(B))return tA;if(E(n,e)===V)return tA;if(p(23,V,n,e))return tA;if(p([M,S],O,n,e))return tA;if(p(12,12,n,e))return tA;if(i===D)return"";if(23===i||23===B)return tA;if(16===B||16===i)return"";if(-1!==[v,x,O].indexOf(B)||14===i)return tA;if(36===r&&-1!==cA.indexOf(i))return tA;if(i===X&&36===B)return tA;if(B===G)return tA;if(-1!==BA.indexOf(B)&&i===R||-1!==BA.indexOf(i)&&B===R)return tA;if(i===P&&-1!==[q,Y,W].indexOf(B)||-1!==[q,Y,W].indexOf(i)&&B===N)return tA;if(-1!==BA.indexOf(i)&&-1!==oA.indexOf(B)||-1!==oA.indexOf(i)&&-1!==BA.indexOf(B))return tA;if(-1!==[P,N].indexOf(i)&&(B===R||-1!==[V,x].indexOf(B)&&e[1+o]===R)||-1!==[V,x].indexOf(i)&&B===R||i===R&&-1!==[R,X,k].indexOf(B))return tA;if(-1!==[R,X,k,M,S].indexOf(B))for(var Q=n;0<=Q;){if((c=e[Q])===R)return tA;if(-1===[X,k].indexOf(c))break;Q--}if(-1!==[P,N].indexOf(B))for(var c,Q=-1!==[M,S].indexOf(i)?s:n;0<=Q;){if((c=e[Q])===R)return tA;if(-1===[X,k].indexOf(c))break;Q--}if(j===i&&-1!==[j,z,Z,_].indexOf(B)||-1!==[z,Z].indexOf(i)&&-1!==[z,$].indexOf(B)||-1!==[$,_].indexOf(i)&&B===$)return tA;if(-1!==QA.indexOf(i)&&-1!==[G,N].indexOf(B)||-1!==QA.indexOf(B)&&i===P)return tA;if(-1!==BA.indexOf(i)&&-1!==BA.indexOf(B))return tA;if(i===k&&-1!==BA.indexOf(B))return tA;if(-1!==BA.concat(R).indexOf(i)&&B===V&&-1===eA.indexOf(A[o])||-1!==BA.concat(R).indexOf(B)&&i===S)return tA;if(41===i&&41===B){for(var a=t[n],g=1;0<a&&41===e[--a];)g++;if(g%2!=0)return tA}return i===Y&&B===W?tA:""}(t,B,r,++i,n))===tA;);if(A===tA&&i!==s)return{done:!0,value:null};var e=new aA(t,A,o,i);return o=i,{value:e,done:!1}}}}function UA(A){return 48<=A&&A<=57}function lA(A){return UA(A)||65<=A&&A<=70||97<=A&&A<=102}function CA(A){return 10===A||9===A||32===A}function uA(A){return 97<=(t=e=A)&&t<=122||65<=(e=e)&&e<=90||128<=A||95===A;var e,t}function FA(A){return uA(A)||UA(A)||45===A}function hA(A,e){return 92===A&&10!==e}function dA(A,e,t){return 45===A?uA(e)||hA(e,t):!!uA(A)||92===A&&10!==e}function fA(A,e,t){return 43===A||45===A?!!UA(e)||46===e&&UA(t):UA(46===A?e:A)}var HA={type:2},pA={type:3},EA={type:4},IA={type:13},yA={type:8},KA={type:21},mA={type:9},LA={type:10},bA={type:11},DA={type:12},vA={type:14},xA={type:23},MA={type:1},SA={type:25},TA={type:24},GA={type:26},OA={type:27},VA={type:28},kA={type:29},RA={type:31},NA={type:32},PA=(XA.prototype.write=function(A){this._value=this._value.concat(Q(A))},XA.prototype.read=function(){for(var A=[],e=this.consumeToken();e!==NA;)A.push(e),e=this.consumeToken();return A},XA.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),t=this.peekCodePoint(1),r=this.peekCodePoint(2);if(FA(e)||hA(t,r)){var B=dA(e,t,r)?2:1;return{type:5,value:this.consumeName(),flags:B}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),IA;break;case 39:return this.consumeStringToken(39);case 40:return HA;case 41:return pA;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),vA;break;case 43:if(fA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 44:return EA;case 45:var r=A,B=this.peekCodePoint(0),n=this.peekCodePoint(1);if(fA(r,B,n))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(dA(r,B,n))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(45===B&&62===n)return this.consumeCodePoint(),this.consumeCodePoint(),TA;break;case 46:if(fA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var s=this.consumeCodePoint();if(42===s&&47===(s=this.consumeCodePoint()))return this.consumeToken();if(-1===s)return this.consumeToken()}break;case 58:return GA;case 59:return OA;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),SA;break;case 64:var n=this.peekCodePoint(0),o=this.peekCodePoint(1),i=this.peekCodePoint(2);if(dA(n,o,i))return{type:7,value:this.consumeName()};break;case 91:return VA;case 92:if(hA(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case 93:return kA;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),yA;break;case 123:return bA;case 125:return DA;case 117:case 85:o=this.peekCodePoint(0),i=this.peekCodePoint(1);return 43!==o||!lA(i)&&63!==i||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),mA;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),KA;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),LA;break;case-1:return NA}return CA(A)?(this.consumeWhiteSpace(),RA):UA(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):uA(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:g(A)}},XA.prototype.consumeCodePoint=function(){var A=this._value.shift();return void 0===A?-1:A},XA.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},XA.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},XA.prototype.consumeUnicodeRangeToken=function(){for(var A=[],e=this.consumeCodePoint();lA(e)&&A.length<6;)A.push(e),e=this.consumeCodePoint();for(var t=!1;63===e&&A.length<6;)A.push(e),e=this.consumeCodePoint(),t=!0;if(t)return{type:30,start:parseInt(g.apply(void 0,A.map(function(A){return 63===A?48:A})),16),end:parseInt(g.apply(void 0,A.map(function(A){return 63===A?70:A})),16)};var r=parseInt(g.apply(void 0,A),16);if(45===this.peekCodePoint(0)&&lA(this.peekCodePoint(1))){this.consumeCodePoint();for(var e=this.consumeCodePoint(),B=[];lA(e)&&B.length<6;)B.push(e),e=this.consumeCodePoint();return{type:30,start:r,end:parseInt(g.apply(void 0,B),16)}}return{type:30,start:r,end:r}},XA.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return"url"===A.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},XA.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var e,t=this.peekCodePoint(0);if(39===t||34===t){t=this.consumeStringToken(this.consumeCodePoint());return 0===t.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:t.value}):(this.consumeBadUrlRemnants(),xA)}for(;;){var r=this.consumeCodePoint();if(-1===r||41===r)return{type:22,value:g.apply(void 0,A)};if(CA(r))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:g.apply(void 0,A)}):(this.consumeBadUrlRemnants(),xA);if(34===r||39===r||40===r||(0<=(e=r)&&e<=8||11===e||14<=e&&e<=31||127===e))return this.consumeBadUrlRemnants(),xA;if(92===r){if(!hA(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),xA;A.push(this.consumeEscapedCodePoint())}else A.push(r)}},XA.prototype.consumeWhiteSpace=function(){for(;CA(this.peekCodePoint(0));)this.consumeCodePoint()},XA.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(41===A||-1===A)return;hA(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},XA.prototype.consumeStringSlice=function(A){for(var e="";0<A;){var t=Math.min(5e4,A);e+=g.apply(void 0,this._value.splice(0,t)),A-=t}return this._value.shift(),e},XA.prototype.consumeStringToken=function(A){for(var e="",t=0;;){var r,B=this._value[t];if(-1===B||void 0===B||B===A)return{type:0,value:e+=this.consumeStringSlice(t)};if(10===B)return this._value.splice(0,t),MA;92!==B||-1!==(r=this._value[t+1])&&void 0!==r&&(10===r?(e+=this.consumeStringSlice(t),t=-1,this._value.shift()):hA(B,r)&&(e+=this.consumeStringSlice(t),e+=g(this.consumeEscapedCodePoint()),t=-1)),t++}},XA.prototype.consumeNumber=function(){var A=[],e=4;for(43!==(t=this.peekCodePoint(0))&&45!==t||A.push(this.consumeCodePoint());UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());var t=this.peekCodePoint(0),r=this.peekCodePoint(1);if(46===t&&UA(r))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0);var r=this.peekCodePoint(1),B=this.peekCodePoint(2);if((69===t||101===t)&&((43===r||45===r)&&UA(B)||UA(r)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[function(A){var e=0,t=1;43!==A[e]&&45!==A[e]||(45===A[e]&&(t=-1),e++);for(var r=[];UA(A[e]);)r.push(A[e++]);var B=r.length?parseInt(g.apply(void 0,r),10):0;46===A[e]&&e++;for(var n=[];UA(A[e]);)n.push(A[e++]);var s=n.length,o=s?parseInt(g.apply(void 0,n),10):0;69!==A[e]&&101!==A[e]||e++;var i=1;43!==A[e]&&45!==A[e]||(45===A[e]&&(i=-1),e++);for(var Q=[];UA(A[e]);)Q.push(A[e++]);var c=Q.length?parseInt(g.apply(void 0,Q),10):0;return t*(B+o*Math.pow(10,-s))*Math.pow(10,i*c)}(A),e]},XA.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),e=A[0],t=A[1],r=this.peekCodePoint(0),B=this.peekCodePoint(1),A=this.peekCodePoint(2);return dA(r,B,A)?{type:15,number:e,flags:t,unit:this.consumeName()}:37===r?(this.consumeCodePoint(),{type:16,number:e,flags:t}):{type:17,number:e,flags:t}},XA.prototype.consumeEscapedCodePoint=function(){var A,e=this.consumeCodePoint();if(lA(e)){for(var t=g(e);lA(this.peekCodePoint(0))&&t.length<6;)t+=g(this.consumeCodePoint());CA(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return 0===r||55296<=(A=r)&&A<=57343||1114111<r?65533:r}return-1===e?65533:e},XA.prototype.consumeName=function(){for(var A="";;){var e=this.consumeCodePoint();if(FA(e))A+=g(e);else{if(!hA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),A;A+=g(this.consumeEscapedCodePoint())}}},XA);function XA(){this._value=[]}var JA=(YA.create=function(A){var e=new PA;return e.write(A),new YA(e.read())},YA.parseValue=function(A){return YA.create(A).parseComponentValue()},YA.parseValues=function(A){return YA.create(A).parseComponentValues()},YA.prototype.parseComponentValue=function(){for(var A=this.consumeToken();31===A.type;)A=this.consumeToken();if(32===A.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);for(var e=this.consumeComponentValue();31===(A=this.consumeToken()).type;);if(32===A.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},YA.prototype.parseComponentValues=function(){for(var A=[];;){var e=this.consumeComponentValue();if(32===e.type)return A;A.push(e),A.push()}},YA.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},YA.prototype.consumeSimpleBlock=function(A){for(var e={type:A,values:[]},t=this.consumeToken();;){if(32===t.type||ce(t,A))return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue()),t=this.consumeToken()}},YA.prototype.consumeFunction=function(A){for(var e={name:A.value,values:[],type:18};;){var t=this.consumeToken();if(32===t.type||3===t.type)return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue())}},YA.prototype.consumeToken=function(){var A=this._tokens.shift();return void 0===A?NA:A},YA.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},YA);function YA(A){this._tokens=A}function WA(A){return 15===A.type}function ZA(A){return 17===A.type}function _A(A){return 20===A.type}function qA(A){return 0===A.type}function jA(A,e){return _A(A)&&A.value===e}function zA(A){return 31!==A.type}function $A(A){return 31!==A.type&&4!==A.type}function Ae(A){var e=[],t=[];return A.forEach(function(A){if(4===A.type){if(0===t.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(t),void(t=[])}31!==A.type&&t.push(A)}),t.length&&e.push(t),e}function ee(A){return 17===A.type||15===A.type}function te(A){return 16===A.type||ee(A)}function re(A){return 1<A.length?[A[0],A[1]]:[A[0]]}function Be(A,e,t){var r=A[0],A=A[1];return[Ue(r,e),Ue(void 0!==A?A:r,t)]}function ne(A){return 15===A.type&&("deg"===A.unit||"grad"===A.unit||"rad"===A.unit||"turn"===A.unit)}function se(A){switch(A.filter(_A).map(function(A){return A.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ae,ae];case"to top":case"bottom":return Ce(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ae,we];case"to right":case"left":return Ce(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[we,we];case"to bottom":case"top":return Ce(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[we,ae];case"to left":case"right":return Ce(270)}return 0}function oe(A){return 0==(255&A)}function ie(A){var e=255&A,t=255&A>>8,r=255&A>>16,A=255&A>>24;return e<255?"rgba("+A+","+r+","+t+","+e/255+")":"rgb("+A+","+r+","+t+")"}function Qe(A,e){if(17===A.type)return A.number;if(16!==A.type)return 0;var t=3===e?1:255;return 3===e?A.number/100*t:Math.round(A.number/100*t)}var ce=function(A,e){return 11===e&&12===A.type||(28===e&&29===A.type||2===e&&3===A.type)},ae={type:17,number:0,flags:4},ge={type:16,number:50,flags:4},we={type:16,number:100,flags:4},Ue=function(A,e){if(16===A.type)return A.number/100*e;if(WA(A))switch(A.unit){case"rem":case"em":return 16*A.number;default:return A.number}return A.number},le=function(A,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case"grad":return Math.PI/200*e.number;case"rad":return e.number;case"turn":return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},Ce=function(A){return Math.PI*A/180},ue=function(A,e){if(18===e.type){var t=me[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(A,e.values)}if(5===e.type){if(3===e.value.length){var r=e.value.substring(0,1),B=e.value.substring(1,2),n=e.value.substring(2,3);return Fe(parseInt(r+r,16),parseInt(B+B,16),parseInt(n+n,16),1)}if(4===e.value.length){var r=e.value.substring(0,1),B=e.value.substring(1,2),n=e.value.substring(2,3),s=e.value.substring(3,4);return Fe(parseInt(r+r,16),parseInt(B+B,16),parseInt(n+n,16),parseInt(s+s,16)/255)}if(6===e.value.length){r=e.value.substring(0,2),B=e.value.substring(2,4),n=e.value.substring(4,6);return Fe(parseInt(r,16),parseInt(B,16),parseInt(n,16),1)}if(8===e.value.length){r=e.value.substring(0,2),B=e.value.substring(2,4),n=e.value.substring(4,6),s=e.value.substring(6,8);return Fe(parseInt(r,16),parseInt(B,16),parseInt(n,16),parseInt(s,16)/255)}}if(20===e.type){e=Le[e.value.toUpperCase()];if(void 0!==e)return e}return Le.TRANSPARENT},Fe=function(A,e,t,r){return(A<<24|e<<16|t<<8|Math.round(255*r)<<0)>>>0},he=function(A,e){e=e.filter($A);if(3===e.length){var t=e.map(Qe),r=t[0],B=t[1],t=t[2];return Fe(r,B,t,1)}if(4!==e.length)return 0;e=e.map(Qe),r=e[0],B=e[1],t=e[2],e=e[3];return Fe(r,B,t,e)};function de(A,e,t){return t<0&&(t+=1),1<=t&&--t,t<1/6?(e-A)*t*6+A:t<.5?e:t<2/3?6*(e-A)*(2/3-t)+A:A}function fe(A,e){return ue(A,JA.create(e).parseComponentValue())}function He(A,e){return A=ue(A,e[0]),(e=e[1])&&te(e)?{color:A,stop:e}:{color:A,stop:null}}function pe(A,t){var e=A[0],r=A[A.length-1];null===e.stop&&(e.stop=ae),null===r.stop&&(r.stop=we);for(var B=[],n=0,s=0;s<A.length;s++){var o=A[s].stop;null!==o?(n<(o=Ue(o,t))?B.push(o):B.push(n),n=o):B.push(null)}for(var i=null,s=0;s<B.length;s++){var Q=B[s];if(null===Q)null===i&&(i=s);else if(null!==i){for(var c=s-i,a=(Q-B[i-1])/(1+c),g=1;g<=c;g++)B[i+g-1]=a*g;i=null}}return A.map(function(A,e){return{color:A.color,stop:Math.max(Math.min(1,B[e]/t),0)}})}function Ee(A,e,t){var r="number"==typeof A?A:(s=e/2,r=(n=t)/2,s=Ue((B=A)[0],e)-s,n=r-Ue(B[1],n),(Math.atan2(n,s)+2*Math.PI)%(2*Math.PI)),B=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),n=e/2,s=t/2,e=B/2,t=Math.sin(r-Math.PI/2)*e,e=Math.cos(r-Math.PI/2)*e;return[B,n-e,n+e,s-t,s+t]}function Ie(A,e){return Math.sqrt(A*A+e*e)}function ye(A,e,B,n,s){return[[0,0],[0,e],[A,0],[A,e]].reduce(function(A,e){var t=e[0],r=e[1],r=Ie(B-t,n-r);return(s?r<A.optimumDistance:r>A.optimumDistance)?{optimumCorner:e,optimumDistance:r}:A},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner}var Ke=function(A,e){var t=e.filter($A),r=t[0],B=t[1],n=t[2],e=t[3],t=(17===r.type?Ce(r.number):le(A,r))/(2*Math.PI),A=te(B)?B.number/100:0,r=te(n)?n.number/100:0,B=void 0!==e&&te(e)?Ue(e,1):1;if(0==A)return Fe(255*r,255*r,255*r,1);n=r<=.5?r*(1+A):r+A-r*A,e=2*r-n,A=de(e,n,t+1/3),r=de(e,n,t),t=de(e,n,t-1/3);return Fe(255*A,255*r,255*t,B)},me={hsl:Ke,hsla:Ke,rgb:he,rgba:he},Le={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},be={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map(function(A){if(_A(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},De={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ke=function(t,A){var r=Ce(180),B=[];return Ae(A).forEach(function(A,e){if(0===e){e=A[0];if(20===e.type&&-1!==["top","left","right","bottom"].indexOf(e.value))return void(r=se(A));if(ne(e))return void(r=(le(t,e)+Ce(270))%Ce(360))}A=He(t,A);B.push(A)}),{angle:r,stops:B,type:1}},ve="closest-side",xe="farthest-side",Me="closest-corner",Se="farthest-corner",Te="ellipse",Ge="contain",he=function(r,A){var B=0,n=3,s=[],o=[];return Ae(A).forEach(function(A,e){var t=!0;0===e?t=A.reduce(function(A,e){if(_A(e))switch(e.value){case"center":return o.push(ge),!1;case"top":case"left":return o.push(ae),!1;case"right":case"bottom":return o.push(we),!1}else if(te(e)||ee(e))return o.push(e),!1;return A},t):1===e&&(t=A.reduce(function(A,e){if(_A(e))switch(e.value){case"circle":return B=0,!1;case Te:return!(B=1);case Ge:case ve:return n=0,!1;case xe:return!(n=1);case Me:return!(n=2);case"cover":case Se:return!(n=3)}else if(ee(e)||te(e))return(n=!Array.isArray(n)?[]:n).push(e),!1;return A},t)),t&&(A=He(r,A),s.push(A))}),{size:n,shape:B,stops:s,position:o,type:2}},Oe=function(A,e){if(22===e.type){var t={url:e.value,type:0};return A.cache.addImage(e.value),t}if(18!==e.type)throw new Error("Unsupported image type "+e.type);t=ke[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return t(A,e.values)};var Ve,ke={"linear-gradient":function(t,A){var r=Ce(180),B=[];return Ae(A).forEach(function(A,e){if(0===e){e=A[0];if(20===e.type&&"to"===e.value)return void(r=se(A));if(ne(e))return void(r=le(t,e))}A=He(t,A);B.push(A)}),{angle:r,stops:B,type:1}},"-moz-linear-gradient":Ke,"-ms-linear-gradient":Ke,"-o-linear-gradient":Ke,"-webkit-linear-gradient":Ke,"radial-gradient":function(B,A){var n=0,s=3,o=[],i=[];return Ae(A).forEach(function(A,e){var t,r=!0;0===e&&(t=!1,r=A.reduce(function(A,e){if(t)if(_A(e))switch(e.value){case"center":return i.push(ge),A;case"top":case"left":return i.push(ae),A;case"right":case"bottom":return i.push(we),A}else(te(e)||ee(e))&&i.push(e);else if(_A(e))switch(e.value){case"circle":return n=0,!1;case Te:return!(n=1);case"at":return!(t=!0);case ve:return s=0,!1;case"cover":case xe:return!(s=1);case Ge:case Me:return!(s=2);case Se:return!(s=3)}else if(ee(e)||te(e))return(s=!Array.isArray(s)?[]:s).push(e),!1;return A},r)),r&&(A=He(B,A),o.push(A))}),{size:s,shape:n,stops:o,position:i,type:2}},"-moz-radial-gradient":he,"-ms-radial-gradient":he,"-o-radial-gradient":he,"-webkit-radial-gradient":he,"-webkit-gradient":function(r,A){var e=Ce(180),B=[],n=1;return Ae(A).forEach(function(A,e){var t,A=A[0];if(0===e){if(_A(A)&&"linear"===A.value)return void(n=1);if(_A(A)&&"radial"===A.value)return void(n=2)}18===A.type&&("from"===A.name?(t=ue(r,A.values[0]),B.push({stop:ae,color:t})):"to"===A.name?(t=ue(r,A.values[0]),B.push({stop:we,color:t})):"color-stop"!==A.name||2===(A=A.values.filter($A)).length&&(t=ue(r,A[1]),A=A[0],ZA(A)&&B.push({stop:{type:16,number:100*A.number,flags:A.flags},color:t})))}),1===n?{angle:(e+Ce(180))%Ce(360),stops:B,type:n}:{size:3,shape:0,stops:B,position:[],type:n}}},Re={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,A){if(0===A.length)return[];var t=A[0];return 20===t.type&&"none"===t.value?[]:A.filter(function(A){return $A(A)&&!(20===(A=A).type&&"none"===A.value||18===A.type&&!ke[A.name])}).map(function(A){return Oe(e,A)})}},Ne={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map(function(A){if(_A(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Pe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(te)}).map(re)}},Xe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(_A).map(function(A){return A.value}).join(" ")}).map(Je)}},Je=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(he=Ve=Ve||{}).AUTO="auto",he.CONTAIN="contain";function Ye(A,e){return _A(A)&&"normal"===A.value?1.2*e:17===A.type?e*A.number:te(A)?Ue(A,e):e}var We,Ze,_e={name:"background-size",initialValue:"0",prefix:!(he.COVER="cover"),type:1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(qe)})}},qe=function(A){return _A(A)||te(A)},he=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},je=he("top"),ze=he("right"),$e=he("bottom"),At=he("left"),he=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(A,e){return re(e.filter(te))}}},et=he("top-left"),tt=he("top-right"),rt=he("bottom-right"),Bt=he("bottom-left"),he=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},nt=he("top"),st=he("right"),ot=he("bottom"),it=he("left"),he=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return WA(e)?e.number:0}}},Qt=he("top"),ct=he("right"),at=he("bottom"),gt=he("left"),wt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ut={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,e){return"rtl"!==e?0:1}},lt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).reduce(function(A,e){return A|Ct(e.value)},0)}},Ct=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ut={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ft={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,e){return!(20===e.type&&"normal"===e.value||17!==e.type&&15!==e.type)?e.number:0}},ht={name:"line-break",initialValue:(he=We=We||{}).NORMAL="normal",prefix:!(he.STRICT="strict"),type:2,parse:function(A,e){return"strict"!==e?We.NORMAL:We.STRICT}},dt={name:"line-height",initialValue:"normal",prefix:!1,type:4},ft={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,e){return 20===e.type&&"none"===e.value?null:Oe(A,e)}},Ht={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,e){return"inside"!==e?1:0}},pt={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},he=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},Et=he("top"),It=he("right"),yt=he("bottom"),Kt=he("left"),mt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Lt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){return"break-word"!==e?"normal":"break-word"}},he=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},bt=he("top"),Dt=he("right"),vt=he("bottom"),xt=he("left"),Mt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},St={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Tt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,A){return 1===A.length&&jA(A[0],"none")?[]:Ae(A).map(function(A){for(var e={color:Le.TRANSPARENT,offsetX:ae,offsetY:ae,blur:ae},t=0,r=0;r<A.length;r++){var B=A[r];ee(B)?(0===t?e.offsetX=B:1===t?e.offsetY=B:e.blur=B,t++):e.color=ue(n,B)}return e})}},Gt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ot={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,e){if(20===e.type&&"none"===e.value)return null;if(18!==e.type)return null;var t=Vt[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}},Vt={matrix:function(A){A=A.filter(function(A){return 17===A.type}).map(function(A){return A.number});return 6===A.length?A:null},matrix3d:function(A){var e=A.filter(function(A){return 17===A.type}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var B=e[4],n=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],A=e[13];return e[14],e[15],16===e.length?[t,r,B,n,s,A]:null}},he={type:16,number:50,flags:4},kt=[he,he],Rt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,e){e=e.filter(te);return 2!==e.length?kt:[e[0],e[1]]}},Nt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};(he=Ze=Ze||{}).NORMAL="normal",he.BREAK_ALL="break-all";function Pt(A,e){return 0!=(A&e)}function Xt(A,e,t){return(A=A&&A[Math.min(e,A.length-1)])?t?A.open:A.close:""}var Jt={name:"word-break",initialValue:"normal",prefix:!(he.KEEP_ALL="keep-all"),type:2,parse:function(A,e){switch(e){case"break-all":return Ze.BREAK_ALL;case"keep-all":return Ze.KEEP_ALL;default:return Ze.NORMAL}}},Yt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,e){if(20===e.type)return{auto:!0,order:0};if(ZA(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Wt=function(A,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")},Zt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,e){return ZA(e)?e.number:1}},_t={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return 0!==A})}},jt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,e){var t=[],r=[];return e.forEach(function(A){switch(A.type){case 20:case 0:t.push(A.value);break;case 17:t.push(A.number.toString());break;case 4:r.push(t.join(" ")),t.length=0}}),t.length&&r.push(t.join(" ")),r.map(function(A){return-1===A.indexOf(" ")?A:"'"+A+"'"})}},zt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$t={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,e){return ZA(e)?e.number:!_A(e)||"bold"!==e.value?400:700}},Ar={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return e.filter(_A).map(function(A){return A.value})}},er={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},tr={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(0===e.length)return[];var t=e[0];return 20===t.type&&"none"===t.value?[]:e}},rr={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;for(var r=[],B=e.filter(zA),n=0;n<B.length;n++){var s=B[n],o=B[n+1];20===s.type&&(o=o&&ZA(o)?o.number:1,r.push({counter:s.value,increment:o}))}return r}},Br={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return[];for(var t=[],r=e.filter(zA),B=0;B<r.length;B++){var n=r[B],s=r[B+1];_A(n)&&"none"!==n.value&&(s=s&&ZA(s)?s.number:0,t.push({counter:n.value,reset:s}))}return t}},nr={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,A){return A.filter(WA).map(function(A){return Wt(e,A)})}},sr={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;var r=[],B=e.filter(qA);if(B.length%2!=0)return null;for(var n=0;n<B.length;n+=2){var s=B[n].value,o=B[n+1].value;r.push({open:s,close:o})}return r}},or={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,A){return 1===A.length&&jA(A[0],"none")?[]:Ae(A).map(function(A){for(var e={color:255,offsetX:ae,offsetY:ae,blur:ae,spread:ae,inset:!1},t=0,r=0;r<A.length;r++){var B=A[r];jA(B,"inset")?e.inset=!0:ee(B)?(0===t?e.offsetX=B:1===t?e.offsetY=B:2===t?e.blur=B:e.spread=B,t++):e.color=ue(n,B)}return e})}},ir={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,e){var t=[];return e.filter(_A).forEach(function(A){switch(A.value){case"stroke":t.push(1);break;case"fill":t.push(0);break;case"markers":t.push(2)}}),[0,1,2].forEach(function(A){-1===t.indexOf(A)&&t.push(A)}),t}},Qr={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},cr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return WA(e)?e.number:0}},ar=(gr.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&0===this.visibility},gr.prototype.isTransparent=function(){return oe(this.backgroundColor)},gr.prototype.isTransformed=function(){return null!==this.transform},gr.prototype.isPositioned=function(){return 0!==this.position},gr.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},gr.prototype.isFloating=function(){return 0!==this.float},gr.prototype.isInlineLevel=function(){return Pt(this.display,4)||Pt(this.display,33554432)||Pt(this.display,268435456)||Pt(this.display,536870912)||Pt(this.display,67108864)||Pt(this.display,134217728)},gr);function gr(A,e){this.animationDuration=lr(A,nr,e.animationDuration),this.backgroundClip=lr(A,be,e.backgroundClip),this.backgroundColor=lr(A,De,e.backgroundColor),this.backgroundImage=lr(A,Re,e.backgroundImage),this.backgroundOrigin=lr(A,Ne,e.backgroundOrigin),this.backgroundPosition=lr(A,Pe,e.backgroundPosition),this.backgroundRepeat=lr(A,Xe,e.backgroundRepeat),this.backgroundSize=lr(A,_e,e.backgroundSize),this.borderTopColor=lr(A,je,e.borderTopColor),this.borderRightColor=lr(A,ze,e.borderRightColor),this.borderBottomColor=lr(A,$e,e.borderBottomColor),this.borderLeftColor=lr(A,At,e.borderLeftColor),this.borderTopLeftRadius=lr(A,et,e.borderTopLeftRadius),this.borderTopRightRadius=lr(A,tt,e.borderTopRightRadius),this.borderBottomRightRadius=lr(A,rt,e.borderBottomRightRadius),this.borderBottomLeftRadius=lr(A,Bt,e.borderBottomLeftRadius),this.borderTopStyle=lr(A,nt,e.borderTopStyle),this.borderRightStyle=lr(A,st,e.borderRightStyle),this.borderBottomStyle=lr(A,ot,e.borderBottomStyle),this.borderLeftStyle=lr(A,it,e.borderLeftStyle),this.borderTopWidth=lr(A,Qt,e.borderTopWidth),this.borderRightWidth=lr(A,ct,e.borderRightWidth),this.borderBottomWidth=lr(A,at,e.borderBottomWidth),this.borderLeftWidth=lr(A,gt,e.borderLeftWidth),this.boxShadow=lr(A,or,e.boxShadow),this.color=lr(A,wt,e.color),this.direction=lr(A,Ut,e.direction),this.display=lr(A,lt,e.display),this.float=lr(A,ut,e.cssFloat),this.fontFamily=lr(A,jt,e.fontFamily),this.fontSize=lr(A,zt,e.fontSize),this.fontStyle=lr(A,er,e.fontStyle),this.fontVariant=lr(A,Ar,e.fontVariant),this.fontWeight=lr(A,$t,e.fontWeight),this.letterSpacing=lr(A,Ft,e.letterSpacing),this.lineBreak=lr(A,ht,e.lineBreak),this.lineHeight=lr(A,dt,e.lineHeight),this.listStyleImage=lr(A,ft,e.listStyleImage),this.listStylePosition=lr(A,Ht,e.listStylePosition),this.listStyleType=lr(A,pt,e.listStyleType),this.marginTop=lr(A,Et,e.marginTop),this.marginRight=lr(A,It,e.marginRight),this.marginBottom=lr(A,yt,e.marginBottom),this.marginLeft=lr(A,Kt,e.marginLeft),this.opacity=lr(A,Zt,e.opacity);var t=lr(A,mt,e.overflow);this.overflowX=t[0],this.overflowY=t[1<t.length?1:0],this.overflowWrap=lr(A,Lt,e.overflowWrap),this.paddingTop=lr(A,bt,e.paddingTop),this.paddingRight=lr(A,Dt,e.paddingRight),this.paddingBottom=lr(A,vt,e.paddingBottom),this.paddingLeft=lr(A,xt,e.paddingLeft),this.paintOrder=lr(A,ir,e.paintOrder),this.position=lr(A,St,e.position),this.textAlign=lr(A,Mt,e.textAlign),this.textDecorationColor=lr(A,_t,null!==(t=e.textDecorationColor)&&void 0!==t?t:e.color),this.textDecorationLine=lr(A,qt,null!==(t=e.textDecorationLine)&&void 0!==t?t:e.textDecoration),this.textShadow=lr(A,Tt,e.textShadow),this.textTransform=lr(A,Gt,e.textTransform),this.transform=lr(A,Ot,e.transform),this.transformOrigin=lr(A,Rt,e.transformOrigin),this.visibility=lr(A,Nt,e.visibility),this.webkitTextStrokeColor=lr(A,Qr,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(A,cr,e.webkitTextStrokeWidth),this.wordBreak=lr(A,Jt,e.wordBreak),this.zIndex=lr(A,Yt,e.zIndex)}for(var wr=function(A,e){this.content=lr(A,tr,e.content),this.quotes=lr(A,sr,e.quotes)},Ur=function(A,e){this.counterIncrement=lr(A,rr,e.counterIncrement),this.counterReset=lr(A,Br,e.counterReset)},lr=function(A,e,t){var r=new PA,t=null!=t?t.toString():e.initialValue;r.write(t);var B=new JA(r.read());switch(e.type){case 2:var n=B.parseComponentValue();return e.parse(A,_A(n)?n.value:e.initialValue);case 0:return e.parse(A,B.parseComponentValue());case 1:return e.parse(A,B.parseComponentValues());case 4:return B.parseComponentValue();case 3:switch(e.format){case"angle":return le(A,B.parseComponentValue());case"color":return ue(A,B.parseComponentValue());case"image":return Oe(A,B.parseComponentValue());case"length":var s=B.parseComponentValue();return ee(s)?s:ae;case"length-percentage":s=B.parseComponentValue();return te(s)?s:ae;case"time":return Wt(A,B.parseComponentValue())}}},Cr=function(A,e){A=function(A){switch(A.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(A);return 1===A||e===A},ur=function(A,e){this.context=A,this.textNodes=[],this.elements=[],this.flags=0,Cr(e,3),this.styles=new ar(A,window.getComputedStyle(e,null)),JB(e)&&(this.styles.animationDuration.some(function(A){return 0<A})&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=f(this.context,e),Cr(e,4)&&(this.flags|=16)},Fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),dr=0;dr<Fr.length;dr++)hr[Fr.charCodeAt(dr)]=dr;function fr(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))}var Hr=(pr.prototype.get=function(A){var e;if(0<=A){if(A<55296||56319<A&&A<=65535)return e=this.index[A>>5],this.data[e=(e<<2)+(31&A)];if(A<=65535)return e=this.index[2048+(A-55296>>5)],this.data[e=(e<<2)+(31&A)];if(A<this.highStart)return e=this.index[e=2080+(A>>11)],e=this.index[e+=A>>5&63],this.data[e=(e<<2)+(31&A)];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},pr);function pr(A,e,t,r,B,n){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=r,this.index=B,this.data=n}for(var Er="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ir="undefined"==typeof Uint8Array?[]:new Uint8Array(256),yr=0;yr<Er.length;yr++)Ir[Er.charCodeAt(yr)]=yr;function Kr(A){return kr.get(A)}function mr(A){var t=function(A){for(var e=[],t=0,r=A.length;t<r;){var B,n=A.charCodeAt(t++);55296<=n&&n<=56319&&t<r?56320==(64512&(B=A.charCodeAt(t++)))?e.push(((1023&n)<<10)+(1023&B)+65536):(e.push(n),t--):e.push(n)}return e}(A),r=t.length,B=0,n=0,s=t.map(Kr);return{next:function(){if(r<=B)return{done:!0,value:null};for(var A=Rr;B<r&&(A=function(A,e){var t=e-2,r=A[t],B=A[e-1],e=A[e];if(2===B&&3===e)return Rr;if(2===B||3===B||4===B)return"";if(2===e||3===e||4===e)return"";if(B===Tr&&-1!==[Tr,Gr,Or,Vr].indexOf(e))return Rr;if(!(B!==Or&&B!==Gr||e!==Gr&&10!==e))return Rr;if((B===Vr||10===B)&&10===e)return Rr;if(13===e||5===e)return Rr;if(7===e)return Rr;if(1===B)return Rr;if(13===B&&14===e){for(;5===r;)r=A[--t];if(14===r)return Rr}if(15===B&&15===e){for(var n=0;15===r;)n++,r=A[--t];if(n%2==0)return Rr}return""}(s,++B))===Rr;);if(A===Rr&&B!==r)return{done:!0,value:null};var e=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var r=[],B=-1,n="";++B<t;){var s=A[B];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(B+1===t||16384<r.length)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n}.apply(null,t.slice(n,B));return n=B,{value:e,done:!1}}}}function Lr(A){return 0===A[0]&&255===A[1]&&0===A[2]&&255===A[3]}var br,Dr,vr,xr,Mr,Sr,Tr=8,Gr=9,Or=11,Vr=12,kr=(vr=function(A){var e,t,r,B,n=.75*A.length,s=A.length,o=0;"="===A[A.length-1]&&(n--,"="===A[A.length-2]&&n--);for(var n=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(n),i=Array.isArray(n)?n:new Uint8Array(n),Q=0;Q<s;Q+=4)e=hr[A.charCodeAt(Q)],t=hr[A.charCodeAt(Q+1)],r=hr[A.charCodeAt(Q+2)],B=hr[A.charCodeAt(Q+3)],i[o++]=e<<2|t>>4,i[o++]=(15&t)<<4|r>>2,i[o++]=(3&r)<<6|63&B;return n}(br="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),xr=Array.isArray(vr)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=4)t.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return t}(vr):new Uint32Array(vr),Mr=Array.isArray(vr)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=2)t.push(A[r+1]<<8|A[r]);return t}(vr):new Uint16Array(vr),br=fr(Mr,12,xr[4]/2),Dr=2===xr[5]?fr(Mr,(24+xr[4])/2):(vr=xr,Mr=Math.ceil((24+xr[4])/4),vr.slice?vr.slice(Mr,Dr):new Uint32Array(Array.prototype.slice.call(vr,Mr,Dr))),new Hr(xr[0],xr[1],xr[2],xr[3],br,Dr)),Rr="",Nr=function(A,e,t,r,B){var n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),n=document.createElementNS(n,"foreignObject");return s.setAttributeNS(null,"width",A.toString()),s.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width","100%"),n.setAttributeNS(null,"height","100%"),n.setAttributeNS(null,"x",t.toString()),n.setAttributeNS(null,"y",r.toString()),n.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(n),n.appendChild(B),s},Pr=function(r){return new Promise(function(A,e){var t=new Image;t.onload=function(){return A(t)},t.onerror=e,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})},Xr={get SUPPORT_RANGE_BOUNDS(){var A=function(A){if(A.createRange){var e=A.createRange();if(e.getBoundingClientRect){var t=A.createElement("boundtest");t.style.height="123px",t.style.display="block",A.body.appendChild(t),e.selectNode(t);e=e.getBoundingClientRect(),e=Math.round(e.height);if(A.body.removeChild(t),123===e)return!0}}return!1}(document);return Object.defineProperty(Xr,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=Xr.SUPPORT_RANGE_BOUNDS&&function(A){var e=A.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",A.body.appendChild(e);var r=A.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var B=e.firstChild,t=Q(B.data).map(function(A){return g(A)}),n=0,s={},t=t.every(function(A,e){r.setStart(B,n),r.setEnd(B,n+A.length);var t=r.getBoundingClientRect();n+=A.length;A=t.x>s.x||t.y>s.y;return s=t,0===e||A});return A.body.removeChild(e),t}(document);return Object.defineProperty(Xr,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=function(A){var e=new Image,t=A.createElement("canvas"),A=t.getContext("2d");if(!A)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{A.drawImage(e,0,0),t.toDataURL()}catch(A){return!1}return!0}(document);return Object.defineProperty(Xr,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var A=t.createElement("canvas"),r=100;A.width=r,A.height=r;var B=A.getContext("2d");if(!B)return Promise.reject(!1);B.fillStyle="rgb(0, 255, 0)",B.fillRect(0,0,r,r);var e=new Image,n=A.toDataURL();e.src=n;e=Nr(r,r,0,0,e);return B.fillStyle="red",B.fillRect(0,0,r,r),Pr(e).then(function(A){B.drawImage(A,0,0);var e=B.getImageData(0,0,r,r).data;B.fillStyle="red",B.fillRect(0,0,r,r);A=t.createElement("div");return A.style.backgroundImage="url("+n+")",A.style.height="100px",Lr(e)?Pr(Nr(r,r,0,0,A)):Promise.reject(!1)}).then(function(A){return B.drawImage(A,0,0),Lr(B.getImageData(0,0,r,r).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Xr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=void 0!==(new Image).crossOrigin;return Object.defineProperty(Xr,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Xr,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Xr,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Xr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},Jr=function(A,e){this.text=A,this.bounds=e},Yr=function(A,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));t=e.parentNode;if(t){t.replaceChild(r,e);A=f(A,r);return r.firstChild&&t.replaceChild(r.firstChild,r),A}}return d.EMPTY},Wr=function(A,e,t){var r=A.ownerDocument;if(!r)throw new Error("Node has no owner document");r=r.createRange();return r.setStart(A,e),r.setEnd(A,e+t),r},Zr=function(A){if(Xr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(A)).map(function(A){return A.segment})}return function(A){for(var e,t=mr(A),r=[];!(e=t.next()).done;)e.value&&r.push(e.value.slice());return r}(A)},_r=function(A,e){return 0!==e.letterSpacing?Zr(A):function(A,e){if(Xr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(A)).map(function(A){return A.segment})}return jr(A,e)}(A,e)},qr=[32,160,4961,65792,65793,4153,4241],jr=function(A,e){for(var t,r=wA(A,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),B=[];!(t=r.next()).done;)!function(){var A,e;t.value&&(A=t.value.slice(),A=Q(A),e="",A.forEach(function(A){-1===qr.indexOf(A)?e+=g(A):(e.length&&B.push(e),B.push(g(A)),e="")}),e.length&&B.push(e))}();return B},zr=function(A,e,t){var B,n,s,o,i;this.text=$r(e.data,t.textTransform),this.textBounds=(B=A,A=this.text,s=e,A=_r(A,n=t),o=[],i=0,A.forEach(function(A){var e,t,r;n.textDecorationLine.length||0<A.trim().length?Xr.SUPPORT_RANGE_BOUNDS?1<(r=Wr(s,i,A.length).getClientRects()).length?(e=Zr(A),t=0,e.forEach(function(A){o.push(new Jr(A,d.fromDOMRectList(B,Wr(s,t+i,A.length).getClientRects()))),t+=A.length})):o.push(new Jr(A,d.fromDOMRectList(B,r))):(r=s.splitText(A.length),o.push(new Jr(A,Yr(B,s))),s=r):Xr.SUPPORT_RANGE_BOUNDS||(s=s.splitText(A.length)),i+=A.length}),o)},$r=function(A,e){switch(e){case 1:return A.toLowerCase();case 3:return A.replace(AB,eB);case 2:return A.toUpperCase();default:return A}},AB=/(^|\s|:|-|\(|\))([a-z])/g,eB=function(A,e,t){return 0<A.length?e+t.toUpperCase():A},tB=(A(rB,Sr=ur),rB);function rB(A,e){A=Sr.call(this,A,e)||this;return A.src=e.currentSrc||e.src,A.intrinsicWidth=e.naturalWidth,A.intrinsicHeight=e.naturalHeight,A.context.cache.addImage(A.src),A}var BB,nB=(A(sB,BB=ur),sB);function sB(A,e){A=BB.call(this,A,e)||this;return A.canvas=e,A.intrinsicWidth=e.width,A.intrinsicHeight=e.height,A}var oB,iB=(A(QB,oB=ur),QB);function QB(A,e){var t=oB.call(this,A,e)||this,r=new XMLSerializer,A=f(A,e);return e.setAttribute("width",A.width+"px"),e.setAttribute("height",A.height+"px"),t.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(e)),t.intrinsicWidth=e.width.baseVal.value,t.intrinsicHeight=e.height.baseVal.value,t.context.cache.addImage(t.svg),t}var cB,aB=(A(gB,cB=ur),gB);function gB(A,e){A=cB.call(this,A,e)||this;return A.value=e.value,A}var wB,UB=(A(lB,wB=ur),lB);function lB(A,e){A=wB.call(this,A,e)||this;return A.start=e.start,A.reversed="boolean"==typeof e.reversed&&!0===e.reversed,A}var CB,uB=[{type:15,flags:0,unit:"px",number:3}],FB=[{type:16,flags:0,number:50}],hB="checkbox",dB="radio",fB="password",HB=707406591,pB=(A(EB,CB=ur),EB);function EB(A,e){var t=CB.call(this,A,e)||this;switch(t.type=e.type.toLowerCase(),t.checked=e.checked,t.value=0===(e=(A=e).type===fB?new Array(A.value.length+1).join(""):A.value).length?A.placeholder||"":e,t.type!==hB&&t.type!==dB||(t.styles.backgroundColor=3739148031,t.styles.borderTopColor=t.styles.borderRightColor=t.styles.borderBottomColor=t.styles.borderLeftColor=2779096575,t.styles.borderTopWidth=t.styles.borderRightWidth=t.styles.borderBottomWidth=t.styles.borderLeftWidth=1,t.styles.borderTopStyle=t.styles.borderRightStyle=t.styles.borderBottomStyle=t.styles.borderLeftStyle=1,t.styles.backgroundClip=[0],t.styles.backgroundOrigin=[0],t.bounds=(e=t.bounds).width>e.height?new d(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new d(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e),t.type){case hB:t.styles.borderTopRightRadius=t.styles.borderTopLeftRadius=t.styles.borderBottomRightRadius=t.styles.borderBottomLeftRadius=uB;break;case dB:t.styles.borderTopRightRadius=t.styles.borderTopLeftRadius=t.styles.borderBottomRightRadius=t.styles.borderBottomLeftRadius=FB}return t}var IB,yB=(A(KB,IB=ur),KB);function KB(A,e){A=IB.call(this,A,e)||this,e=e.options[e.selectedIndex||0];return A.value=e&&e.text||"",A}var mB,LB=(A(bB,mB=ur),bB);function bB(A,e){A=mB.call(this,A,e)||this;return A.value=e.value,A}var DB,vB=(A(xB,DB=ur),xB);function xB(A,e){var t,r,B=DB.call(this,A,e)||this;B.src=e.src,B.width=parseInt(e.width,10)||0,B.height=parseInt(e.height,10)||0,B.backgroundColor=B.styles.backgroundColor;try{e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement&&(B.tree=kB(A,e.contentWindow.document.documentElement),t=e.contentWindow.document.documentElement?fe(A,getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):Le.TRANSPARENT,r=e.contentWindow.document.body?fe(A,getComputedStyle(e.contentWindow.document.body).backgroundColor):Le.TRANSPARENT,B.backgroundColor=oe(t)?oe(r)?B.styles.backgroundColor:r:t)}catch(A){}return B}function MB(A){return"VIDEO"===A.tagName}function SB(A){return"STYLE"===A.tagName}function TB(A){return 0<A.tagName.indexOf("-")}var GB=["OL","UL","MENU"],OB=function(e,A,t,r){for(var B=A.firstChild;B;B=s){var n,s=B.nextSibling;PB(B)&&0<B.data.trim().length?t.textNodes.push(new zr(e,B,t.styles)):XB(B)&&(rn(B)&&B.assignedNodes?B.assignedNodes().forEach(function(A){return OB(e,A,t,r)}):(n=VB(e,B)).styles.isVisible()&&(RB(B,n,r)?n.flags|=4:NB(n.styles)&&(n.flags|=2),-1!==GB.indexOf(B.tagName)&&(n.flags|=8),t.elements.push(n),B.slot,B.shadowRoot?OB(e,B.shadowRoot,n,r):en(B)||qB(B)||tn(B)||OB(e,B,n,r)))}},VB=function(A,e){return new($B(e)?tB:zB(e)?nB:qB(e)?iB:WB(e)?aB:ZB(e)?UB:_B(e)?pB:tn(e)?yB:en(e)?LB:An(e)?vB:ur)(A,e)},kB=function(A,e){var t=VB(A,e);return t.flags|=4,OB(A,e,t,t),t},RB=function(A,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||jB(A)&&t.styles.isTransparent()},NB=function(A){return A.isPositioned()||A.isFloating()},PB=function(A){return A.nodeType===Node.TEXT_NODE},XB=function(A){return A.nodeType===Node.ELEMENT_NODE},JB=function(A){return XB(A)&&void 0!==A.style&&!YB(A)},YB=function(A){return"object"==typeof A.className},WB=function(A){return"LI"===A.tagName},ZB=function(A){return"OL"===A.tagName},_B=function(A){return"INPUT"===A.tagName},qB=function(A){return"svg"===A.tagName},jB=function(A){return"BODY"===A.tagName},zB=function(A){return"CANVAS"===A.tagName},$B=function(A){return"IMG"===A.tagName},An=function(A){return"IFRAME"===A.tagName},en=function(A){return"TEXTAREA"===A.tagName},tn=function(A){return"SELECT"===A.tagName},rn=function(A){return"SLOT"===A.tagName},Bn=(nn.prototype.getCounterValue=function(A){A=this.counters[A];return A&&A.length?A[A.length-1]:1},nn.prototype.getCounterValues=function(A){A=this.counters[A];return A||[]},nn.prototype.pop=function(A){var e=this;A.forEach(function(A){return e.counters[A].pop()})},nn.prototype.parse=function(A){var t=this,e=A.counterIncrement,A=A.counterReset,r=!0;null!==e&&e.forEach(function(A){var e=t.counters[A.counter];e&&0!==A.increment&&(r=!1,e.length||e.push(1),e[Math.max(0,e.length-1)]+=A.increment)});var B=[];return r&&A.forEach(function(A){var e=t.counters[A.counter];B.push(A.counter),(e=e||(t.counters[A.counter]=[])).push(A.reset)}),B},nn);function nn(){this.counters={}}function sn(r,A,e,B,t,n){return r<A||e<r?Fn(r,t,0<n.length):B.integers.reduce(function(A,e,t){for(;e<=r;)r-=e,A+=B.values[t];return A},"")+n}function on(A,e,t,r){for(var B="";t||A--,B=r(A)+B,e<=(A/=e)*e;);return B}function Qn(A,e,t,r,B){var n=t-e+1;return(A<0?"-":"")+(on(Math.abs(A),n,r,function(A){return g(Math.floor(A%n)+e)})+B)}function cn(A,e,t){void 0===t&&(t=". ");var r=e.length;return on(Math.abs(A),r,!1,function(A){return e[Math.floor(A%r)]})+t}function an(A,e,t,r,B,n){if(A<-9999||9999<A)return Fn(A,4,0<B.length);var s=Math.abs(A),o=B;if(0===s)return e[0]+o;for(var i=0;0<s&&i<=4;i++){var Q=s%10;0==Q&&Pt(n,1)&&""!==o?o=e[Q]+o:1<Q||1==Q&&0===i||1==Q&&1===i&&Pt(n,2)||1==Q&&1===i&&Pt(n,4)&&100<A||1==Q&&1<i&&Pt(n,8)?o=e[Q]+(0<i?t[i-1]:"")+o:1==Q&&0<i&&(o=t[i-1]+o),s=Math.floor(s/10)}return(A<0?r:"")+o}var gn,wn={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Un={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ln={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Cn={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},un="",Fn=function(A,e,t){var r=t?". ":"",B=t?"":"",n=t?", ":"",s=t?" ":"";switch(e){case 0:return""+s;case 1:return""+s;case 2:return""+s;case 5:var o=Qn(A,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return cn(A,"",B);case 6:return sn(A,1,3999,wn,3,r).toLowerCase();case 7:return sn(A,1,3999,wn,3,r);case 8:return Qn(A,945,969,!1,r);case 9:return Qn(A,97,122,!1,r);case 10:return Qn(A,65,90,!1,r);case 11:return Qn(A,1632,1641,!0,r);case 12:case 49:return sn(A,1,9999,Un,3,r);case 35:return sn(A,1,9999,Un,3,r).toLowerCase();case 13:return Qn(A,2534,2543,!0,r);case 14:case 30:return Qn(A,6112,6121,!0,r);case 15:return cn(A,"",B);case 16:return cn(A,"",B);case 17:case 48:return an(A,"","","",B,14);case 47:return an(A,"","","",B,15);case 42:return an(A,"","","",B,14);case 41:return an(A,"","","",B,15);case 26:return an(A,"","","",B,0);case 25:return an(A,"","","",B,7);case 31:return an(A,"","",un,n,7);case 33:return an(A,"","",un,n,0);case 32:return an(A,"","",un,n,7);case 18:return Qn(A,2406,2415,!0,r);case 20:return sn(A,1,19999,Cn,3,r);case 21:return Qn(A,2790,2799,!0,r);case 22:return Qn(A,2662,2671,!0,r);case 22:return sn(A,1,10999,ln,3,r);case 23:return cn(A,"");case 24:return cn(A,"");case 27:return Qn(A,3302,3311,!0,r);case 28:return cn(A,"",B);case 29:return cn(A,"",B);case 34:return Qn(A,3792,3801,!0,r);case 37:return Qn(A,6160,6169,!0,r);case 38:return Qn(A,4160,4169,!0,r);case 39:return Qn(A,2918,2927,!0,r);case 40:return Qn(A,1776,1785,!0,r);case 43:return Qn(A,3046,3055,!0,r);case 44:return Qn(A,3174,3183,!0,r);case 45:return Qn(A,3664,3673,!0,r);case 46:return Qn(A,3872,3881,!0,r);default:return Qn(A,48,57,!0,r)}},hn="data-html2canvas-ignore",dn=(fn.prototype.toIFrame=function(A,r){var e=this,B=pn(A,r);if(!B.contentWindow)return Promise.reject("Unable to find iframe window");var t=A.defaultView.pageXOffset,n=A.defaultView.pageYOffset,s=B.contentWindow,o=s.document,A=In(B).then(function(){return a(e,void 0,void 0,function(){var e,t;return H(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(bn),s&&(s.scrollTo(r.left,r.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||s.scrollY===r.top&&s.scrollX===r.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(s.scrollX-r.left,s.scrollY-r.top,0,0))),e=this.options.onclone,void 0===(t=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,En(o)]:[3,4];case 3:A.sent(),A.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then(function(){return e(o,t)}).then(function(){return B})]:[2,B]}})})});return o.open(),o.write(mn(document.doctype)+"<html></html>"),Ln(this.referenceElement.ownerDocument,t,n),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),A},fn.prototype.createElementClone=function(A){if(Cr(A,2),zB(A))return this.createCanvasClone(A);if(MB(A))return this.createVideoClone(A);if(SB(A))return this.createStyleClone(A);var e=A.cloneNode(!1);return $B(e)&&($B(A)&&A.currentSrc&&A.currentSrc!==A.src&&(e.src=A.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),TB(e)?this.createCustomElementClone(e):e},fn.prototype.createCustomElementClone=function(A){var e=document.createElement("html2canvascustomelement");return Kn(A.style,e),e},fn.prototype.createStyleClone=function(A){try{var e=A.sheet;if(e&&e.cssRules){var t=[].slice.call(e.cssRules,0).reduce(function(A,e){return e&&"string"==typeof e.cssText?A+e.cssText:A},""),r=A.cloneNode(!1);return r.textContent=t,r}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),"SecurityError"!==A.name)throw A}return A.cloneNode(!1)},fn.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var t=e.ownerDocument.createElement("img");try{return t.src=e.toDataURL(),t}catch(A){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}t=e.cloneNode(!1);try{t.width=e.width,t.height=e.height;var r,B,n=e.getContext("2d"),s=t.getContext("2d");return s&&(!this.options.allowTaint&&n?s.putImageData(n.getImageData(0,0,e.width,e.height),0,0):(!(r=null!==(A=e.getContext("webgl2"))&&void 0!==A?A:e.getContext("webgl"))||!1===(null==(B=r.getContextAttributes())?void 0:B.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e),s.drawImage(e,0,0))),t}catch(A){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return t},fn.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var t=A.getContext("2d");try{return t&&(t.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||t.getImageData(0,0,A.width,A.height)),A}catch(A){this.context.logger.info("Unable to clone video as it is tainted",e)}A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},fn.prototype.appendChildNode=function(A,e,t){XB(e)&&("SCRIPT"===e.tagName||e.hasAttribute(hn)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&XB(e)&&SB(e)||A.appendChild(this.cloneNode(e,t))},fn.prototype.cloneChildNodes=function(A,e,t){for(var r,B=this,n=(A.shadowRoot||A).firstChild;n;n=n.nextSibling)XB(n)&&rn(n)&&"function"==typeof n.assignedNodes?(r=n.assignedNodes()).length&&r.forEach(function(A){return B.appendChildNode(e,A,t)}):this.appendChildNode(e,n,t)},fn.prototype.cloneNode=function(A,e){if(PB(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var t=A.ownerDocument.defaultView;if(t&&XB(A)&&(JB(A)||YB(A))){var r=this.createElementClone(A);r.style.transitionProperty="none";var B=t.getComputedStyle(A),n=t.getComputedStyle(A,":before"),s=t.getComputedStyle(A,":after");this.referenceElement===A&&JB(r)&&(this.clonedReferenceElement=r),jB(r)&&Mn(r);t=this.counters.parse(new Ur(this.context,B)),n=this.resolvePseudoContent(A,r,n,gn.BEFORE);TB(A)&&(e=!0),MB(A)||this.cloneChildNodes(A,r,e),n&&r.insertBefore(n,r.firstChild);s=this.resolvePseudoContent(A,r,s,gn.AFTER);return s&&r.appendChild(s),this.counters.pop(t),(B&&(this.options.copyStyles||YB(A))&&!An(A)||e)&&Kn(B,r),0===A.scrollTop&&0===A.scrollLeft||this.scrolledElements.push([r,A.scrollLeft,A.scrollTop]),(en(A)||tn(A))&&(en(r)||tn(r))&&(r.value=A.value),r}return A.cloneNode(!1)},fn.prototype.resolvePseudoContent=function(o,A,e,t){var i=this;if(e){var r=e.content,Q=A.ownerDocument;if(Q&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==e.display){this.counters.parse(new Ur(this.context,e));var c=new wr(this.context,e),a=Q.createElement("html2canvaspseudoelement");Kn(e,a),c.content.forEach(function(A){if(0===A.type)a.appendChild(Q.createTextNode(A.value));else if(22===A.type){var e=Q.createElement("img");e.src=A.value,e.style.opacity="1",a.appendChild(e)}else if(18===A.type){var t,r,B,n,s;"attr"===A.name?(e=A.values.filter(_A)).length&&a.appendChild(Q.createTextNode(o.getAttribute(e[0].value)||"")):"counter"===A.name?(B=(r=A.values.filter($A))[0],r=r[1],B&&_A(B)&&(t=i.counters.getCounterValue(B.value),s=r&&_A(r)?pt.parse(i.context,r.value):3,a.appendChild(Q.createTextNode(Fn(t,s,!1))))):"counters"===A.name&&(B=(t=A.values.filter($A))[0],s=t[1],r=t[2],B&&_A(B)&&(B=i.counters.getCounterValues(B.value),n=r&&_A(r)?pt.parse(i.context,r.value):3,s=s&&0===s.type?s.value:"",s=B.map(function(A){return Fn(A,n,!1)}).join(s),a.appendChild(Q.createTextNode(s))))}else if(20===A.type)switch(A.value){case"open-quote":a.appendChild(Q.createTextNode(Xt(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":a.appendChild(Q.createTextNode(Xt(c.quotes,--i.quoteDepth,!1)));break;default:a.appendChild(Q.createTextNode(A.value))}}),a.className=Dn+" "+vn;t=t===gn.BEFORE?" "+Dn:" "+vn;return YB(A)?A.className.baseValue+=t:A.className+=t,a}}},fn.destroy=function(A){return!!A.parentNode&&(A.parentNode.removeChild(A),!0)},fn);function fn(A,e,t){if(this.context=A,this.options=t,this.scrolledElements=[],this.referenceElement=e,this.counters=new Bn,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}(he=gn=gn||{})[he.BEFORE=0]="BEFORE",he[he.AFTER=1]="AFTER";function Hn(e){return new Promise(function(A){!e.complete&&e.src?(e.onload=A,e.onerror=A):A()})}var pn=function(A,e){var t=A.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(hn,"true"),A.body.appendChild(t),t},En=function(A){return Promise.all([].slice.call(A.images,0).map(Hn))},In=function(B){return new Promise(function(e,A){var t=B.contentWindow;if(!t)return A("No window assigned for iframe");var r=t.document;t.onload=B.onload=function(){t.onload=B.onload=null;var A=setInterval(function(){0<r.body.childNodes.length&&"complete"===r.readyState&&(clearInterval(A),e(B))},50)}})},yn=["all","d","content"],Kn=function(A,e){for(var t=A.length-1;0<=t;t--){var r=A.item(t);-1===yn.indexOf(r)&&e.style.setProperty(r,A.getPropertyValue(r))}return e},mn=function(A){var e="";return A&&(e+="<!DOCTYPE ",A.name&&(e+=A.name),A.internalSubset&&(e+=A.internalSubset),A.publicId&&(e+='"'+A.publicId+'"'),A.systemId&&(e+='"'+A.systemId+'"'),e+=">"),e},Ln=function(A,e,t){A&&A.defaultView&&(e!==A.defaultView.pageXOffset||t!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(e,t)},bn=function(A){var e=A[0],t=A[1],A=A[2];e.scrollLeft=t,e.scrollTop=A},Dn="___html2canvas___pseudoelement_before",vn="___html2canvas___pseudoelement_after",xn='{\n    content: "" !important;\n    display: none !important;\n}',Mn=function(A){Sn(A,"."+Dn+":before"+xn+"\n         ."+vn+":after"+xn)},Sn=function(A,e){var t=A.ownerDocument;t&&((t=t.createElement("style")).textContent=e,A.appendChild(t))},Tn=(Gn.getOrigin=function(A){var e=Gn._link;return e?(e.href=A,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},Gn.isSameOrigin=function(A){return Gn.getOrigin(A)===Gn._origin},Gn.setContext=function(A){Gn._link=A.document.createElement("a"),Gn._origin=Gn.getOrigin(A.location.href)},Gn._origin="about:blank",Gn);function Gn(){}var On=(Vn.prototype.addImage=function(A){var e=Promise.resolve();return this.has(A)||(Yn(A)||Pn(A))&&(this._cache[A]=this.loadImage(A)).catch(function(){}),e},Vn.prototype.match=function(A){return this._cache[A]},Vn.prototype.loadImage=function(s){return a(this,void 0,void 0,function(){var e,r,t,B,n=this;return H(this,function(A){switch(A.label){case 0:return(e=Tn.isSameOrigin(s),r=!Xn(s)&&!0===this._options.useCORS&&Xr.SUPPORT_CORS_IMAGES&&!e,t=!Xn(s)&&!e&&!Yn(s)&&"string"==typeof this._options.proxy&&Xr.SUPPORT_CORS_XHR&&!r,e||!1!==this._options.allowTaint||Xn(s)||Yn(s)||t||r)?(B=s,t?[4,this.proxy(B)]:[3,2]):[2];case 1:B=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+s.substring(0,256)),[4,new Promise(function(A,e){var t=new Image;t.onload=function(){return A(t)},t.onerror=e,(Jn(B)||r)&&(t.crossOrigin="anonymous"),t.src=B,!0===t.complete&&setTimeout(function(){return A(t)},500),0<n._options.imageTimeout&&setTimeout(function(){return e("Timed out ("+n._options.imageTimeout+"ms) loading image")},n._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},Vn.prototype.has=function(A){return void 0!==this._cache[A]},Vn.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},Vn.prototype.proxy=function(s){var o=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var Q=s.substring(0,256);return new Promise(function(e,t){var r=Xr.SUPPORT_RESPONSE_TYPE?"blob":"text",B=new XMLHttpRequest;B.onload=function(){var A;200===B.status?"text"==r?e(B.response):((A=new FileReader).addEventListener("load",function(){return e(A.result)},!1),A.addEventListener("error",function(A){return t(A)},!1),A.readAsDataURL(B.response)):t("Failed to proxy resource "+Q+" with status code "+B.status)},B.onerror=t;var A,n=-1<i.indexOf("?")?"&":"?";B.open("GET",i+n+"url="+encodeURIComponent(s)+"&responseType="+r),"text"!=r&&B instanceof XMLHttpRequest&&(B.responseType=r),o._options.imageTimeout&&(A=o._options.imageTimeout,B.timeout=A,B.ontimeout=function(){return t("Timed out ("+A+"ms) proxying "+Q)}),B.send()})},Vn);function Vn(A,e){this.context=A,this._options=e,this._cache={}}var kn=/^data:image\/svg\+xml/i,Rn=/^data:image\/.*;base64,/i,Nn=/^data:image\/.*/i,Pn=function(A){return Xr.SUPPORT_SVG_DRAWING||!Wn(A)},Xn=function(A){return Nn.test(A)},Jn=function(A){return Rn.test(A)},Yn=function(A){return"blob"===A.substr(0,4)},Wn=function(A){return"svg"===A.substr(-3).toLowerCase()||kn.test(A)},Zn=(_n.prototype.add=function(A,e){return new _n(this.x+A,this.y+e)},_n);function _n(A,e){this.type=0,this.x=A,this.y=e}function qn(A,e,t){return new Zn(A.x+(e.x-A.x)*t,A.y+(e.y-A.y)*t)}var jn=(zn.prototype.subdivide=function(A,e){var t=qn(this.start,this.startControl,A),r=qn(this.startControl,this.endControl,A),B=qn(this.endControl,this.end,A),n=qn(t,r,A),r=qn(r,B,A),A=qn(n,r,A);return e?new zn(this.start,t,n,A):new zn(A,r,B,this.end)},zn.prototype.add=function(A,e){return new zn(this.start.add(A,e),this.startControl.add(A,e),this.endControl.add(A,e),this.end.add(A,e))},zn.prototype.reverse=function(){return new zn(this.end,this.endControl,this.startControl,this.start)},zn);function zn(A,e,t,r){this.type=1,this.start=A,this.startControl=e,this.endControl=t,this.end=r}function $n(A){return 1===A.type}var As,es=function(A){var e=A.styles,t=A.bounds,r=(C=Be(e.borderTopLeftRadius,t.width,t.height))[0],B=C[1],n=(u=Be(e.borderTopRightRadius,t.width,t.height))[0],s=u[1],o=(F=Be(e.borderBottomRightRadius,t.width,t.height))[0],i=F[1],Q=(h=Be(e.borderBottomLeftRadius,t.width,t.height))[0],c=h[1];(d=[]).push((r+n)/t.width),d.push((Q+o)/t.width),d.push((B+c)/t.height),d.push((s+i)/t.height),1<(f=Math.max.apply(Math,d))&&(r/=f,B/=f,n/=f,s/=f,o/=f,i/=f,Q/=f,c/=f);var a=t.width-n,g=t.height-i,w=t.width-o,U=t.height-c,l=e.borderTopWidth,C=e.borderRightWidth,u=e.borderBottomWidth,F=e.borderLeftWidth,h=Ue(e.paddingTop,A.bounds.width),d=Ue(e.paddingRight,A.bounds.width),f=Ue(e.paddingBottom,A.bounds.width),A=Ue(e.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=0<r||0<B?ss(t.left+F/3,t.top+l/3,r-F/3,B-l/3,As.TOP_LEFT):new Zn(t.left+F/3,t.top+l/3),this.topRightBorderDoubleOuterBox=0<r||0<B?ss(t.left+a,t.top+l/3,n-C/3,s-l/3,As.TOP_RIGHT):new Zn(t.left+t.width-C/3,t.top+l/3),this.bottomRightBorderDoubleOuterBox=0<o||0<i?ss(t.left+w,t.top+g,o-C/3,i-u/3,As.BOTTOM_RIGHT):new Zn(t.left+t.width-C/3,t.top+t.height-u/3),this.bottomLeftBorderDoubleOuterBox=0<Q||0<c?ss(t.left+F/3,t.top+U,Q-F/3,c-u/3,As.BOTTOM_LEFT):new Zn(t.left+F/3,t.top+t.height-u/3),this.topLeftBorderDoubleInnerBox=0<r||0<B?ss(t.left+2*F/3,t.top+2*l/3,r-2*F/3,B-2*l/3,As.TOP_LEFT):new Zn(t.left+2*F/3,t.top+2*l/3),this.topRightBorderDoubleInnerBox=0<r||0<B?ss(t.left+a,t.top+2*l/3,n-2*C/3,s-2*l/3,As.TOP_RIGHT):new Zn(t.left+t.width-2*C/3,t.top+2*l/3),this.bottomRightBorderDoubleInnerBox=0<o||0<i?ss(t.left+w,t.top+g,o-2*C/3,i-2*u/3,As.BOTTOM_RIGHT):new Zn(t.left+t.width-2*C/3,t.top+t.height-2*u/3),this.bottomLeftBorderDoubleInnerBox=0<Q||0<c?ss(t.left+2*F/3,t.top+U,Q-2*F/3,c-2*u/3,As.BOTTOM_LEFT):new Zn(t.left+2*F/3,t.top+t.height-2*u/3),this.topLeftBorderStroke=0<r||0<B?ss(t.left+F/2,t.top+l/2,r-F/2,B-l/2,As.TOP_LEFT):new Zn(t.left+F/2,t.top+l/2),this.topRightBorderStroke=0<r||0<B?ss(t.left+a,t.top+l/2,n-C/2,s-l/2,As.TOP_RIGHT):new Zn(t.left+t.width-C/2,t.top+l/2),this.bottomRightBorderStroke=0<o||0<i?ss(t.left+w,t.top+g,o-C/2,i-u/2,As.BOTTOM_RIGHT):new Zn(t.left+t.width-C/2,t.top+t.height-u/2),this.bottomLeftBorderStroke=0<Q||0<c?ss(t.left+F/2,t.top+U,Q-F/2,c-u/2,As.BOTTOM_LEFT):new Zn(t.left+F/2,t.top+t.height-u/2),this.topLeftBorderBox=0<r||0<B?ss(t.left,t.top,r,B,As.TOP_LEFT):new Zn(t.left,t.top),this.topRightBorderBox=0<n||0<s?ss(t.left+a,t.top,n,s,As.TOP_RIGHT):new Zn(t.left+t.width,t.top),this.bottomRightBorderBox=0<o||0<i?ss(t.left+w,t.top+g,o,i,As.BOTTOM_RIGHT):new Zn(t.left+t.width,t.top+t.height),this.bottomLeftBorderBox=0<Q||0<c?ss(t.left,t.top+U,Q,c,As.BOTTOM_LEFT):new Zn(t.left,t.top+t.height),this.topLeftPaddingBox=0<r||0<B?ss(t.left+F,t.top+l,Math.max(0,r-F),Math.max(0,B-l),As.TOP_LEFT):new Zn(t.left+F,t.top+l),this.topRightPaddingBox=0<n||0<s?ss(t.left+Math.min(a,t.width-C),t.top+l,a>t.width+C?0:Math.max(0,n-C),Math.max(0,s-l),As.TOP_RIGHT):new Zn(t.left+t.width-C,t.top+l),this.bottomRightPaddingBox=0<o||0<i?ss(t.left+Math.min(w,t.width-F),t.top+Math.min(g,t.height-u),Math.max(0,o-C),Math.max(0,i-u),As.BOTTOM_RIGHT):new Zn(t.left+t.width-C,t.top+t.height-u),this.bottomLeftPaddingBox=0<Q||0<c?ss(t.left+F,t.top+Math.min(U,t.height-u),Math.max(0,Q-F),Math.max(0,c-u),As.BOTTOM_LEFT):new Zn(t.left+F,t.top+t.height-u),this.topLeftContentBox=0<r||0<B?ss(t.left+F+A,t.top+l+h,Math.max(0,r-(F+A)),Math.max(0,B-(l+h)),As.TOP_LEFT):new Zn(t.left+F+A,t.top+l+h),this.topRightContentBox=0<n||0<s?ss(t.left+Math.min(a,t.width+F+A),t.top+l+h,a>t.width+F+A?0:n-F+A,s-(l+h),As.TOP_RIGHT):new Zn(t.left+t.width-(C+d),t.top+l+h),this.bottomRightContentBox=0<o||0<i?ss(t.left+Math.min(w,t.width-(F+A)),t.top+Math.min(g,t.height+l+h),Math.max(0,o-(C+d)),i-(u+f),As.BOTTOM_RIGHT):new Zn(t.left+t.width-(C+d),t.top+t.height-(u+f)),this.bottomLeftContentBox=0<Q||0<c?ss(t.left+F+A,t.top+U,Math.max(0,Q-(F+A)),c-(u+f),As.BOTTOM_LEFT):new Zn(t.left+F+A,t.top+t.height-(u+f))};(he=As=As||{})[he.TOP_LEFT=0]="TOP_LEFT",he[he.TOP_RIGHT=1]="TOP_RIGHT",he[he.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",he[he.BOTTOM_LEFT=3]="BOTTOM_LEFT";function ts(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]}function rs(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]}function Bs(A){return 1===A.type}function ns(A,t){return A.length===t.length&&A.some(function(A,e){return A===t[e]})}var ss=function(A,e,t,r,B){var n=(Math.sqrt(2)-1)/3*4,s=t*n,o=r*n,i=A+t,Q=e+r;switch(B){case As.TOP_LEFT:return new jn(new Zn(A,Q),new Zn(A,Q-o),new Zn(i-s,e),new Zn(i,e));case As.TOP_RIGHT:return new jn(new Zn(A,e),new Zn(A+s,e),new Zn(i,Q-o),new Zn(i,Q));case As.BOTTOM_RIGHT:return new jn(new Zn(i,e),new Zn(i,e+o),new Zn(A+s,Q),new Zn(A,Q));default:As.BOTTOM_LEFT;return new jn(new Zn(i,Q),new Zn(i-s,Q),new Zn(A,e+o),new Zn(A,e))}},os=function(A,e,t){this.offsetX=A,this.offsetY=e,this.matrix=t,this.type=0,this.target=6},is=function(A,e){this.path=A,this.target=e,this.type=1},Qs=function(A){this.opacity=A,this.type=2,this.target=6},cs=function(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},as=(gs.prototype.getEffects=function(e){for(var A=-1===[2,3].indexOf(this.container.styles.position),t=this.parent,r=this.effects.slice(0);t;){var B,n,s=t.effects.filter(function(A){return!Bs(A)});A||0!==t.container.styles.position||!t.parent?(r.unshift.apply(r,s),A=-1===[2,3].indexOf(t.container.styles.position),0!==t.container.styles.overflowX&&(B=ts(t.curves),n=rs(t.curves),ns(B,n)||r.unshift(new is(n,6)))):r.unshift.apply(r,s),t=t.parent}return r.filter(function(A){return Pt(A.target,e)})},gs);function gs(A,e){var t,r;this.container=A,this.parent=e,this.effects=[],this.curves=new es(this.container),this.container.styles.opacity<1&&this.effects.push(new Qs(this.container.styles.opacity)),null!==this.container.styles.transform&&(e=this.container.bounds.left+this.container.styles.transformOrigin[0].number,t=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform,this.effects.push(new os(e,t,r))),0!==this.container.styles.overflowX&&(t=ts(this.curves),r=rs(this.curves),ns(t,r)?this.effects.push(new is(t,6)):(this.effects.push(new is(t,2)),this.effects.push(new is(r,4))))}function ws(A,e){switch(e){case 0:return Hs(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return Hs(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return Hs(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);default:return Hs(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}}function Us(A){var e=A.bounds,A=A.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))}function ls(A){var e=A.styles,t=A.bounds,r=Ue(e.paddingLeft,t.width),B=Ue(e.paddingRight,t.width),n=Ue(e.paddingTop,t.width),A=Ue(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,n+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+B),-(e.borderTopWidth+e.borderBottomWidth+n+A))}function Cs(A,e,t){var r=(B=Es(A.styles.backgroundOrigin,e),n=A,0===B?n.bounds:(2===B?ls:Us)(n)),B=(s=Es(A.styles.backgroundClip,e),o=A,0===s?o.bounds:(2===s?ls:Us)(o)),n=ps(Es(A.styles.backgroundSize,e),t,r),s=n[0],o=n[1],t=Be(Es(A.styles.backgroundPosition,e),r.width-s,r.height-o);return[Is(Es(A.styles.backgroundRepeat,e),t,n,r,B),Math.round(r.left+t[0]),Math.round(r.top+t[1]),s,o]}function us(A){return _A(A)&&A.value===Ve.AUTO}function Fs(A){return"number"==typeof A}var hs=function(Q,c,a,g){Q.container.elements.forEach(function(A){var e=Pt(A.flags,4),t=Pt(A.flags,2),r=new as(A,Q);Pt(A.styles.display,2048)&&g.push(r);var B,n,s,o,i=Pt(A.flags,8)?[]:g;e||t?(B=e||A.styles.isPositioned()?a:c,t=new cs(r),A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()?(n=A.styles.zIndex.order)<0?(s=0,B.negativeZIndex.some(function(A,e){return n>A.element.container.styles.zIndex.order?(s=e,!1):0<s}),B.negativeZIndex.splice(s,0,t)):0<n?(o=0,B.positiveZIndex.some(function(A,e){return n>=A.element.container.styles.zIndex.order?(o=e+1,!1):0<o}),B.positiveZIndex.splice(o,0,t)):B.zeroOrAutoZIndexOrTransformedOrOpacity.push(t):(A.styles.isFloating()?B.nonPositionedFloats:B.nonPositionedInlineLevel).push(t),hs(r,t,e?t:a,i)):((A.styles.isInlineLevel()?c.inlineLevel:c.nonInlineLevel).push(r),hs(r,c,a,i)),Pt(A.flags,8)&&ds(A,i)})},ds=function(A,e){for(var t=A instanceof UB?A.start:1,r=A instanceof UB&&A.reversed,B=0;B<e.length;B++){var n=e[B];n.container instanceof aB&&"number"==typeof n.container.value&&0!==n.container.value&&(t=n.container.value),n.listValue=Fn(t,n.container.styles.listStyleType,!0),t+=r?-1:1}},fs=function(A,e){var t=[];return $n(A)?t.push(A.subdivide(.5,!1)):t.push(A),$n(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Hs=function(A,e,t,r){var B=[];return $n(A)?B.push(A.subdivide(.5,!1)):B.push(A),$n(t)?B.push(t.subdivide(.5,!0)):B.push(t),$n(r)?B.push(r.subdivide(.5,!0).reverse()):B.push(r),$n(e)?B.push(e.subdivide(.5,!1).reverse()):B.push(e),B},ps=function(A,e,t){var r=e[0],B=e[1],n=e[2],s=A[0],o=A[1];if(!s)return[0,0];if(te(s)&&o&&te(o))return[Ue(s,t.width),Ue(o,t.height)];var i=Fs(n);if(_A(s)&&(s.value===Ve.CONTAIN||s.value===Ve.COVER))return Fs(n)?t.width/t.height<n!=(s.value===Ve.COVER)?[t.width,t.width/n]:[t.height*n,t.height]:[t.width,t.height];var Q=Fs(r),e=Fs(B),A=Q||e;if(us(s)&&(!o||us(o)))return Q&&e?[r,B]:i||A?A&&i?[Q?r:B*n,e?B:r/n]:[Q?r:t.width,e?B:t.height]:[t.width,t.height];if(i){var c=0,a=0;return te(s)?c=Ue(s,t.width):te(o)&&(a=Ue(o,t.height)),us(s)?c=a*n:o&&!us(o)||(a=c/n),[c,a]}c=null,a=null;if(te(s)?c=Ue(s,t.width):o&&te(o)&&(a=Ue(o,t.height)),null!==(c=null!==(a=null!==c&&(!o||us(o))?Q&&e?c/r*B:t.height:a)&&us(s)?Q&&e?a/B*r:t.width:c)&&null!==a)return[c,a];throw new Error("Unable to calculate background-size for element")},Es=function(A,e){e=A[e];return void 0===e?A[0]:e},Is=function(A,e,t,r,B){var n=e[0],s=e[1],o=t[0],i=t[1];switch(A){case 2:return[new Zn(Math.round(r.left),Math.round(r.top+s)),new Zn(Math.round(r.left+r.width),Math.round(r.top+s)),new Zn(Math.round(r.left+r.width),Math.round(i+r.top+s)),new Zn(Math.round(r.left),Math.round(i+r.top+s))];case 3:return[new Zn(Math.round(r.left+n),Math.round(r.top)),new Zn(Math.round(r.left+n+o),Math.round(r.top)),new Zn(Math.round(r.left+n+o),Math.round(r.height+r.top)),new Zn(Math.round(r.left+n),Math.round(r.height+r.top))];case 1:return[new Zn(Math.round(r.left+n),Math.round(r.top+s)),new Zn(Math.round(r.left+n+o),Math.round(r.top+s)),new Zn(Math.round(r.left+n+o),Math.round(r.top+s+i)),new Zn(Math.round(r.left+n),Math.round(r.top+s+i))];default:return[new Zn(Math.round(B.left),Math.round(B.top)),new Zn(Math.round(B.left+B.width),Math.round(B.top)),new Zn(Math.round(B.left+B.width),Math.round(B.height+B.top)),new Zn(Math.round(B.left),Math.round(B.height+B.top))]}},ys="Hidden Text",Ks=(ms.prototype.parseMetrics=function(A,e){var t=this._document.createElement("div"),r=this._document.createElement("img"),B=this._document.createElement("span"),n=this._document.body;t.style.visibility="hidden",t.style.fontFamily=A,t.style.fontSize=e,t.style.margin="0",t.style.padding="0",t.style.whiteSpace="nowrap",n.appendChild(t),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",B.style.fontFamily=A,B.style.fontSize=e,B.style.margin="0",B.style.padding="0",B.appendChild(this._document.createTextNode(ys)),t.appendChild(B),t.appendChild(r);e=r.offsetTop-B.offsetTop+2;t.removeChild(B),t.appendChild(this._document.createTextNode(ys)),t.style.lineHeight="normal",r.style.verticalAlign="super";r=r.offsetTop-t.offsetTop+2;return n.removeChild(t),{baseline:e,middle:r}},ms.prototype.getMetrics=function(A,e){var t=A+" "+e;return void 0===this._data[t]&&(this._data[t]=this.parseMetrics(A,e)),this._data[t]},ms);function ms(A){this._data={},this._document=A}var Ls,he=function(A,e){this.context=A,this.options=e},bs=(A(Ds,Ls=he),Ds.prototype.applyEffects=function(A){for(var e=this;this._activeEffects.length;)this.popEffect();A.forEach(function(A){return e.applyEffect(A)})},Ds.prototype.applyEffect=function(A){this.ctx.save(),2===A.type&&(this.ctx.globalAlpha=A.opacity),0===A.type&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),Bs(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},Ds.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},Ds.prototype.renderStack=function(e){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},Ds.prototype.renderNode=function(e){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return Pt(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return A.sent(),[4,this.renderNodeContent(e)];case 2:A.sent(),A.label=3;case 3:return[2]}})})},Ds.prototype.renderTextWithLetterSpacing=function(t,A,r){var B=this;0===A?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+r):Zr(t.text).reduce(function(A,e){return B.ctx.fillText(e,A,t.bounds.top+r),A+B.ctx.measureText(e).width},t.bounds.left)},Ds.prototype.createFontStyle=function(A){var e=A.fontVariant.filter(function(A){return"normal"===A||"small-caps"===A}).join(""),t=Gs(A.fontFamily).join(", "),r=WA(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,e,A.fontWeight,r,t].join(" "),t,r]},Ds.prototype.renderTextNode=function(i,Q){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o=this;return H(this,function(A){return r=this.createFontStyle(Q),e=r[0],t=r[1],r=r[2],this.ctx.font=e,this.ctx.direction=1===Q.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(t,r),B=r.baseline,n=r.middle,s=Q.paintOrder,i.textBounds.forEach(function(t){s.forEach(function(A){switch(A){case 0:o.ctx.fillStyle=ie(Q.color),o.renderTextWithLetterSpacing(t,Q.letterSpacing,B);var e=Q.textShadow;e.length&&t.text.trim().length&&(e.slice(0).reverse().forEach(function(A){o.ctx.shadowColor=ie(A.color),o.ctx.shadowOffsetX=A.offsetX.number*o.options.scale,o.ctx.shadowOffsetY=A.offsetY.number*o.options.scale,o.ctx.shadowBlur=A.blur.number,o.renderTextWithLetterSpacing(t,Q.letterSpacing,B)}),o.ctx.shadowColor="",o.ctx.shadowOffsetX=0,o.ctx.shadowOffsetY=0,o.ctx.shadowBlur=0),Q.textDecorationLine.length&&(o.ctx.fillStyle=ie(Q.textDecorationColor||Q.color),Q.textDecorationLine.forEach(function(A){switch(A){case 1:o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+B),t.bounds.width,1);break;case 2:o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:o.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+n),t.bounds.width,1)}}));break;case 1:Q.webkitTextStrokeWidth&&t.text.trim().length&&(o.ctx.strokeStyle=ie(Q.webkitTextStrokeColor),o.ctx.lineWidth=Q.webkitTextStrokeWidth,o.ctx.lineJoin=window.chrome?"miter":"round",o.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+B)),o.ctx.strokeStyle="",o.ctx.lineWidth=0,o.ctx.lineJoin="miter"}})}),[2]})})},Ds.prototype.renderReplacedElement=function(A,e,t){var r;t&&0<A.intrinsicWidth&&0<A.intrinsicHeight&&(r=ls(A),e=rs(e),this.path(e),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(t,0,0,A.intrinsicWidth,A.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore())},Ds.prototype.renderNodeContent=function(w){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g;return H(this,function(A){switch(A.label){case 0:this.applyEffects(w.getEffects(4)),e=w.container,t=w.curves,r=e.styles,B=0,n=e.textNodes,A.label=1;case 1:return B<n.length?(s=n[B],[4,this.renderTextNode(s,r)]):[3,4];case 2:A.sent(),A.label=3;case 3:return B++,[3,1];case 4:if(!(e instanceof tB))return[3,8];A.label=5;case 5:return A.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return Q=A.sent(),this.renderReplacedElement(e,t,Q),[3,8];case 7:return A.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof nB&&this.renderReplacedElement(e,t,e.canvas),!(e instanceof iB))return[3,12];A.label=9;case 9:return A.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return Q=A.sent(),this.renderReplacedElement(e,t,Q),[3,12];case 11:return A.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof vB&&e.tree?[4,new Ds(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:s=A.sent(),e.width&&e.height&&this.ctx.drawImage(s,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),A.label=14;case 14:if(e instanceof pB&&(i=Math.min(e.bounds.width,e.bounds.height),e.type===hB?e.checked&&(this.ctx.save(),this.path([new Zn(e.bounds.left+.39363*i,e.bounds.top+.79*i),new Zn(e.bounds.left+.16*i,e.bounds.top+.5549*i),new Zn(e.bounds.left+.27347*i,e.bounds.top+.44071*i),new Zn(e.bounds.left+.39694*i,e.bounds.top+.5649*i),new Zn(e.bounds.left+.72983*i,e.bounds.top+.23*i),new Zn(e.bounds.left+.84*i,e.bounds.top+.34085*i),new Zn(e.bounds.left+.39363*i,e.bounds.top+.79*i)]),this.ctx.fillStyle=ie(HB),this.ctx.fill(),this.ctx.restore()):e.type===dB&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+i/2,e.bounds.top+i/2,i/4,0,2*Math.PI,!0),this.ctx.fillStyle=ie(HB),this.ctx.fill(),this.ctx.restore())),xs(e)&&e.value.length){switch(c=this.createFontStyle(r),a=c[0],i=c[1],c=this.fontMetrics.getMetrics(a,i).baseline,this.ctx.font=a,this.ctx.fillStyle=ie(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Ss(e.styles.textAlign),g=ls(e),o=0,e.styles.textAlign){case 1:o+=g.width/2;break;case 2:o+=g.width}i=g.add(o,0,0,-g.height/2+1),this.ctx.save(),this.path([new Zn(g.left,g.top),new Zn(g.left+g.width,g.top),new Zn(g.left+g.width,g.top+g.height),new Zn(g.left,g.top+g.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jr(e.value,i),r.letterSpacing,c),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pt(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(c=e.styles.listStyleImage).type)return[3,18];Q=void 0,c=c.url,A.label=15;case 15:return A.trys.push([15,17,,18]),[4,this.context.cache.match(c)];case 16:return Q=A.sent(),this.ctx.drawImage(Q,e.bounds.left-(Q.width+10),e.bounds.top),[3,18];case 17:return A.sent(),this.context.logger.error("Error loading list-style-image "+c),[3,18];case 18:return[3,20];case 19:w.listValue&&-1!==e.styles.listStyleType&&(a=this.createFontStyle(r)[0],this.ctx.font=a,this.ctx.fillStyle=ie(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",g=new d(e.bounds.left,e.bounds.top+Ue(e.styles.paddingTop,e.bounds.width),e.bounds.width,Ye(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jr(w.listValue,g),r.letterSpacing,Ye(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),A.label=20;case 20:return[2]}})})},Ds.prototype.renderStackContent=function(C){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g,w,U,l;return H(this,function(A){switch(A.label){case 0:return Pt(C.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(C.element)];case 1:A.sent(),e=0,t=C.negativeZIndex,A.label=2;case 2:return e<t.length?(l=t[e],[4,this.renderStack(l)]):[3,5];case 3:A.sent(),A.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(C.element)];case 6:A.sent(),r=0,B=C.nonInlineLevel,A.label=7;case 7:return r<B.length?(l=B[r],[4,this.renderNode(l)]):[3,10];case 8:A.sent(),A.label=9;case 9:return r++,[3,7];case 10:n=0,s=C.nonPositionedFloats,A.label=11;case 11:return n<s.length?(l=s[n],[4,this.renderStack(l)]):[3,14];case 12:A.sent(),A.label=13;case 13:return n++,[3,11];case 14:o=0,i=C.nonPositionedInlineLevel,A.label=15;case 15:return o<i.length?(l=i[o],[4,this.renderStack(l)]):[3,18];case 16:A.sent(),A.label=17;case 17:return o++,[3,15];case 18:Q=0,c=C.inlineLevel,A.label=19;case 19:return Q<c.length?(l=c[Q],[4,this.renderNode(l)]):[3,22];case 20:A.sent(),A.label=21;case 21:return Q++,[3,19];case 22:a=0,g=C.zeroOrAutoZIndexOrTransformedOrOpacity,A.label=23;case 23:return a<g.length?(l=g[a],[4,this.renderStack(l)]):[3,26];case 24:A.sent(),A.label=25;case 25:return a++,[3,23];case 26:w=0,U=C.positiveZIndex,A.label=27;case 27:return w<U.length?(l=U[w],[4,this.renderStack(l)]):[3,30];case 28:A.sent(),A.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},Ds.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},Ds.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},Ds.prototype.formatPath=function(A){var r=this;A.forEach(function(A,e){var t=$n(A)?A.start:A;0===e?r.ctx.moveTo(t.x,t.y):r.ctx.lineTo(t.x,t.y),$n(A)&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},Ds.prototype.renderRepeat=function(A,e,t,r){this.path(A),this.ctx.fillStyle=e,this.ctx.translate(t,r),this.ctx.fill(),this.ctx.translate(-t,-r)},Ds.prototype.resizeImage=function(A,e,t){if(A.width===e&&A.height===t)return A;var r=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return r.width=Math.max(1,e),r.height=Math.max(1,t),r.getContext("2d").drawImage(A,0,0,A.width,A.height,0,0,e,t),r},Ds.prototype.renderBackgroundImage=function(f){return a(this,void 0,void 0,function(){var h,e,d,t,r,B;return H(this,function(A){switch(A.label){case 0:h=f.styles.backgroundImage.length-1,e=function(e){var t,r,B,n,s,o,i,Q,c,a,g,w,U,l,C,u,F;return H(this,function(A){switch(A.label){case 0:if(0!==e.type)return[3,5];t=void 0,r=e.url,A.label=1;case 1:return A.trys.push([1,3,,4]),[4,d.context.cache.match(r)];case 2:return t=A.sent(),[3,4];case 3:return A.sent(),d.context.logger.error("Error loading background-image "+r),[3,4];case 4:return t&&(B=Cs(f,h,[t.width,t.height,t.width/t.height]),o=B[0],g=B[1],w=B[2],c=B[3],a=B[4],s=d.ctx.createPattern(d.resizeImage(t,c,a),"repeat"),d.renderRepeat(o,s,g,w)),[3,6];case 5:1===e.type?(F=Cs(f,h,[null,null,null]),o=F[0],g=F[1],w=F[2],c=F[3],a=F[4],C=Ee(e.angle,c,a),l=C[0],B=C[1],i=C[2],u=C[3],Q=C[4],(F=document.createElement("canvas")).width=c,F.height=a,C=F.getContext("2d"),n=C.createLinearGradient(B,u,i,Q),pe(e.stops,l).forEach(function(A){return n.addColorStop(A.stop,ie(A.color))}),C.fillStyle=n,C.fillRect(0,0,c,a),0<c&&0<a&&(s=d.ctx.createPattern(F,"repeat"),d.renderRepeat(o,s,g,w))):2===e.type&&(u=Cs(f,h,[null,null,null]),o=u[0],i=u[1],Q=u[2],c=u[3],a=u[4],l=0===e.position.length?[ge]:e.position,g=Ue(l[0],c),w=Ue(l[l.length-1],a),C=function(A,e,t,r,B){var n,s,o,i,Q=0,c=0;switch(A.size){case 0:0===A.shape?Q=c=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-B)):1===A.shape&&(Q=Math.min(Math.abs(e),Math.abs(e-r)),c=Math.min(Math.abs(t),Math.abs(t-B)));break;case 2:0===A.shape?Q=c=Math.min(Ie(e,t),Ie(e,t-B),Ie(e-r,t),Ie(e-r,t-B)):1===A.shape&&(n=Math.min(Math.abs(t),Math.abs(t-B))/Math.min(Math.abs(e),Math.abs(e-r)),o=(s=ye(r,B,e,t,!0))[0],i=s[1],c=n*(Q=Ie(o-e,(i-t)/n)));break;case 1:0===A.shape?Q=c=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-B)):1===A.shape&&(Q=Math.max(Math.abs(e),Math.abs(e-r)),c=Math.max(Math.abs(t),Math.abs(t-B)));break;case 3:0===A.shape?Q=c=Math.max(Ie(e,t),Ie(e,t-B),Ie(e-r,t),Ie(e-r,t-B)):1===A.shape&&(n=Math.max(Math.abs(t),Math.abs(t-B))/Math.max(Math.abs(e),Math.abs(e-r)),o=(s=ye(r,B,e,t,!1))[0],i=s[1],c=n*(Q=Ie(o-e,(i-t)/n)))}return Array.isArray(A.size)&&(Q=Ue(A.size[0],r),c=2===A.size.length?Ue(A.size[1],B):Q),[Q,c]}(e,g,w,c,a),F=C[0],u=C[1],0<F&&0<u&&(U=d.ctx.createRadialGradient(i+g,Q+w,0,i+g,Q+w,F),pe(e.stops,2*F).forEach(function(A){return U.addColorStop(A.stop,ie(A.color))}),d.path(o),d.ctx.fillStyle=U,F!==u?(l=f.bounds.left+.5*f.bounds.width,C=f.bounds.top+.5*f.bounds.height,F=1/(u=u/F),d.ctx.save(),d.ctx.translate(l,C),d.ctx.transform(1,0,0,u,0,0),d.ctx.translate(-l,-C),d.ctx.fillRect(i,F*(Q-C)+C,c,a*F),d.ctx.restore()):d.ctx.fill())),A.label=6;case 6:return h--,[2]}})},d=this,t=0,r=f.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return t<r.length?(B=r[t],[5,e(B)]):[3,4];case 2:A.sent(),A.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},Ds.prototype.renderSolidBorder=function(e,t,r){return a(this,void 0,void 0,function(){return H(this,function(A){return this.path(ws(r,t)),this.ctx.fillStyle=ie(e),this.ctx.fill(),[2]})})},Ds.prototype.renderDoubleBorder=function(t,r,B,n){return a(this,void 0,void 0,function(){var e;return H(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,B,n)]:[3,2];case 1:return A.sent(),[2];case 2:return e=function(A,e){switch(e){case 0:return Hs(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return Hs(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return Hs(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);default:return Hs(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}}(n,B),this.path(e),this.ctx.fillStyle=ie(t),this.ctx.fill(),e=function(A,e){switch(e){case 0:return Hs(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return Hs(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return Hs(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);default:return Hs(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}}(n,B),this.path(e),this.ctx.fill(),[2]}})})},Ds.prototype.renderNodeBackgroundAndBorders=function(c){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q=this;return H(this,function(A){switch(A.label){case 0:return(this.applyEffects(c.getEffects(2)),e=c.container.styles,t=!oe(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],B=Ms(Es(e.backgroundClip,0),c.curves),t||e.boxShadow.length)?(this.ctx.save(),this.path(B),this.ctx.clip(),oe(e.backgroundColor)||(this.ctx.fillStyle=ie(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(c.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach(function(A){Q.ctx.save();var t,r,B,n,e=ts(c.curves),s=A.inset?0:1e4,o=(t=-s+(A.inset?1:-1)*A.spread.number,r=(A.inset?1:-1)*A.spread.number,B=A.spread.number*(A.inset?-2:2),n=A.spread.number*(A.inset?-2:2),e.map(function(A,e){switch(e){case 0:return A.add(t,r);case 1:return A.add(t+B,r);case 2:return A.add(t+B,r+n);case 3:return A.add(t,r+n)}return A}));A.inset?(Q.path(e),Q.ctx.clip(),Q.mask(o)):(Q.mask(e),Q.ctx.clip(),Q.path(o)),Q.ctx.shadowOffsetX=A.offsetX.number+s,Q.ctx.shadowOffsetY=A.offsetY.number,Q.ctx.shadowColor=ie(A.color),Q.ctx.shadowBlur=A.blur.number,Q.ctx.fillStyle=A.inset?ie(A.color):"rgba(0,0,0,1)",Q.ctx.fill(),Q.ctx.restore()}),A.label=2;case 2:s=n=0,o=r,A.label=3;case 3:return s<o.length?0!==(i=o[s]).style&&!oe(i.color)&&0<i.width?2!==i.style?[3,5]:[4,this.renderDashedDottedBorder(i.color,i.width,n,c.curves,2)]:[3,11]:[3,13];case 4:return A.sent(),[3,11];case 5:return 3!==i.style?[3,7]:[4,this.renderDashedDottedBorder(i.color,i.width,n,c.curves,3)];case 6:return A.sent(),[3,11];case 7:return 4!==i.style?[3,9]:[4,this.renderDoubleBorder(i.color,i.width,n,c.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(i.color,n,c.curves)];case 10:A.sent(),A.label=11;case 11:n++,A.label=12;case 12:return s++,[3,3];case 13:return[2]}})})},Ds.prototype.renderDashedDottedBorder=function(g,w,U,l,C){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a;return H(this,function(A){return this.ctx.save(),Q=function(A,e){switch(e){case 0:return fs(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return fs(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return fs(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);default:return fs(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}}(l,U),e=ws(l,U),2===C&&(this.path(e),this.ctx.clip()),s=$n(e[0])?(t=e[0].start.x,e[0].start.y):(t=e[0].x,e[0].y),o=$n(e[1])?(r=e[1].end.x,e[1].end.y):(r=e[1].x,e[1].y),B=0===U||2===U?Math.abs(t-r):Math.abs(s-o),this.ctx.beginPath(),3===C?this.formatPath(Q):this.formatPath(e.slice(0,2)),n=w<3?3*w:2*w,s=w<3?2*w:w,3===C&&(s=n=w),o=!0,B<=2*n?o=!1:B<=2*n+s?(n*=i=B/(2*n+s),s*=i):(Q=Math.floor((B+s)/(n+s)),i=(B-Q*n)/(Q-1),s=(Q=(B-(Q+1)*n)/Q)<=0||Math.abs(s-i)<Math.abs(s-Q)?i:Q),o&&(3===C?this.ctx.setLineDash([0,n+s]):this.ctx.setLineDash([n,s])),3===C?(this.ctx.lineCap="round",this.ctx.lineWidth=w):this.ctx.lineWidth=2*w+1.1,this.ctx.strokeStyle=ie(g),this.ctx.stroke(),this.ctx.setLineDash([]),2===C&&($n(e[0])&&(c=e[3],a=e[0],this.ctx.beginPath(),this.formatPath([new Zn(c.end.x,c.end.y),new Zn(a.start.x,a.start.y)]),this.ctx.stroke()),$n(e[1])&&(c=e[1],a=e[2],this.ctx.beginPath(),this.formatPath([new Zn(c.end.x,c.end.y),new Zn(a.start.x,a.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},Ds.prototype.render=function(B){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ie(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=new as(e=B,null),r=new cs(t),hs(t,r,r,e=[]),ds(t.container,e),[4,this.renderStack(r)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}var e,t,r})})},Ds);function Ds(A,e){A=Ls.call(this,A,e)||this;return A._activeEffects=[],A.canvas=e.canvas||document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),e.canvas||(A.canvas.width=Math.floor(e.width*e.scale),A.canvas.height=Math.floor(e.height*e.scale),A.canvas.style.width=e.width+"px",A.canvas.style.height=e.height+"px"),A.fontMetrics=new Ks(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-e.x,-e.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+e.width+"x"+e.height+") with scale "+e.scale),A}var vs,xs=function(A){return A instanceof LB||(A instanceof yB||A instanceof pB&&A.type!==dB&&A.type!==hB)},Ms=function(A,e){switch(A){case 0:return ts(e);case 2:return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox];default:return rs(e)}},Ss=function(A){switch(A){case 1:return"center";case 2:return"right";default:return"left"}},Ts=["-apple-system","system-ui"],Gs=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter(function(A){return-1===Ts.indexOf(A)}):A},Os=(A(Vs,vs=he),Vs.prototype.render=function(t){return a(this,void 0,void 0,function(){var e;return H(this,function(A){switch(A.label){case 0:return e=Nr(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,ks(e)];case 1:return e=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ie(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(e,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},Vs);function Vs(A,e){A=vs.call(this,A,e)||this;return A.canvas=e.canvas||document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=e,A.canvas.width=Math.floor(e.width*e.scale),A.canvas.height=Math.floor(e.height*e.scale),A.canvas.style.width=e.width+"px",A.canvas.style.height=e.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-e.x,-e.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale),A}var ks=function(r){return new Promise(function(A,e){var t=new Image;t.onload=function(){A(t)},t.onerror=e,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})},Rs=(Ns.prototype.debug=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.prototype.getTime=function(){return Date.now()-this.start},Ns.prototype.info=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,t([this.id,this.getTime()+"ms"],A))},Ns.prototype.warn=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.prototype.error=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.instances={},Ns);function Ns(A){var e=A.id,A=A.enabled;this.id=e,this.enabled=A,this.start=Date.now()}var Ps=(Xs.instanceCount=1,Xs);function Xs(A,e){this.windowBounds=e,this.instanceName="#"+Xs.instanceCount++,this.logger=new Rs({id:this.instanceName,enabled:A.logging}),this.cache=null!==(e=A.cache)&&void 0!==e?e:new On(this,A)}"undefined"!=typeof window&&Tn.setContext(window);var Js=function(u,F){return a(void 0,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g,w,U,l,C;return H(this,function(A){switch(A.label){case 0:if(!u||"object"!=typeof u)return[2,Promise.reject("Invalid element provided as first argument")];if(!(e=u.ownerDocument))throw new Error("Element is not attached to a Document");if(!(t=e.defaultView))throw new Error("Document is not attached to a Window");return w={allowTaint:null!==(U=F.allowTaint)&&void 0!==U&&U,imageTimeout:null!==(c=F.imageTimeout)&&void 0!==c?c:15e3,proxy:F.proxy,useCORS:null!==(a=F.useCORS)&&void 0!==a&&a},U=h({logging:null===(g=F.logging)||void 0===g||g,cache:F.cache},w),c={windowWidth:null!==(c=F.windowWidth)&&void 0!==c?c:t.innerWidth,windowHeight:null!==(a=F.windowHeight)&&void 0!==a?a:t.innerHeight,scrollX:null!==(g=F.scrollX)&&void 0!==g?g:t.pageXOffset,scrollY:null!==(w=F.scrollY)&&void 0!==w?w:t.pageYOffset},a=new d(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),g=new Ps(U,a),c=null!==(w=F.foreignObjectRendering)&&void 0!==w&&w,w={allowTaint:null!==(U=F.allowTaint)&&void 0!==U&&U,onclone:F.onclone,ignoreElements:F.ignoreElements,inlineImages:c,copyStyles:c},g.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),U=new dn(g,u,w),(w=U.clonedReferenceElement)?[4,U.toIFrame(e,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return(r=A.sent(),l=jB(w)||"HTML"===w.tagName?function(A){var e=A.body,t=A.documentElement;if(!e||!t)throw new Error("Unable to get document size");A=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),t=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new d(0,0,A,t)}(w.ownerDocument):f(g,w),B=l.width,n=l.height,s=l.left,o=l.top,i=Ys(g,w,F.backgroundColor),l={canvas:F.canvas,backgroundColor:i,scale:null!==(l=null!==(l=F.scale)&&void 0!==l?l:t.devicePixelRatio)&&void 0!==l?l:1,x:(null!==(l=F.x)&&void 0!==l?l:0)+s,y:(null!==(l=F.y)&&void 0!==l?l:0)+o,width:null!==(l=F.width)&&void 0!==l?l:Math.ceil(B),height:null!==(l=F.height)&&void 0!==l?l:Math.ceil(n)},c)?(g.logger.debug("Document cloned, using foreign object rendering"),[4,new Os(g,l).render(w)]):[3,3];case 2:return Q=A.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+s+","+o+" with size "+B+"x"+n+" using computed rendering"),g.logger.debug("Starting DOM parsing"),C=kB(g,w),i===C.styles.backgroundColor&&(C.styles.backgroundColor=Le.TRANSPARENT),g.logger.debug("Starting renderer for element at "+l.x+","+l.y+" with size "+l.width+"x"+l.height),[4,new bs(g,l).render(C)];case 4:Q=A.sent(),A.label=5;case 5:return null!==(C=F.removeContainer)&&void 0!==C&&!C||dn.destroy(r)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore"),g.logger.debug("Finished rendering"),[2,Q]}})})},Ys=function(A,e,t){var r=e.ownerDocument,B=r.documentElement?fe(A,getComputedStyle(r.documentElement).backgroundColor):Le.TRANSPARENT,n=r.body?fe(A,getComputedStyle(r.body).backgroundColor):Le.TRANSPARENT,t="string"==typeof t?fe(A,t):null===t?Le.TRANSPARENT:4294967295;return e===r.documentElement?oe(B)?oe(n)?t:n:B:t};return function(A,e){return Js(A,e=void 0===e?{}:e)}});
define('extensions/author-ispring-training/js/bootstrap',[
  "core/js/adapt",
  "./stateManager.js",
  "../libraries/html2canvas.js",
], function (Adapt, StateManager, html2canvas) {
  window.Adapt = Adapt;
  window.html2canvas = html2canvas;

  Adapt.once("adapt:start", function onAdaptStarted() {
    new StateManager();
  });

  Adapt.once("app:dataReady", function () {
    configureStartPage();
  });

  function configureStartPage() {
    var isPresentationWindow = window.name === "contntWdw";
    var isThumbnailView = window.name === "ispring-thumbnail";

    var firstPage = Adapt.contentObjects.models[0];
    var _start = {
      _isEnabled: isPresentationWindow || isThumbnailView,
      _startIds: [
        {
          _id: firstPage.get("_id"),
          _skipIfComplete: false,
          _className: "",
        },
      ],
      _force: true,
      _isMenuDisabled: true,
    };

    if (window.name === "fast-preview") {
      _start._isEnabled = true;
    }

    if (window.name === "ispring-thumbnail") {
      _start._isEnabled = true;
    }

    Adapt.course.set("_start", _start);
  }
});

define('core/js/views/menuItemView',[
  'core/js/views/adaptView'
], function(AdaptView) {

  var MenuItemView = AdaptView.extend({

    attributes: function() {
      return AdaptView.resultExtend('attributes', {
        'role': 'listitem',
        'aria-labelledby': this.model.get('_id') + '-heading'
      }, this);
    },

    className: function() {
      return [
        'menu-item',
        this.constructor.className,
        this.model.get('_id'),
        this.model.get('_classes'),
        this.setVisibility(),
        this.setHidden(),
        (this.model.get('_isVisited') ? 'is-visited' : ''),
        (this.model.get('_isComplete') ? 'is-complete' : ''),
        (this.model.get('_isLocked') ? 'is-locked' : ''),
        (this.model.get('_isOptional') ? 'is-optional' : '')
      ].join(' ');
    },

    preRender: function() {
      this.model.checkCompletionStatus();
      this.model.checkInteractionCompletionStatus();
    },

    postRender: function() {
      this.$el.imageready(this.setReadyStatus.bind(this));
    }

  }, {
    type: 'menuItem'
  });

  return MenuItemView;

});

define('core/js/views/menuView',[
  'core/js/adapt',
  'core/js/views/adaptView',
  'core/js/views/menuItemView'
], function(Adapt, AdaptView, MenuItemView) {

  var MenuView = AdaptView.extend({

    attributes: function() {
      return AdaptView.resultExtend('attributes', {
        'role': 'main',
        'aria-labelledby': this.model.get('_id')+'-heading'
      }, this);
    },

    className: function() {
      return [
        'menu',
        this.constructor.className,
        this.model.get('_id'),
        this.model.get('_classes'),
        this.setVisibility(),
        (this.model.get('_isComplete') ? 'is-complete' : ''),
        (this.model.get('_isOptional') ? 'is-optional' : '')
      ].join(' ');
    },

    preRender: function() {
      $.inview.lock('menuView');
      this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;
      this.$el.css('opacity', 0);
      this.listenTo(this.model, 'change:_isReady', this.isReady);
    },

    isReady: function() {
      if (!this.model.get('_isReady')) return;

      var performIsReady = function() {
        $('.js-loading').hide();
        $(window).scrollTop(0);
        Adapt.trigger('menuView:ready', this);
        $.inview.unlock('menuView');
        var styleOptions = { opacity: 1 };
        if (this.disableAnimation) {
          this.$el.css(styleOptions);
          $.inview();
        } else {
          this.$el.velocity(styleOptions, {
            duration: 'fast',
            complete: function() {
              $.inview();
            }
          });
        }
        $(window).scroll();
      }.bind(this);

      Adapt.wait.queue(function() {
        _.defer(performIsReady);
      });
    }

  }, {
    childContainer: '.js-children',
    childView: MenuItemView,
    type: 'menu',
    template: 'menu'
  });

  return MenuView;

});

define('menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenuItemView',[
  "core/js/views/menuItemView"
], function(MenuItemView) {

  var BoxMenuItemView = MenuItemView.extend({

    events: {
      'click .js-btn-click' : 'onClickMenuItemButton'
    },

    onClickMenuItemButton: function(event) {
      if (event && event.preventDefault) event.preventDefault();
      if (this.model.get('_isLocked')) return;
      Backbone.history.navigate('#/id/' + this.model.get('_id'), {trigger: true});
    }

  }, {
    className: 'boxmenu-item',
    template: 'boxMenuItem'
  });

  return BoxMenuItemView;

});

define('menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenu',[
  'core/js/adapt',
  'core/js/views/menuView',
  "./adapt-contrib-boxMenuItemView"
], function(Adapt, MenuView, BoxMenuItemView) {

  var BoxMenuView = MenuView.extend({

    initialize: function() {
      MenuView.prototype.initialize.apply(this);
      this.setStyles();

      this.listenTo(Adapt, {
        "device:changed": this.onDeviceResize
      });
    },

    onDeviceResize: function() {
      this.setStyles();
    },

    setStyles: function() {
      this.setBackgroundImage();
      this.setBackgroundStyles();
      this.processHeader();
    },

    setBackgroundImage: function() {
      var config = this.model.get('_boxMenu');
      var backgroundImages = config && config._backgroundImage;

      if (!backgroundImages) return;

      var backgroundImage;

      switch (Adapt.device.screenSize) {
        case "large":
          backgroundImage = backgroundImages._large;
          break;
        case "medium":
          backgroundImage = backgroundImages._medium;
          break;
        default:
          backgroundImage = backgroundImages._small;
      }

      if (backgroundImage) {
        this.$el
          .addClass("has-bg-image")
          .css("background-image", "url(" + backgroundImage + ")");
      } else {
        this.$el
          .removeClass("has-bg-image")
          .css("background-image", "");
      }
    },

    setBackgroundStyles: function () {
      var config = this.model.get('_boxMenu');
      var styles = config && config._backgroundStyles;

      if (!styles) return;

      this.$el.css({
        'background-repeat': styles._backgroundRepeat,
        'background-size': styles._backgroundSize,
        'background-position': styles._backgroundPosition
      });
    },

    processHeader: function() {
      var config = this.model.get('_boxMenu');
      var header = config && config._menuHeader;

      if (!header) return;

      var $header = this.$('.menu__header');

      this.setHeaderBackgroundImage(header, $header);
      this.setHeaderBackgroundStyles(header, $header);
      this.setHeaderMinimumHeight(header, $header);
    },

    setHeaderBackgroundImage: function(config, $header) {
      var backgroundImages = config._backgroundImage;

      if (!backgroundImages) return;

      var backgroundImage;

      switch (Adapt.device.screenSize) {
        case "large":
          backgroundImage = backgroundImages._large;
          break;
        case "medium":
          backgroundImage = backgroundImages._medium;
          break;
        default:
          backgroundImage = backgroundImages._small;
      }

      if (backgroundImage) {
        $header
          .addClass("has-bg-image")
          .css("background-image", "url(" + backgroundImage + ")");
      } else {
        $header
          .removeClass("has-bg-image")
          .css("background-image", "");
      }
    },

    setHeaderBackgroundStyles: function (config, $header) {
      var styles = config._backgroundStyles;

      if (!styles) return;

      $header.css({
        'background-repeat': styles._backgroundRepeat,
        'background-size': styles._backgroundSize,
        'background-position': styles._backgroundPosition
      });
    },

    setHeaderMinimumHeight: function(config, $header) {
      var minimumHeights = config._minimumHeights;

      if (!minimumHeights) return;

      var minimumHeight;

      switch (Adapt.device.screenSize) {
        case "large":
          minimumHeight = minimumHeights._large;
          break;
        case "medium":
          minimumHeight = minimumHeights._medium;
          break;
        default:
          minimumHeight = minimumHeights._small;
      }

      if (minimumHeight) {
        $header
          .addClass("has-min-height")
          .css("min-height", minimumHeight + "px");
      } else {
        $header
          .removeClass("has-min-height")
          .css("min-height", "");
      }
    }

  }, {
    childView: BoxMenuItemView,
    className: 'boxmenu',
    template: 'boxMenu'
  });

  Adapt.on('router:menu', function(model) {
    $('#wrapper').append(new BoxMenuView({model: model}).$el);
  });

});

define('theme/author-ispring-default/js/themeView',['core/js/adapt'], function (Adapt) {
  var ThemeView = Backbone.View.extend({
    backgroundSizes: {
      auto: 'auto',
      cover: 'cover',
      contain: 'contain',
      fit: '100% 100%',
    },
    className: function () {},

    initialize: function () {
      this.setStyles();

      this.listenTo(Adapt, {
        'device:changed': this.onDeviceResize,
        remove: this.remove,
      });
    },

    onDeviceResize: function () {
      this.setStyles();
    },

    remove: function () {
      Backbone.View.prototype.remove.call(this);

      this.onRemove();
    },

    setStyles: function () {
      this.setClasses();
      this.setBackgroundImage();
      this.setBackgroundStyles();
      this.setMinimumHeight();
      this.setCustomStyles();
    },

    setClasses: function () {
      this.$el.addClass(this.className());
    },

    setBackgroundImage: function () {
      var backgroundImages = this.model.get('_backgroundImage');

      if (!backgroundImages) return;

      var backgroundImage;

      switch (Adapt.device.screenSize) {
        case 'large':
          backgroundImage = backgroundImages._large;
          break;
        case 'medium':
          backgroundImage = backgroundImages._medium;
          break;
        default:
          backgroundImage = backgroundImages._small;
      }

      if (backgroundImage) {
        this.$el
          .addClass('has-bg-image')
          .css('background-image', 'url(' + backgroundImage + ')');
      } else {
        this.$el.removeClass('has-bg-image').css('background-image', '');
      }
    },

    setBackgroundStyles: function () {
      var styles = this.model.get('_backgroundStyles');

      if (!styles) return;
      this.$el.css({
        'background-repeat': styles._backgroundRepeat,
        'background-size': styles._backgroundSize
          ? this.backgroundSizes[styles._backgroundSize]
          : 'unset',
        'background-position': styles._backgroundPosition,
      });
    },

    setMinimumHeight: function () {
      var minimumHeights = this.model.get('_minimumHeights');

      if (!minimumHeights) return;

      var minimumHeight;

      switch (Adapt.device.screenSize) {
        case 'large':
          minimumHeight = minimumHeights._large;
          break;
        case 'medium':
          minimumHeight = minimumHeights._medium;
          break;
        default:
          minimumHeight = minimumHeights._small;
      }

      if (minimumHeight) {
        this.$el
          .addClass('has-min-height')
          .css('min-height', minimumHeight + 'px');
      } else {
        this.$el.removeClass('has-min-height').css('min-height', '');
      }
    },

    setCustomStyles: function () {},

    onRemove: function () {},
  });

  return ThemeView;
});

define('theme/author-ispring-default/js/themePageView',[
  './themeView',
  'core/js/adapt'
], function(ThemeView, Adapt) {

  var ThemePageView = ThemeView.extend({

    className: function() {},

    setCustomStyles: function() {
      this.processHeader();
    },

    processHeader: function() {
      var header = this.model.get('_pageHeader');

      if (!header) return;

      var $header = this.$('.page__header');

      this.setHeaderBackgroundImage(header, $header);
      this.setHeaderBackgroundStyles(header, $header);
      this.setHeaderMinimumHeight(header, $header);
    },

    setHeaderBackgroundImage: function(config, $header) {
      var backgroundImages = config._backgroundImage;

      if (!backgroundImages) return;

      var backgroundImage;

      switch (Adapt.device.screenSize) {
        case "large":
          backgroundImage = backgroundImages._large;
          break;
        case "medium":
          backgroundImage = backgroundImages._medium;
          break;
        default:
          backgroundImage = backgroundImages._small;
      }

      if (backgroundImage) {
        $header
          .addClass("has-bg-image")
          .css("background-image", "url(" + backgroundImage + ")");
      } else {
        $header
          .removeClass("has-bg-image")
          .css("background-image", "");
      }
    },

    setHeaderBackgroundStyles: function (config, $header) {
      var styles = config._backgroundStyles;

      if (!styles) return;

      $header.css({
        'background-repeat': styles._backgroundRepeat,
        'background-size': styles._backgroundSize,
        'background-position': styles._backgroundPosition
      });
    },

    setHeaderMinimumHeight: function(config, $header) {
      var minimumHeights = config._minimumHeights;

      if (!minimumHeights) return;

      var minimumHeight;

      switch (Adapt.device.screenSize) {
        case "large":
          minimumHeight = minimumHeights._large;
          break;
        case "medium":
          minimumHeight = minimumHeights._medium;
          break;
        default:
          minimumHeight = minimumHeights._small;
      }

      if (minimumHeight) {
        $header
          .addClass("has-min-height")
          .css("min-height", minimumHeight + "px");
      } else {
        $header
          .removeClass("has-min-height")
          .css("min-height", "");
      }
    },

    onRemove: function() {}

  });

  return ThemePageView;

});

define('theme/author-ispring-default/js/themeArticleView',[
  "./themeView",
  "core/js/adapt"
], function(ThemeView, Adapt) {

  var ThemeArticleView = ThemeView.extend({

    className: function() {},

    setCustomStyles: function() {},

    onRemove: function() {}

  });

  return ThemeArticleView;

});

define('theme/author-ispring-default/js/themeBlockView',["./themeView", "core/js/adapt"], function (ThemeView, Adapt) {
  var ThemeBlockView = ThemeView.extend({
    className: function () {
      var classes = "";
      classes += this.model.get("_isDividerBlock") ? "is-divider-block " : "";
      var bgStyles = this.model.get("_backgroundStyles");
      var opacityDisabled =
        bgStyles && bgStyles._disableOpacity ? "block-opacity-disabled " : "";
      classes += opacityDisabled;
      
      return classes;
    },

    setCustomStyles: function () {},

    onRemove: function () {},
  });

  return ThemeBlockView;
});

define('theme/author-ispring-default/js/theme',[
  "core/js/adapt",
  "./themePageView",
  "./themeArticleView",
  "./themeBlockView",
  "./themeView",
], function (
  Adapt,
  ThemePageView,
  ThemeArticleView,
  ThemeBlockView,
  ThemeView
) {
  function onDataReady() {
    $("html").addClass(Adapt.course.get("_courseStyle"));
  }

  function onPostRender(view) {
    var model = view.model;
    var theme = model.get("_ispringDefault");

    if (!theme) return;

    switch (model.get("_type")) {
      case "page":
        new ThemePageView({ model: new Backbone.Model(theme), el: view.$el });
        break;
      case "article":
        new ThemeArticleView({
          model: new Backbone.Model(theme),
          el: view.$el,
        });
        break;
      case "block":
        new ThemeBlockView({ model: new Backbone.Model(theme), el: view.$el });
        break;
      default:
        new ThemeView({ model: new Backbone.Model(theme), el: view.$el });
    }
  }

  function onNavigationPreRender(nav) {
    $(nav.el).addClass("u-display-none");
  }

  function onNavigationRender() {
    renderTopNavigation();
  }

  function renderTopNavigation() {
    var header = document.querySelector(
      "#author-cbt-frame__top__navigation-wrapper"
    );
    if (header && !header.innerHTML) {
      header.innerHTML = Handlebars.templates["cbt-navigation"]();
    }
  }

  function changeNavigationBlockTitle(currentBlock) {
    $(".cbt-navigation__left__block-title").text(
      currentBlock.get("displayTitle")
    );
  }

  Adapt.on({
    "app:dataReady": onDataReady,
    "pageView:postRender articleView:postRender blockView:postRender":
      onPostRender,
    "cbtView:blockLoaded cbtView:blockLoading": changeNavigationBlockTitle,
  });

  Adapt.once("navigationView:postRender", onNavigationPreRender);
  Adapt.on("navigationView:postRender", onNavigationRender);
  Adapt.on(
    "cbtView:renderTopNavigation cbtView:onTemplateRendered",
    renderTopNavigation
  );
});

;
define("plugins", ["components/author-ilt-drag-image/js/ilt-drag-image","components/author-ilt-image/js/author-ilt-image","components/author-ilt-list/js/author-ilt-list","components/author-ilt-mcq/js/author-ilt-mcq","components/author-ilt-s1000d/js/author-ilt-s1000d","extensions/author-ispring-training/js/bootstrap","menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenu","theme/author-ispring-default/js/theme"], function(){});

require([
  'core/js/adapt',
  'core/js/accessibility',
  'core/js/data',
  'core/js/offlineStorage',
  'core/js/logging',
  'core/js/tracking',
  'core/js/device',
  'core/js/drawer',
  'core/js/notify',
  'core/js/router',
  'core/js/models/lockingModel',
  'core/js/helpers',
  'core/js/scrolling',
  'core/js/headings',
  'core/js/navigation',
  'plugins'
], function (Adapt) {

  $('body').append(Handlebars.templates.loading());

  Adapt.data.on('ready', function triggerInit() {
    Adapt.log.debug('Calling Adapt.init');

    Adapt.init();

    Adapt.off('adaptCollection:dataLoaded courseModel:dataLoaded');
  }).init();

});

define("core/js/app", function(){});


//# sourceMappingURL=adapt.min.js.map